<div style="background: hsl(202, 73%, 96%); margin: 5px; border-radius: 5px; border: 1px solid hsl(200, 70%, 80%);
            grid-column-gap: 5px; grid-template-columns: 220px 1000px 600px;
            display: grid; align-content: center">
  <div style="display: block; margin: 20px;">
    <button class="btn"
            style="width: 180px; margin: 2px; padding: 10px;"
            [ngClass]="{'btn-warning': (this.displayBoxes && this.coordinates.main.length > 0
            && this.currentMode !== 'main'),
            'btn-primary': this.currentMode === 'main',
            'btn-outline-primary': this.currentMode !== 'main'}"
            (click)="this.changeMode('main')">Hauptaufnahme</button>
    <button class="btn"
            style="width: 180px; margin: 2px; padding: 10px;"
            [ngClass]="{'btn-warning': (this.displayBoxes && this.coordinates.lateral.length > 0
            && this.currentMode !== 'lateral'),
            'btn-primary': this.currentMode === 'lateral',
            'btn-outline-primary': this.currentMode !== 'lateral'}"
            (click)="this.changeMode('lateral')"
            [disabled]="this.scans.lateralScan === undefined">Lateralaufnahme</button>
    <button class="btn btn-outline-primary"
            style="width: 180px; margin: 2px; padding: 10px;"
            [ngClass]="{'btn-warning': (this.displayBoxes && this.coordinates.pre.length > 0
            && this.currentMode !== 'pre'),
            'btn-primary': this.currentMode === 'pre',
            'btn-outline-primary': this.currentMode !== 'pre'}"
            (click)="this.changeMode('pre')"
            [disabled]="this.scans.preScan === undefined">Voraufnahme</button>
    <button class="btn"
            [ngClass]="this.displayBoxes? 'btn-success': 'btn-outline-success'"
            style="width: 180px; margin: 2px; padding: 10px;"
            (click)="toggleBoxes()">Boxen anzeigen</button>
    <button class="btn"
            style="width: 180px; margin: 2px; padding: 10px;"
            [ngClass]="this.enableZoom? 'btn-success': 'btn-outline-success'"
            (click)="toggleZoom()">Toggle Zoom</button>
    <button *ngIf="isAllowed" class="btn"
            [ngClass]="this.enableDelete? 'btn-success': 'btn-outline-success'"
            style="width: 180px; margin: 2px; padding: 10px;"
            (click)="toggleDelete()">LÃ¶schen aktivieren</button>
    <button *ngIf="isAllowed" class="btn"
            [ngClass]="this.enableEdit? 'btn-success': 'btn-outline-success'"
            style="width: 180px; margin: 2px; padding: 10px;"
            (click)="toggleEditor()">Editor aktivieren</button>
    <button *ngIf="isAllowed && this.enableEdit" class="btn btn-outline-success"
            style="width: 180px; margin: 2px; padding: 10px;"
            (click)="saveNewBox()">Box Speichern</button>
  </div>

  <div style="position: relative; margin: 5px;" [ngStyle]="{'width.px': currentWidth, 'height.px': currentHeight}">
    <img #sourceImage
      style="position: absolute; left: 0; top: 0; z-index: 0"
         height="{{currentHeight}}" width="{{currentWidth}}"
         src="{{currentScanUrl}}"
         id="sourceImage" class="image" alt="Fehler beim Laden der Aufnahme"/>
    <canvas #drawLayer style="position: absolute; left: 0; top: 0; z-index: 1" id="drawCanvas"
            width="{{currentWidth+50}}" height="{{currentHeight+50}}"></canvas>
    <canvas #labelLayer style="position: absolute; left: 0; top: 0; z-index: 1" id="labelCanvas"
            width="{{currentWidth+50}}" height="{{currentHeight+50}}"></canvas>
    <div #lensContainer *ngIf="enableZoom">
      <div style="position: absolute; border: 1px solid #d4d4d4; width: 300px; height: 300px;" id="lens" ></div>
      <div style="position: absolute; left: 0; top: 0; z-index: 2" id="zoomCanvas"
           [ngStyle]="{'width.px': currentWidth, 'height.px': currentHeight}"></div>
    </div>
    <canvas *ngIf="enableDelete" #deleteLayer style="position: absolute; left: 0; top: 0; z-index: 3" id="deleteCanvas"
            width="{{currentWidth}}" height="{{currentHeight}}"></canvas>
    <canvas *ngIf="enableEdit" #editLayer style="position: absolute; left: 0; top: 0; z-index: 3" id="editCanvas"
            width="{{currentWidth}}" height="{{currentHeight}}"></canvas>
  </div>

  <div #zoomDiv style="margin: 20px; width: 600px; height: 600px; border: 1px solid #d4d4d4;"
    id="zoom"></div>

</div>

<ng-template #labelDialog>
  <h4 style="margin-bottom: 5px" matDialogTitle>Label-Dialog</h4>
  <mat-divider></mat-divider>
  <mat-dialog-content style="margin: 10px 0">
    <div style="margin: 0">Neues Label eingeben:</div>
    <input style="margin: 0" matInput type="text" id="labelInput" [(ngModel)]="newLabel">
  </mat-dialog-content>
  <mat-divider></mat-divider>
  <mat-dialog-actions style="float: right">
    <button class="btn btn-primary" (click)="save()">Speichern</button>
    <button style="margin-left:3px" class="btn btn-outline-secondary" (click)="close()">Abbrechen</button>
  </mat-dialog-actions>
</ng-template>
