{"version":3,"mappings":"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","names":["e","webpackEmptyAsyncContext","module","routes","path","component","_app_view__WEBPACK_IMPORTED_MODULE_0__","_app_feature__WEBPACK_IMPORTED_MODULE_1__","canActivate","_app_helpers__WEBPACK_IMPORTED_MODULE_2__","data","roles","_app_models__WEBPACK_IMPORTED_MODULE_3__","redirectTo","AppRoutingModule","_angular_router__WEBPACK_IMPORTED_MODULE_5__","imports","exports","AppComponent","selectors","decls","vars","template","_angular_core__WEBPACK_IMPORTED_MODULE_1__","AppModule","bootstrap","_app_component__WEBPACK_IMPORTED_MODULE_0__","_app_core__WEBPACK_IMPORTED_MODULE_6__","provide","_angular_material_core__WEBPACK_IMPORTED_MODULE_8__","useClass","_app_helpers__WEBPACK_IMPORTED_MODULE_5__","useValue","_angular_common_http__WEBPACK_IMPORTED_MODULE_9__","multi","_angular_platform_browser__WEBPACK_IMPORTED_MODULE_10__","_angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_11__","_app_routing_module__WEBPACK_IMPORTED_MODULE_4__","_app_feature_feature_module__WEBPACK_IMPORTED_MODULE_1__","_app_shared_shared_module__WEBPACK_IMPORTED_MODULE_3__","_app_view_view_module__WEBPACK_IMPORTED_MODULE_2__","declarations","AuthenticationService","router","http","userSubject","rxjs__WEBPACK_IMPORTED_MODULE_1__","JSON","parse","localStorage","getItem","user","asObservable","value","username","password","post","_env_environment__WEBPACK_IMPORTED_MODULE_0__","pipe","setItem","stringify","next","removeItem","navigate","then","_angular_core__WEBPACK_IMPORTED_MODULE_3__","factory","providedIn","BackendCallerService","_environments_environment__WEBPACK_IMPORTED_MODULE_0__","id","get","templateUrl","jsonData","put","_id","parts","name","formData","materialUrl","objectID","scanID","query","material","coordinates","judged","DataParserService","parseOptional","newParts","part","kind","push","_models_templateModel__WEBPACK_IMPORTED_MODULE_1__","newPart","parseOptionalCategory","res","el","parsedCat","cat","parsedName","parseCategoryTitle","optional","selectables","catName","includes","substring","length","categories","maxRowLength","rows","category","splits","getSplits","split_cats","splitCategory","concat","pos","split","temp_sels","slice","rowSplits","currentSplit","rowCounter","sel","options","indexOf","groupValues","Map","console","log","set","_models_generator__WEBPACK_IMPORTED_MODULE_0__","suppressedNormal","suppressedJudgement","normalExtractor","judgementExtractor","report","judgement","p","NAVBAR_HEADER_TOGGLE_1","NAVBAR_HEADER_TOGGLE_2","DisplayService","displayHeader","url","_angular_core__WEBPACK_IMPORTED_MODULE_0__","FilesSortingService","identifier","RegExp","nIntegers","preString","join","files","map","file","test","baseFiles","checkFiles","some","baseFile","match","undefined","checkFiles1","checkFiles2","result","checkFile1","find","checkFile2","InputParserService","rootEl","varKeyDictionary","initializeKeywords","initializeDictionary","inputString","possibleWords","Array","from","primaryDictionary","inputSplit","forEach","word","idx","distances","possibleWord","toLowerCase","toLocaleLowerCase","replacement","varKeys","getVariableKeywords","variables","option","selectable","variable","i","values","keys","key","synonym","textBefore","textAfter","position","active","input","foundKeywordsTemp","selectableKeywords","keyword","positions","keywordWithPos","filterOverlap","sort","compareKeywords","foundKeywords","keySel","relativePosition","foundVariablesTemp","possibleVariables","varKey","varKeyWithPos","posVar","posValueStart","posValueEnd","trim","fKCopy","toRemove","overlap","filter","kw","removable","splice","arg1","arg2","resultWithoutKeywords","lastPosition","tempString","selKeys","tempSelectables","getSelectableKeywords","extractVariableKeywords","Set","add","selKey","variableKeywords","group","MatDialogService","width","dialogConfig","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__","disableClose","autoFocus","hasBackdrop","PopoutService","injector","componentFactoryResolver","applicationRef","windowInstance","openOnce","setTimeout","createCDKPortal","target","winRef","window","open","location","href","outlet","_angular_cdk_portal__WEBPACK_IMPORTED_MODULE_2__","document","body","styleSheetElement","getStyleSheetElement","head","appendChild","onload","innerText","createInjector","title","componentInstance","attachContainer","_popout_tokens__WEBPACK_IMPORTED_MODULE_0__","containerPortal","_app_shared__WEBPACK_IMPORTED_MODULE_1__","containerRef","attach","instance","injectionTokens","WeakMap","createElement","querySelectorAll","htmlElement","rel","absoluteUrl","URL","POPOUT_MODAL_DATA","POPOUT_MODALS","UserService","AccountManagementComponent","FeatureModule","_angular_common__WEBPACK_IMPORTED_MODULE_7__","_angular_router__WEBPACK_IMPORTED_MODULE_8__","_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_9__","_angular_forms__WEBPACK_IMPORTED_MODULE_10__","_app_shared_shared_module__WEBPACK_IMPORTED_MODULE_0__","_app_feature_judge_mat_judge_mat_component__WEBPACK_IMPORTED_MODULE_1__","_app_feature_list_list_component__WEBPACK_IMPORTED_MODULE_2__","_app_feature_list_material_list_material_component__WEBPACK_IMPORTED_MODULE_3__","_app_feature_ui_base_ui_base_component__WEBPACK_IMPORTED_MODULE_4__","_account_management_account_management_component__WEBPACK_IMPORTED_MODULE_5__","_angular_core__WEBPACK_IMPORTED_MODULE_4__","ctx_r0","JudgeMatComponent","backendCaller","route","dataParser","popoutService","authenticationService","event","closePopoutModal","subscribe","x","getData","paramMap","ps","has","matID","getMaterialById","alert","extractCategories","openImagePopout","makeText","updateText","makeNormal","_app_core__WEBPACK_IMPORTED_MODULE_1__","updateMaterial","message","navigateByUrl","restricted","role","_app_models__WEBPACK_IMPORTED_MODULE_0__","modalData","scans","openPopoutModal","hostBindings","ctx","_r3","ListMaterialComponent","dialogService","dialog","queryMaterials","mats","materials","newValue","main","lateral","pre","dialogData","defaultConfig","top","dialogRef","afterClosed","dialogResult","deleteMaterial","reload","consts","_r1","ListComponent","_app_models__WEBPACK_IMPORTED_MODULE_2__","isLoading","update","getTemplateList","templates","_app_shared_confirm_dialog_confirm_dialog_component__WEBPACK_IMPORTED_MODULE_0__","remove","deleteTemplate","date","Date","getDate","getMonth","getFullYear","UiBaseComponent","_location","inputParser","sanitizer","templateID","getTemplateById","defaultParts","init","json","downJson","bypassSecurityTrustUrl","encodeURIComponent","ev","autocorrect","findKeywords","splitInputFromKeywords","splitInput","splitReducedInput","optionsComponent","initRows","resetText","viewQuery","_app_shared__WEBPACK_IMPORTED_MODULE_0__","AuthGuard","state","userValue","queryParams","returnUrl","ErrorInterceptor","request","handle","err","status","logout","error","statusText","users","FakeBackendInterceptor","method","headers","handleRoute","endsWith","authenticate","getUsers","getUserById","ok","token","isAdmin","unauthorized","isLoggedIn","currentUser","idFromUrl","_angular_common_http__WEBPACK_IMPORTED_MODULE_2__","authHeader","startsWith","parseInt","urlParts","fakeBackendProvider","AppDateAdapter","displayFormat","day","toString","month","year","toDateString","_angular_material_core__WEBPACK_IMPORTED_MODULE_0__","t","APP_DATE_FORMATS","dateInput","display","monthYearLabel","dateA11yLabel","monthYearA11yLabel","JwtInterceptor","accessToken","isApiUrl","clone","setHeaders","authorization","_angular_core__WEBPACK_IMPORTED_MODULE_2__","resolve","varId","structure","tl","resolveCategory","c","variablesOfSelectable","v","s","o","assertNever","n","Error","flatMap","xs","f","ret","displayableQuotient","numerator","denominator","fractionDigits","isFinite","toFixed","levenshtein","a","b","an","bn","matrix","row","firstRow","j","charAt","Math","min","getAllIndexOf","searchStr","inputStr","caseSensitive","startIndex","index","indexes","splitStringFromIndexes","splitText","getDateFormatted","addTime","hour","getHours","minutes","getMinutes","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","getBase64Image","img","canvas","height","getContext","drawImage","dataURL","toDataURL","replace","getFileExtension","filename","pop","getImageDimensions","imgUrl","Image","src","loadedImage","currentTarget","text","normalText","judgementText","extractor","suppressed","getTexts","expandVariablesInString","ofBlock","makeEnumeration","checkConditional","ofConditional","blocks","regEx","getSuppressedConditionalIds","topLevel","precondition","anded","literal","negated","outer","isClicked","clickableId","conditionalId","ss","textExtractor","enumeration","ofCheckbox","ofOption","addFullStop","today","yesterday","setDate","tomorrow","lookup","makeDateString","allVariables","matching","textOfVariable","brackets","d","toLocaleDateString","val","toLocaleString","maximumFractionDigits","assertUnreachable","makeNormalCategory","hasSelection","entry","normal","items","getRelevantEnumerationItems","ofEnumeration","Role","sub","substr","lengthTaken","setter","regex","r","exec","dummy","fail","success","decimal","compound","takers","results","reduce","or","taker","addSetter","logOnFail","msg","logOnSuccess","msgSuc","msgFail","convertModel","oldModel","convertCategory","convertBlock","convertEnum","convertCond","convertSelectables","oldSels","newSels","oldSel","newSel","convertCheckBox","convertGroup","oldBox","newVariables","convertVariables","keywords","splitKeywords","oldGroup","newOpts","oldOpt","convertOption","oldBlock","oldEnum","oldCond","oldCat","oldVars","newVars","convertVariable","oldVar","newVar","splitKeywordsArray","splitter","optionSplitter","synonymSplitter","variableSplit","varSynonyms","synSplit","User","ConfirmDialogComponent","type","close","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__","ConfirmDialogModel","BOX_LINE_WIDTH","DISPLAY_BOX_COLOR","EDIT_BOX_COLOR","TEXT_COLOR","MAX_IMAGE_HEIGHT","ImageDisplayComponent","_env_environment__WEBPACK_IMPORTED_MODULE_1__","layer","enableDelete","deleteLayerElement","nativeElement","deleteContext","addDeleteListeners","enableEdit","editLayerElement","editContext","rectangleDrawing","container","enableZoom","containerElement","zoomLayerElement","children","lensElement","imageZoom","displayBoxes","initMain","drawLayerElement","drawLayer","drawContext","labelLayerElement","labelLayer","labelContext","currentMode","setCurrentImage","setCurrentDimensions","context","lineWidth","lineCap","strokeStyle","clearRect","currentScanUrl","serverUrl","currentScaleFactor","currentHeight","currentWidth","mode","drawBoxes","clearCanvas","toggleBoxes","toggleDelete","toggleEditor","bbox","drawRect","addLabel","rect","getBoundingClientRect","parent","addEventListener","left","y","w","h","clientX","clientY","removeAlert","confirm","label","color","setCanvasProperties","beginPath","stroke","font","fillStyle","fillText","strokeText","startX","startY","labelDialog","newLabel","fixNegativeCoordinates","sourceImage","zoomDiv","cx","offsetWidth","cy","offsetHeight","style","backgroundImage","backgroundSize","moveLens","preventDefault","getCursorPos","backgroundPosition","pageX","pageY","pageXOffset","pageYOffset","_app_core_services_popout_tokens__WEBPACK_IMPORTED_MODULE_0__","_r4","InputModalComponent","fb","form","number","checkForm","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__","sel_r3","option_r19","OptionsComponent","setMinRowLength","determineWidth","minRowLength","extractRows","cats","clickEvent","emit","inputs","outputs","ReportComponent","disclaimer","inputElement","select","execCommand","setSelectionRange","fullText","selBox","append","focus","removeChild","SharedModule","_angular_common__WEBPACK_IMPORTED_MODULE_9__","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_11__","_angular_material_divider__WEBPACK_IMPORTED_MODULE_12__","_angular_material_input__WEBPACK_IMPORTED_MODULE_13__","_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_14__","_angular_material_radio__WEBPACK_IMPORTED_MODULE_15__","_angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_16__","_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_17__","_app_shared_inputModal_inputModal_component__WEBPACK_IMPORTED_MODULE_1__","_app_shared_options_options_component__WEBPACK_IMPORTED_MODULE_2__","_app_shared_report_report_component__WEBPACK_IMPORTED_MODULE_3__","_app_shared_upload_upload_component__WEBPACK_IMPORTED_MODULE_4__","_app_shared_upload_material_upload_material_component__WEBPACK_IMPORTED_MODULE_5__","_app_shared_variables_variables_component__WEBPACK_IMPORTED_MODULE_6__","_app_shared_image_display_image_display_component__WEBPACK_IMPORTED_MODULE_7__","UploadMaterialComponent","filesSorter","initForm","updateTemplateList","uploadForm","_angular_forms__WEBPACK_IMPORTED_MODULE_2__","mainScans","validators","lateralScans","preScans","dict","setIdentifier","flagFiles","scanType","fileFilter","setValue","supportedFileTypes","mainFiles","lateralFiles","preFiles","mainFlags","identifierSearch","lateralRedFlags","preRedFlags","lateralYellowFlags","fileMatchSearch","preYellowFlags","uploading","choice","fileTuples","getFileTuples","fileTuple","FormData","addMaterial","progress","messages","_r5","UploadComponent","_angular_forms__WEBPACK_IMPORTED_MODULE_3__","currentFile","checkFileExtension","showWarning","extension","postData","addTemplateFromJSON","reset","_r0","variable_r1","$event","val_r17","VariablesComponent","initButtonClickedMap","hasButtonBeenClickedOnce","parentActive","modalInput","response","parentText","_inputModal_inputModal_component__WEBPACK_IMPORTED_MODULE_1__","toPromise","Promise","assignValues","AdminComponent","HeaderComponent","displayService","displayNavbar","faUser","_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__","updateDisplay","LoginComponent","formBuilder","loginForm","controls","submitted","invalid","loading","login","snapshot","ViewModule","_angular_common__WEBPACK_IMPORTED_MODULE_4__","_angular_forms__WEBPACK_IMPORTED_MODULE_5__","_fortawesome_angular_fontawesome__WEBPACK_IMPORTED_MODULE_6__","_angular_router__WEBPACK_IMPORTED_MODULE_7__","_app_view_header_header_component__WEBPACK_IMPORTED_MODULE_1__","_app_view_admin_admin_component__WEBPACK_IMPORTED_MODULE_0__","_app_view_login_login_component__WEBPACK_IMPORTED_MODULE_2__","environment","production","backend","authentication","database","_environments_environment__WEBPACK_IMPORTED_MODULE_1__","_angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__","bootstrapModule","_app_app_module__WEBPACK_IMPORTED_MODULE_0__"],"sources":["webpack:///$_lazy_route_resources|lazy|groupOptions:%20%7B%7D|namespace%20object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/core/services/authentication.service.ts","webpack:///src/app/core/services/backend-caller.service.ts","webpack:///src/app/core/services/dataParser.service.ts","webpack:///src/app/core/services/display.service.ts","webpack:///src/app/core/services/files-sorting.service.ts","webpack:///src/app/core/services/input-parser.service.ts","webpack:///src/app/core/services/mat-dialog.service.ts","webpack:///src/app/core/services/popout.service.ts","webpack:///src/app/core/services/popout.tokens.ts","webpack:///src/app/core/services/user.service.ts","webpack:///src/app/feature/account-management/account-management.component.ts","webpack:///src/app/feature/account-management/account-management.component.html","webpack:///src/app/feature/feature.module.ts","webpack:///src/app/feature/judge-mat/judge-mat.component.html","webpack:///src/app/feature/judge-mat/judge-mat.component.ts","webpack:///src/app/feature/list-material/list-material.component.html","webpack:///src/app/feature/list-material/list-material.component.ts","webpack:///src/app/feature/list/list.component.html","webpack:///src/app/feature/list/list.component.ts","webpack:///src/app/feature/ui-base/ui-base.component.html","webpack:///src/app/feature/ui-base/ui-base.component.ts","webpack:///src/app/helpers/auth.guard.ts","webpack:///src/app/helpers/error.interceptor.ts","webpack:///src/app/helpers/fake-backend.ts","webpack:///src/app/helpers/format-datepicker.ts","webpack:///src/app/helpers/jwt.interceptor.ts","webpack:///src/app/helpers/old_model.ts","webpack:///src/app/helpers/util.ts","webpack:///src/app/models/generator.ts","webpack:///src/app/models/role.ts","webpack:///src/app/models/takers.ts","webpack:///src/app/models/templateModel.ts","webpack:///src/app/models/user.ts","webpack:///src/app/shared/confirm-dialog/confirm-dialog.component.html","webpack:///src/app/shared/confirm-dialog/confirm-dialog.component.ts","webpack:///src/app/shared/image-display/image-display.component.html","webpack:///src/app/shared/image-display/image-display.component.ts","webpack:///src/app/shared/inputModal/inputModal.component.html","webpack:///src/app/shared/inputModal/inputModal.component.ts","webpack:///src/app/shared/options/options.component.html","webpack:///src/app/shared/options/options.component.ts","webpack:///src/app/shared/report/report.component.ts","webpack:///src/app/shared/report/report.component.html","webpack:///src/app/shared/shared.module.ts","webpack:///src/app/shared/upload-material/upload-material.component.html","webpack:///src/app/shared/upload-material/upload-material.component.ts","webpack:///src/app/shared/upload/upload.component.html","webpack:///src/app/shared/upload/upload.component.ts","webpack:///src/app/shared/variables/variables.component.html","webpack:///src/app/shared/variables/variables.component.ts","webpack:///src/app/view/admin/admin.component.ts","webpack:///src/app/view/admin/admin.component.html","webpack:///src/app/view/header/header.component.html","webpack:///src/app/view/header/header.component.ts","webpack:///src/app/view/login/login.component.html","webpack:///src/app/view/login/login.component.ts","webpack:///src/app/view/view.module.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98255;\nmodule.exports = webpackEmptyAsyncContext;","import { NgModule } from \"@angular/core\";\r\nimport { Routes, RouterModule } from \"@angular/router\";\r\n\r\nimport { LoginComponent, AdminComponent } from \"@app/view\";\r\nimport { ListComponent, UiBaseComponent, ListMaterialComponent, JudgeMatComponent } from \"@app/feature\";\r\nimport { AuthGuard } from \"@app/helpers\";\r\nimport { Role } from \"@app/models\";\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"login\",\r\n    component: LoginComponent\r\n  },\r\n  {\r\n    path: \"list\",\r\n    component: ListComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.User, Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"main/:id\",\r\n    component: UiBaseComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.User, Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"listMat\",\r\n    component: ListMaterialComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"mainMat/:id\",\r\n    component: JudgeMatComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"radiolearn\",\r\n    component: ListMaterialComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.User, Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"admin\",\r\n    component: AdminComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.Admin] }\r\n  },\r\n  {path: \"**\", redirectTo: \"/list\"}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\n\r\nexport class AppRoutingModule { }\r\n","import {Component} from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-root\",\r\n  templateUrl: \"./app.component.html\",\r\n  styleUrls: [\"./app.component.scss\"]\r\n})\r\n\r\nexport class AppComponent {\r\n\r\n  constructor() {\r\n  }\r\n\r\n}\r\n\r\n","<app-header></app-header>\r\n<router-outlet></router-outlet>\r\n","import { BrowserModule } from \"@angular/platform-browser\";\r\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { HTTP_INTERCEPTORS, HttpClientModule } from \"@angular/common/http\";\r\n\r\nimport { DateAdapter, MAT_DATE_FORMATS } from \"@angular/material/core\";\r\nimport { AppComponent } from \"./app.component\";\r\nimport { FeatureModule } from \"@app/feature/feature.module\";\r\nimport { ViewModule } from \"@app/view/view.module\";\r\nimport { SharedModule } from \"@app/shared/shared.module\";\r\nimport { AppRoutingModule } from \"./app-routing.module\";\r\nimport { JwtInterceptor, ErrorInterceptor, APP_DATE_FORMATS, AppDateAdapter } from \"@app/helpers\";\r\nimport { PopoutService } from \"@app/core\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n  ],\r\n    imports: [\r\n      BrowserModule,\r\n      BrowserAnimationsModule,\r\n      HttpClientModule,\r\n      AppRoutingModule,\r\n      FeatureModule,\r\n      SharedModule,\r\n      ViewModule,\r\n    ],\r\n  providers: [PopoutService,\r\n    { provide: DateAdapter, useClass: AppDateAdapter },\r\n    { provide: MAT_DATE_FORMATS, useValue: APP_DATE_FORMATS },\r\n    { provide: HTTP_INTERCEPTORS, useClass: JwtInterceptor, multi: true },\r\n    { provide: HTTP_INTERCEPTORS, useClass: ErrorInterceptor, multi: true }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Router } from \"@angular/router\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { BehaviorSubject, Observable } from \"rxjs\";\r\nimport { map } from \"rxjs/operators\";\r\n\r\nimport { environment } from \"@env/environment\";\r\nimport { User } from \"@app/models\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class AuthenticationService {\r\n  public user: Observable<User>;\r\n  private userSubject: BehaviorSubject<User>;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private http: HttpClient\r\n  ) {\r\n    this.userSubject = new BehaviorSubject<User>(JSON.parse(localStorage.getItem(\"user\")));\r\n    this.user = this.userSubject.asObservable();\r\n  }\r\n\r\n  public get userValue(): User {\r\n    return this.userSubject.value;\r\n  }\r\n\r\n  login(username: string, password: string) {\r\n    return this.http.post<any>(environment.backend + environment.authentication + \"signIn\", { username, password })\r\n      .pipe(map(user => {\r\n        // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n        this.userSubject.next(user);\r\n        return user;\r\n      }));\r\n  }\r\n\r\n  logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem(\"user\");\r\n    this.userSubject.next(null);\r\n    this.router.navigate([\"/login\"]).then();\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport * as M from \"../../models/templateModel\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { environment } from \"../../../environments/environment\";\r\nimport {Observable} from \"rxjs\";\r\nimport {Template} from \"../../models/templateModel\";\r\nimport {Material} from \"../../models/materialModel\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\n\r\n// -----------------------------------\r\n// This class administrates the list of templates and executes all api calls\r\n// -----------------------------------\r\n\r\nexport class BackendCallerService {\r\n\r\n  templateUrl = environment.backend + environment.database + environment.template;\r\n  materialUrl = environment.backend + environment.database + environment.material;\r\n\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  getTemplateById(id: string): Observable<Template> {\r\n      return this.http.get<Template>(this.templateUrl + id);\r\n  }\r\n\r\n  // TEMPLATE API\r\n\r\n  addTemplate(template: M.Template): Observable<{ message: string; templateId: string }> {\r\n    return this.http.post<{ message: string; templateId: string }>(\r\n      this.templateUrl,\r\n      template\r\n    );\r\n  }\r\n\r\n  addTemplateFromJSON(jsonData: FormData): Observable<{message: string; templateId: string }> {\r\n    return this.http.post<{message: string, templateId: string }>(\r\n      this.templateUrl + \"json/\",\r\n      jsonData\r\n    );\r\n  }\r\n\r\n  /*\r\naddTemplateFromExcel(postData: FormData) {\r\n  this.http\r\n    .post<{ message: string; templateId: string }>(\r\n      this.activeUrl + \"excel\",\r\n      postData\r\n    )\r\n    .subscribe((res) => {\r\n      let str = \"\";\r\n      if (res.templateId === \"false\") {\r\n        str =\r\n          \"Fehler beim Hochladen der Excel Datei. Die Tabelle wurde nicht korrekt befüllt. \\n Folgender Fehler ist aufgetreten: \\n\\n\";\r\n      }\r\n      window.alert(str + res.message);\r\n    });\r\n}*/\r\n\r\n  deleteTemplate(id: string): Observable<Object> {\r\n    return this.http.delete(this.templateUrl + id);\r\n  }\r\n\r\n  updateTemplate(template: M.Template) {\r\n    return this.http\r\n      .put(this.templateUrl + template._id, {\r\n        parts: template.parts,\r\n        name: template.name,\r\n      });\r\n  }\r\n\r\n  getTemplateList(): Observable<Template[]> {\r\n    return this.http.get<Template[]>(this.templateUrl);\r\n  }\r\n\r\n  // MATERIAL API\r\n\r\n  addMaterial(formData: FormData): Observable<{ success: boolean; message: string }> {\r\n    return this.http.post<{ success: boolean; message: string }>(\r\n      this.materialUrl,\r\n      formData\r\n    );\r\n  }\r\n\r\n  getMaterialById(id: string): Observable<Material> {\r\n    return this.http.get<Material>(this.materialUrl + id);\r\n  }\r\n\r\n  deleteMaterial(objectID: string, scanID: string): Observable<{ message: string }> {\r\n    return this.http.post<{message: string}>(this.materialUrl + \"delete/\",\r\n      {objectID, scanID});\r\n  }\r\n\r\n  getMaterials(): Observable<Material[]> {\r\n    return this.http.get<Material[]>(\r\n      this.materialUrl + \"sample/\"\r\n    );\r\n  }\r\n\r\n  queryMaterials(query: Record<string, unknown>): Observable<Material[]> {\r\n    return this.http.post<Material[]>(\r\n      this.materialUrl + \"query/\",\r\n      query\r\n    );\r\n  }\r\n\r\n  updateMaterial(material: Material) {\r\n    return this.http.put<{message: string}>(this.materialUrl + material._id, {\r\n      template: material.template,\r\n      coordinates: material.coordinates,\r\n      judged: true\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\n","import { Injectable } from \"@angular/core\";\r\nimport * as O from \"../../helpers/old_model\";\r\nimport * as G from \"../../models/generator\";\r\nimport * as M from \"../../models/templateModel\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\n\r\nexport class DataParserService {\r\n\r\n  constructor() {}\r\n\r\n  convertModel(parts: O.TopLevel[], parseOptional: boolean): M.TopLevel[] {\r\n    const newParts: M.TopLevel[] = [];\r\n    for (const part of parts) {\r\n      if (part.kind === \"block\") {\r\n        newParts.push(M.convertBlock(part));\r\n      } else if (part.kind === \"enumeration\") {\r\n        newParts.push(M.convertEnum(part));\r\n      } else if (part.kind === \"category\") {\r\n        let newPart = M.convertCategory(part);\r\n        if (parseOptional) {\r\n          newPart = this.parseOptionalCategory(newPart);\r\n        }\r\n        newParts.push(newPart);\r\n      }\r\n    }\r\n    return newParts;\r\n  }\r\n\r\n  extractCategories(parts: M.TopLevel[], parseOptional: boolean): M.Category[] {\r\n    const res: M.Category[] = [];\r\n    for (const el of parts) {\r\n      if (el.kind === \"category\") {\r\n        if (parseOptional) {\r\n          const parsedCat = this.parseOptionalCategory(el);\r\n          res.push(parsedCat);\r\n        } else {\r\n          res.push(el);\r\n        }\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  parseOptionalCategory(cat: M.Category): M.Category {\r\n    const parsedName = this.parseCategoryTitle(cat.name);\r\n    return {\r\n      kind: cat.kind,\r\n      name: parsedName[0],\r\n      optional: parsedName[1],\r\n      selectables: cat.selectables\r\n    };\r\n  }\r\n\r\n  parseCategoryTitle(catName: string): [string, boolean] {\r\n    if (catName.includes(\"<\", 0)) {\r\n      return [catName.substring(1, catName.length), true];\r\n    } else {\r\n      return [catName, false];\r\n    }\r\n  }\r\n\r\n  // Takes list of categories to transform them into list of rows without groups, only singular buttons\r\n  extractRows(categories: M.Category[], maxRowLength: number): M.Category[] {\r\n    let rows: M.Category[] = [];\r\n\r\n    for (const category of categories) {\r\n      const splits = this.getSplits(category, maxRowLength);\r\n      const split_cats = this.splitCategory(category, splits);\r\n      rows = rows.concat(split_cats);\r\n    }\r\n\r\n    return rows;\r\n  }\r\n\r\n  splitCategory(category: M.Category, splits: number[]) {\r\n    // let n_categories = Math.ceil(category.selectables.length / splitLength);\r\n    const res: M.Category[] = [];\r\n\r\n    let pos = 0;\r\n    for (const split of splits) {\r\n      let name: string;\r\n      if (pos === 0) {\r\n        name = category.name;\r\n      } else {\r\n        name = \"\";\r\n      }\r\n      let temp_sels: M.Selectable[] = [];\r\n      temp_sels = category.selectables.slice(pos, pos + split);\r\n      res.push({\r\n        kind: \"category\",\r\n        name: name,\r\n        optional: category.optional,\r\n        selectables: temp_sels\r\n      });\r\n      pos += split;\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  getSplits(category: M.Category, maxRowLength: number): number[] {\r\n    // Variation of getRowLengths: returns the number of selectables per row instead of number of options\r\n    const rowSplits = [];\r\n    let currentSplit = 0;\r\n    let rowCounter = 0;\r\n    for (const sel of category.selectables) {\r\n      if (rowCounter >= maxRowLength) {\r\n        rowSplits.push(currentSplit);\r\n        currentSplit = 0;\r\n        rowCounter = 0;\r\n      }\r\n\r\n      if (sel.kind === \"box\") {\r\n        rowCounter += 1;\r\n        currentSplit += 1;\r\n      } else if (sel.kind === \"group\") {\r\n        if (rowCounter + sel.options.length > maxRowLength) {\r\n          rowSplits.push(currentSplit);\r\n          rowCounter = sel.options.length;\r\n          currentSplit = 1;\r\n        } else {\r\n          rowCounter += sel.options.length;\r\n          currentSplit += 1;\r\n        }\r\n      }\r\n\r\n      if (category.selectables.indexOf(sel) === (category.selectables.length - 1) && currentSplit !== 0) {\r\n        rowSplits.push(currentSplit);\r\n      }\r\n    }\r\n    return rowSplits;\r\n  }\r\n\r\n  // extracts group identifiers and corresponding values for ngModel application\r\n  extractGroups(categories: M.Category[]): Map<string, string> {\r\n    const groupValues: Map<string, string> = new Map();\r\n    for (const category of categories) {\r\n      for (const sel of category.selectables) {\r\n        if (sel.kind === \"group\") {\r\n          console.log(sel.name, sel.value);\r\n          groupValues.set(sel.name, sel.value);\r\n        }\r\n      }\r\n    }\r\n    return groupValues;\r\n  }\r\n\r\n  makeText(parts: M.TopLevel[]) {\r\n    const [suppressedNormal, suppressedJudgement] = G.getSuppressedConditionalIds(parts);\r\n    const normalExtractor: M.TextExtractor = G.normalExtractor();\r\n    const judgementExtractor: M.TextExtractor = G.judgementExtractor();\r\n\r\n    const report = G.makeText(parts, normalExtractor, suppressedNormal);\r\n    const judgement = G.makeText(parts, judgementExtractor, suppressedJudgement);\r\n\r\n    return [report, judgement];\r\n  }\r\n\r\n  makeNormal(parts: M.TopLevel[]) {\r\n    for (const p of parts) {\r\n      if (p.kind === \"category\") {\r\n        G.makeNormalCategory(p);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport {Router} from \"@angular/router\";\r\n\r\nconst NAVBAR_HEADER_TOGGLE_1 = \"main\";\r\nconst NAVBAR_HEADER_TOGGLE_2 = \"login\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class DisplayService {\r\n\r\n  // TODO: Do something with layouts so all possible layouts are contained in a list, perhaps dropdown menu\r\n\r\n  public displayHeader: boolean;\r\n\r\n  constructor(private router: Router) {\r\n    this.displayHeader = true;\r\n  }\r\n\r\n  public updateDisplay() {\r\n    this.displayHeader = !(this.router.url.includes(NAVBAR_HEADER_TOGGLE_1) ||\r\n      this.router.url.includes(NAVBAR_HEADER_TOGGLE_2));\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class FilesSortingService {\r\n\r\n  identifier: RegExp;\r\n\r\n  constructor() {\r\n    this.identifier = new RegExp(\"thisShouldNotMatchAnything\");\r\n  }\r\n\r\n  setIdentifier(id: string) {\r\n    // TODO: Currently only string + n integers possible, make more options available\r\n    const nIntegers = (id.split(\"*\").length - 1);\r\n    const preString = id.split(\"*\").join(\"\");\r\n    this.identifier = new RegExp(\"^\" + preString + \"\\\\d{\" + nIntegers + \"}\" + \"\\\\D\");\r\n  }\r\n\r\n  // searches for the identifier in filenames and returns boolean value based on if a match is found or not\r\n  identifierSearch(files: File[]): boolean[]  {\r\n    return files.map((file: File) => this.identifier.test(file.name));\r\n  }\r\n\r\n  fileMatchSearch(baseFiles: File[], checkFiles: File[]): boolean[] {\r\n    return checkFiles.map((file: File) => baseFiles.some((baseFile: File) => {\r\n      const match = baseFile.name.match(this.identifier);\r\n      if (match !== undefined) {\r\n        const id = match[0];\r\n        return file.name.includes(id);\r\n      } else {\r\n        return false;\r\n      }\r\n    }));\r\n  }\r\n\r\n  getFileTuples(baseFiles: File[], checkFiles1?: File[], checkFiles2?: File[]): [File, File, File][] {\r\n    if (checkFiles1 === undefined) {\r\n      checkFiles1 = [];\r\n    }\r\n    if (checkFiles2 === undefined) {\r\n      checkFiles2 = [];\r\n    }\r\n    const result: [File, File, File][] = [];\r\n\r\n    for (const baseFile of baseFiles) {\r\n      const match = baseFile.name.match(this.identifier);\r\n      if (match !== undefined) {\r\n        const id = match[0];\r\n        const checkFile1 = checkFiles1.find(file => file.name.includes(id));\r\n        const checkFile2 = checkFiles2.find(file => file.name.includes(id));\r\n        result.push([baseFile, checkFile1, checkFile2]);\r\n        // TODO: Maybe add removal of already pushed files\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { levenshtein } from \"../../helpers/util\";\r\nimport { getAllIndexOf } from \"../../helpers/util\";\r\n\r\nimport * as M from \"../../models/templateModel\";\r\nimport {KeyVariable, KeySelectable} from \"../../models/keyword\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class InputParserService {\r\n\r\n  selectableKeywords: KeySelectable[] = [];\r\n  variableKeywords: KeyVariable[] = [];\r\n  varKeyDictionary: Map<string, KeyVariable[]>;\r\n\r\n  lastKeyword: KeySelectable;  // input buffer for last spoken keyword\r\n\r\n  foundKeywords: KeySelectable[] = [];\r\n  foundVariables: Map<string, KeyVariable[]> = new Map<string, KeyVariable[]>();\r\n\r\n  primaryDictionary: Set<string>;\r\n\r\n  constructor() {}\r\n\r\n  init(rootEl: M.TopLevel[]): void {\r\n    this.varKeyDictionary = new Map<string, KeyVariable[]>();\r\n    this.initializeKeywords(rootEl);\r\n    this.initializeDictionary();\r\n  }\r\n\r\n  autocorrect(inputString: string): string {\r\n    const possibleWords: string[] = Array.from(this.primaryDictionary);\r\n    const inputSplit = inputString.split(\" \");\r\n    inputSplit.forEach((word, idx) => {\r\n      const distances: number[] = possibleWords.map((possibleWord) =>\r\n        levenshtein(word.toLowerCase(), possibleWord.toLocaleLowerCase()));\r\n      if (!distances.includes(0)) {\r\n        if (word.length >= 3 && word.length < 8) {\r\n          if (distances.includes(1)) {\r\n            const replacement = distances.indexOf(1);\r\n            inputSplit[idx] = possibleWords[replacement];\r\n          }\r\n        } else if (word.length >= 8) {\r\n          if (distances.includes(1)) {\r\n            const replacement = distances.indexOf(1);\r\n            inputSplit[idx] = possibleWords[replacement];\r\n          } else if (distances.includes(2)) {\r\n            const replacement = distances.indexOf(2);\r\n            inputSplit[idx] = possibleWords[replacement];\r\n          }\r\n        }\r\n      }\r\n    });\r\n    return inputSplit.join(\" \");\r\n  }\r\n\r\n  // Takes list of Selectables from a category and converts their variables into Keywords and adds them to the varKeyDict\r\n  extractVariableKeywords(selectables: M.Selectable[], category: string): void {\r\n    let varKeys: KeyVariable[];\r\n    let id: string;\r\n    for (const sel of selectables) {\r\n      if (sel.kind === \"box\") {\r\n        id = category + sel.name;\r\n        varKeys = this.getVariableKeywords(sel.variables, category, sel.name);\r\n        if (varKeys.length > 0) {\r\n          this.varKeyDictionary.set(id, varKeys);\r\n        }\r\n      } else if (sel.kind === \"group\") {\r\n        for (const option of sel.options) {\r\n          id = category + option.name;\r\n          varKeys = this.getVariableKeywords(option.variables, category, option.name);\r\n          if (varKeys.length > 0) {\r\n            this.varKeyDictionary.set(id, varKeys);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Takes list of variables and generates Keyword Variables list\r\n  getVariableKeywords(variables: M.Variable[], category: string, selectable: string): KeyVariable[] {\r\n    const varKeys: KeyVariable[] = [];\r\n    for (const variable of variables) {\r\n      if (variable.kind === \"oc\" || variable.kind === \"mc\") {\r\n        for (let i = 0; i < variable.values.length; i++) {\r\n          let name: string;\r\n          if (variable.kind === \"mc\") {\r\n            name = variable.values[i][0];\r\n          } else {\r\n            name = variable.values[i];\r\n          }\r\n          for (const key of variable.keys[i]) {\r\n            varKeys.push({\r\n              category,\r\n              selectable,\r\n              id: variable.id,\r\n              kind: variable.kind,\r\n              name,\r\n              synonym: key,\r\n              textBefore: variable.textBefore,\r\n              textAfter: variable.textAfter,\r\n              position: -1,\r\n              active: false\r\n              });\r\n          }\r\n        }\r\n      } else {\r\n        varKeys.push({\r\n          category,\r\n          selectable,\r\n          id: variable.id,\r\n          kind: variable.kind,\r\n          textBefore: variable.textBefore,\r\n          textAfter: variable.textAfter,\r\n          position: -1,\r\n          active: false\r\n        });\r\n      }\r\n    }\r\n\r\n    return varKeys;\r\n  }\r\n\r\n  // Finds all KeySelectables in an input string\r\n  findKeywords(input: string) {\r\n    let foundKeywordsTemp: KeySelectable[] = [];\r\n    for (const keyword of this.selectableKeywords) {\r\n      const positions: number[] = getAllIndexOf(keyword.synonym, input, false);\r\n      if (positions.length >= 1) {\r\n        for (const pos of positions) {\r\n          const keywordWithPos: KeySelectable = JSON.parse(JSON.stringify(keyword));\r\n          keywordWithPos.position = pos;\r\n          foundKeywordsTemp.push(keywordWithPos);\r\n        }\r\n      }\r\n    }\r\n    foundKeywordsTemp = this.filterOverlap(foundKeywordsTemp);\r\n    foundKeywordsTemp.sort(this.compareKeywords);\r\n    this.foundKeywords = foundKeywordsTemp;\r\n  }\r\n\r\n  findVariableKeywords(input: string, keySel: KeySelectable, relativePosition: number) {\r\n    const id: string = keySel.category + keySel.synonym;\r\n    const foundVariablesTemp: KeyVariable[] = [];\r\n    const possibleVariables = this.varKeyDictionary.get(id);\r\n    for (const varKey of possibleVariables) {\r\n      if (varKey.kind === \"oc\" || varKey.kind === \"mc\") {\r\n        const positions: number[] = getAllIndexOf(varKey.synonym, input, false);\r\n        if (positions.length >= 1) {\r\n          for (const pos of positions) {\r\n            const varKeyWithPos: KeyVariable = JSON.parse(JSON.stringify(varKey));\r\n            varKeyWithPos.position = pos + relativePosition;\r\n            foundVariablesTemp.push(varKeyWithPos);\r\n          }\r\n        }\r\n      } else if (varKey.kind === \"text\" || varKey.kind === \"number\") {\r\n        if (varKey.textAfter.length > 0) {\r\n          const posVar = input.indexOf(varKey.textBefore);\r\n          const posValueStart = posVar + varKey.textBefore.length;\r\n          const posValueEnd = input.indexOf(varKey.textAfter);\r\n          const value = input.substring(posValueStart, posValueEnd).trim();\r\n\r\n        }\r\n      } else if (varKey.kind === \"ratio\") {\r\n\r\n      } else if (varKey.kind === \"date\") {\r\n\r\n      }\r\n    }\r\n    foundVariablesTemp.sort(this.compareKeywords);\r\n    this.varKeyDictionary.set(id, foundVariablesTemp);\r\n  }\r\n\r\n  // Removes all synonyms/keywords that are substrings of another synonym/keyword\r\n  filterOverlap(foundKeywords: KeySelectable[]): KeySelectable[] {\r\n    // filters out keyword synonyms that are substrings of another keyword\r\n    const fKCopy = JSON.parse(JSON.stringify(foundKeywords));\r\n    let toRemove: KeySelectable[] = [];\r\n    for (const keyword of fKCopy) {\r\n      const overlap: KeySelectable[] = fKCopy.filter((kw) =>\r\n        keyword.synonym !== kw.synonym &&\r\n        keyword.position <= kw.position &&\r\n        kw.position < (keyword.position + keyword.synonym.length));\r\n      toRemove = toRemove.concat(overlap);\r\n    }\r\n    for (const removable of toRemove) {\r\n      fKCopy.splice(fKCopy.indexOf(removable), 1);\r\n    }\r\n    return fKCopy;\r\n  }\r\n\r\n  // sorts keywords based on their position in the input string\r\n  compareKeywords(arg1: KeySelectable | KeyVariable, arg2: KeySelectable | KeyVariable): number {\r\n    if (arg1.position > arg2.position) {\r\n      return 1;\r\n    } else if (arg1.position < arg2.position) {\r\n      return -1;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  splitInputFromKeywords(input: string): string[][] {\r\n    const result: string[] = [];\r\n    const resultWithoutKeywords: string[] = [];\r\n    let lastPosition = 0;\r\n    let tempString: string;\r\n    for (const keyword of this.foundKeywords) {\r\n      if (keyword.position > lastPosition) {\r\n        tempString = input.substring(lastPosition, keyword.position).trim();\r\n        if (tempString.length > 0) {\r\n          result.push(tempString);\r\n          resultWithoutKeywords.push(tempString);\r\n        }\r\n      }\r\n      tempString = input.substring(keyword.position, keyword.position + keyword.synonym.length).trim();\r\n      if (tempString.length > 0) {\r\n        result.push(tempString);\r\n      }\r\n      lastPosition = keyword.position + keyword.synonym.length;\r\n    }\r\n    return [result, resultWithoutKeywords];\r\n  }\r\n\r\n  private initializeKeywords(rootEl: M.TopLevel[]): void {\r\n    let selKeys: KeySelectable[] = [];\r\n    for (const el of rootEl) {\r\n      if (el.kind === \"category\") {\r\n        const tempSelectables: KeySelectable[] = this.getSelectableKeywords(el.selectables, el.name);\r\n        selKeys = selKeys.concat(tempSelectables);\r\n        this.extractVariableKeywords(el.selectables, el.name);\r\n      }\r\n    }\r\n    this.selectableKeywords = selKeys;\r\n  }\r\n\r\n  private initializeDictionary(): void {\r\n    this.primaryDictionary = new Set<string>();\r\n    this.primaryDictionary.add(\"Rest\");\r\n    this.primaryDictionary.add(\"normal\");\r\n    for (const selKey of this.selectableKeywords) {\r\n      const split: string[] = selKey.synonym.split(\" \");\r\n      split.forEach((word) => this.primaryDictionary.add(word));\r\n    }\r\n    for (const varKey of this.variableKeywords) {\r\n      if (varKey.synonym) {\r\n        const split: string[] = varKey.synonym.split(\" \");\r\n        split.forEach((word) => this.primaryDictionary.add(word));\r\n      }\r\n      if (varKey.textAfter) {\r\n        const split: string[] = varKey.textAfter.split(\" \");\r\n        split.forEach((word) => this.primaryDictionary.add(word));\r\n      }\r\n      if (varKey.textBefore) {\r\n        const split: string[] = varKey.textBefore.split(\" \");\r\n        split.forEach((word) => this.primaryDictionary.add(word));\r\n      }\r\n    }\r\n  }\r\n\r\n  // Creates list of Keywords for Selectables from Selectables of category\r\n  private getSelectableKeywords(selectables: M.Selectable[], category: string): KeySelectable[] {\r\n    const selKeys: KeySelectable[] = [];\r\n    for (const sel of selectables) {\r\n      if (sel.kind === \"box\") {\r\n        for (const synonym of sel.keys) {\r\n          selKeys.push({\r\n            name: sel.name,\r\n            synonym,\r\n            category,\r\n            position: -1,\r\n            active: false\r\n          });\r\n        }\r\n      } else if (sel.kind === \"group\") {\r\n        for (const option of sel.options) {\r\n          for (const synonym of option.keys) {\r\n            selKeys.push({\r\n              name: option.name,\r\n              synonym,\r\n              category,\r\n              group: sel.name,\r\n              position: -1,\r\n              active: false\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return selKeys;\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport {MatDialogConfig} from \"@angular/material/dialog\";\r\nimport {ConfirmDialogModel} from \"../../shared/confirm-dialog/confirm-dialog.component\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class MatDialogService {\r\n\r\n  constructor() { }\r\n\r\n  defaultConfig(width?: string, data?: ConfirmDialogModel): MatDialogConfig {\r\n    const dialogConfig = new MatDialogConfig();\r\n\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.autoFocus = true;\r\n    dialogConfig.hasBackdrop = true;\r\n\r\n    if(width !== undefined) {\r\n      dialogConfig.width = width;\r\n    }\r\n\r\n    if(data !== undefined) {\r\n      dialogConfig.data = data;\r\n    }\r\n\r\n    return dialogConfig;\r\n  }\r\n}\r\n","import { ComponentPortal, DomPortalOutlet, PortalInjector } from \"@angular/cdk/portal\";\r\nimport { ApplicationRef, ComponentFactoryResolver, ComponentRef, Injectable, Injector } from \"@angular/core\";\r\n\r\nimport {POPOUT_MODAL_DATA, POPOUT_MODALS} from \"./popout.tokens\";\r\nimport { ImageDisplayComponent } from \"@app/shared\";\r\n\r\n\r\n@Injectable()\r\nexport class PopoutService {\r\n  styleSheetElement;\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private applicationRef: ApplicationRef\r\n  ) {\r\n  }\r\n\r\n  openPopoutModal(data) {\r\n    const windowInstance = this.openOnce(\r\n      \"assets/modal/popout.html\",\r\n      \"MODAL_POPOUT\"\r\n    );\r\n\r\n    // Wait for window instance to be created\r\n    setTimeout(() => {\r\n      this.createCDKPortal(data, windowInstance);\r\n    }, 1000);\r\n  }\r\n\r\n  openOnce(url, target) {\r\n    // Open a blank \"target\" window\r\n    // or get the reference to the existing \"target\" window\r\n    const winRef = window.open(\"\", target, \"\", true);\r\n    // If the \"target\" window was just opened, change its url\r\n    if (winRef.location.href === \"about:blank\") {\r\n      winRef.location.href = url;\r\n    }\r\n    return winRef;\r\n  }\r\n\r\n  createCDKPortal(data, windowInstance) {\r\n    if (windowInstance) {\r\n      // Create a PortalOutlet with the body of the new window document\r\n      const outlet = new DomPortalOutlet(windowInstance.document.body,\r\n        this.componentFactoryResolver, this.applicationRef, this.injector);\r\n\r\n      // Copy stylesheet link from parent window\r\n      this.styleSheetElement = this.getStyleSheetElement();\r\n      windowInstance.document.head.appendChild(this.styleSheetElement);\r\n\r\n      this.styleSheetElement.onload = () => {\r\n        // Clear popout modal content\r\n        windowInstance.document.body.innerText = \"\";\r\n        // Create an injector with modal data\r\n        const injector = this.createInjector(data);\r\n        // Attach the portal\r\n        windowInstance.document.title = \"Image Display\";\r\n        const componentInstance = this.attachContainer(outlet, injector);\r\n\r\n        POPOUT_MODALS[\"windowInstance\"] = windowInstance;\r\n        POPOUT_MODALS[\"outlet\"] = outlet;\r\n        POPOUT_MODALS[\"componentInstance\"] = componentInstance;\r\n      };\r\n    }\r\n  }\r\n\r\n  isPopoutWindowOpen() {\r\n    return POPOUT_MODALS[\"windowInstance\"] && !POPOUT_MODALS[\"windowInstance\"].closed;\r\n  }\r\n\r\n  focusPopoutWindow() {\r\n    POPOUT_MODALS[\"windowInstance\"].focus();\r\n  }\r\n\r\n  closePopoutModal() {\r\n    if (POPOUT_MODALS[\"windowInstance\"]) {\r\n      POPOUT_MODALS[\"windowInstance\"].close();\r\n    }\r\n  }\r\n\r\n  attachContainer(outlet, injector) {\r\n    const containerPortal = new ComponentPortal(ImageDisplayComponent, null, injector);\r\n    const containerRef: ComponentRef<ImageDisplayComponent> = outlet.attach(containerPortal);\r\n    return containerRef.instance;\r\n  }\r\n\r\n  createInjector(data): PortalInjector {\r\n    const injectionTokens = new WeakMap();\r\n    injectionTokens.set(POPOUT_MODAL_DATA, data);\r\n    return new PortalInjector(this.injector, injectionTokens);\r\n  }\r\n\r\n  getStyleSheetElement() {\r\n    const styleSheetElement = document.createElement(\"link\");\r\n    document.querySelectorAll(\"link\").forEach(htmlElement => {\r\n      if (htmlElement.rel === \"stylesheet\") {\r\n        const absoluteUrl = new URL(htmlElement.href).href;\r\n        styleSheetElement.rel = \"stylesheet\";\r\n        styleSheetElement.href = absoluteUrl;\r\n      }\r\n    });\r\n    return styleSheetElement;\r\n  }\r\n}\r\n","import { InjectionToken } from \"@angular/core\";\r\nimport {BoundingBox, Image} from \"@app/models\";\r\n\r\nexport interface PopoutData {\r\n  scans: {\r\n    id: string;\r\n    mainScan: Image;\r\n    lateralScan?: Image;\r\n    preScan?: Image;\r\n  };\r\n  coordinates: {\r\n    main: BoundingBox[];\r\n    lateral: BoundingBox[];\r\n    pre: BoundingBox[];\r\n  };\r\n  restricted?: boolean;\r\n}\r\n\r\nexport const POPOUT_MODAL_DATA = new InjectionToken<PopoutData>(\"POPOUT_MODAL_DATA\");\r\n\r\nexport const POPOUT_MODALS = {\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\n\r\nimport { environment } from \"../../../environments/environment\";\r\nimport { User } from \"../../models/user\";\r\n\r\n@Injectable({ providedIn: \"root\" })\r\nexport class UserService {\r\n  constructor(private http: HttpClient) { }\r\n\r\n  getAll() {\r\n    return this.http.get<User[]>(`${environment.backend}/users`);\r\n  }\r\n\r\n  getById(id: number) {\r\n    return this.http.get<User>(`${environment.backend}/users/${id}`);\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-account-management',\r\n  templateUrl: './account-management.component.html',\r\n  styleUrls: ['./account-management.component.css']\r\n})\r\nexport class AccountManagementComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>account-management works!</p>\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\n\r\nimport { SharedModule } from \"@app/shared/shared.module\";\r\n\r\nimport { JudgeMatComponent } from \"@app/feature/judge-mat/judge-mat.component\";\r\nimport { ListComponent } from \"@app/feature/list/list.component\";\r\nimport { ListMaterialComponent } from \"@app/feature/list-material/list-material.component\";\r\nimport { UiBaseComponent } from \"@app/feature/ui-base/ui-base.component\";\r\nimport { AccountManagementComponent } from \"./account-management/account-management.component\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    JudgeMatComponent,\r\n    ListComponent,\r\n    ListMaterialComponent,\r\n    UiBaseComponent,\r\n    AccountManagementComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    NgbModule,\r\n    FormsModule,\r\n    SharedModule\r\n  ],\r\n  exports: [\r\n    JudgeMatComponent,\r\n    ListComponent,\r\n    ListMaterialComponent,\r\n    UiBaseComponent,\r\n    AccountManagementComponent\r\n  ]\r\n})\r\nexport class FeatureModule { }\r\n","<div class=\"main\">\r\n  <div class=\"header\">\r\n    <div class=\"buttons\">\r\n      <button id=\"back\" title=\"Go back to list\"\r\n              [routerLink]=\"['/', 'listMat']\"\r\n              class=\"btn btn-outline-secondary\">Zurück</button>\r\n      <button id=\"open-images\"\r\n              (click)=\"openImagePopout()\"\r\n              class=\"btn btn-outline-secondary\">Bilder anzeigen</button>\r\n      <button id=\"normal-button\"\r\n              (click)=\"makeNormal()\"\r\n              class=\"btn btn-outline-secondary\">Rest normal</button>\r\n      <button id=\"submit\" title=\"Änderungen speichern\"\r\n              (click)=\"submit()\"\r\n              class=\"btn btn-outline-primary\">Speichern</button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"content\" *ngIf=\"categories\">\r\n    <app-report class=\"report\" [report]=\"report\" [judgement]=\"judgement\"></app-report>\r\n    <app-options class=\"options\" (clickEvent)=\"onClick()\" [categories]=\"categories\"></app-options>\r\n  </div>\r\n</div>\r\n","import {Component, HostListener, OnDestroy, OnInit} from \"@angular/core\";\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\n\r\nimport * as M from \"@app/models/templateModel\";\r\nimport {Material, Role, User} from \"@app/models\";\r\nimport {\r\n  DataParserService,\r\n  PopoutService,\r\n  POPOUT_MODALS,\r\n  PopoutData,\r\n  BackendCallerService,\r\n  AuthenticationService\r\n} from \"@app/core\";\r\n\r\n@Component({\r\n  selector: \"app-judge-mat\",\r\n  templateUrl: \"./judge-mat.component.html\",\r\n  styleUrls: [\"./judge-mat.component.scss\"]\r\n})\r\nexport class JudgeMatComponent implements OnInit, OnDestroy {\r\n\r\n  material: Material;\r\n  categories: M.Category[];\r\n  report = \"\";\r\n  judgement = \"\";\r\n\r\n  private user: User;\r\n\r\n  constructor(private backendCaller: BackendCallerService,\r\n              private route: ActivatedRoute,\r\n              private router: Router,\r\n              private dataParser: DataParserService,\r\n              private popoutService: PopoutService,\r\n              private authenticationService: AuthenticationService) { }\r\n\r\n  @HostListener(\"window:beforeunload\", [\"$event\"])\r\n  onWindowClose(event: Event) {\r\n    this.popoutService.closePopoutModal();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n    this.getData();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.popoutService.closePopoutModal();\r\n  }\r\n\r\n  getData() {\r\n    this.route.paramMap.subscribe(ps => {\r\n      if (ps.has(\"id\")) {\r\n        const matID = ps.get(\"id\");\r\n        this.backendCaller.getMaterialById(matID).subscribe((material: Material) => {\r\n          if (material === undefined) {\r\n            window.alert(\"Der Eintrag mit dieser ID existiert nicht! \" +\r\n              \"Bitte zur Aufnahmenliste zurückkehren und eines der dort aufgeführten Aufnahmen auswählen.\");\r\n          } else {\r\n            this.material = material;\r\n            this.categories = this.dataParser.extractCategories(this.material.template.parts, false);\r\n            this.openImagePopout();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  updateText(): void {\r\n    [this.report, this.judgement] = this.dataParser.makeText(this.material.template.parts);\r\n  }\r\n\r\n  resetText(): void {\r\n    this.report = \"\";\r\n    this.judgement = \"\";\r\n  }\r\n\r\n  onClick() {\r\n    setTimeout(() => this.updateText(), 1);\r\n  }\r\n\r\n  makeNormal() {\r\n    this.dataParser.makeNormal(this.material.template.parts);\r\n    this.updateText();\r\n    console.log(POPOUT_MODALS[\"componentInstance\"]);\r\n  }\r\n\r\n  submit() {\r\n    this.backendCaller.updateMaterial(this.material).subscribe(res => {\r\n      window.alert(res.message);\r\n      this.router.navigateByUrl(\"/listMat\");\r\n    });\r\n  }\r\n\r\n  openImagePopout() {\r\n    const restricted = !(this.user.role === Role.Admin || this.user.role === Role.Moderator);\r\n    const modalData: PopoutData = {\r\n      scans: this.material.scans,\r\n      coordinates: this.material.coordinates,\r\n      restricted\r\n    };\r\n    this.popoutService.openPopoutModal(modalData);\r\n  }\r\n\r\n}\r\n","<div class=\"main\">\r\n\r\n  <h4>Aufnahme zum Befunden auswählen</h4>\r\n\r\n  <div class=\"row\">\r\n    <div ngbDropdown class=\"d-inline-block\">\r\n      <button class=\"btn btn-outline-primary\" style=\"margin-right: 10px;\" id=\"dropdownBasic1\" ngbDropdownToggle>Bereits bearbeitete Einträge anzeigen</button>\r\n      <div ngbDropdownMenu aria-labelledby=\"dropdownBasic1\">\r\n        <button ngbDropdownItem (click)=\"changeQuery(true)\">Ja</button>\r\n        <button ngbDropdownItem (click)=\"changeQuery(false)\">Nein</button>\r\n      </div>\r\n      <button class=\"btn btn-outline-secondary\" (click)=\"reload()\" id=\"reloadButton\">Aufnahmen neu Laden</button>\r\n      <button class=\"btn btn-outline-primary\" style=\"float: right;\"\r\n              id=\"uploadButton\" (click)=\"openUploadDialog()\">Aufnahmen hochladen</button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"tableDiv\" *ngIf=\"this.materials.length > 0; else noEntry\">\r\n    <table class=\"listMatTable\">\r\n      <tr>\r\n        <th class=\"body\">Frontalaufnahme</th>\r\n        <th class=\"body\">Lateralaufnahme</th>\r\n        <th class=\"body\">Voraufnahme</th>\r\n        <th class=\"meta\">Metadaten</th>\r\n      </tr>\r\n      <tr *ngFor=\"let material of this.materials\">\r\n        <td class=\"img\">\r\n          <img src=\"{{imageUrl}}{{material.scans.id}}/{{material.scans.mainScan.filename}}\"\r\n                             width=\"300px\"\r\n                             alt=\"Fehler beim Laden der Aufnahme\"\r\n          (click)=\"openEditor(material._id)\"/>\r\n          <span>{{material.scans.mainScan.filename}}</span>\r\n        </td>\r\n        <td class=\"img\">\r\n          <ng-container *ngIf=\"material.scans.lateralScan !== undefined; else noScan\">\r\n            <img src=\"{{imageUrl}}{{material.scans.id}}/{{material.scans.lateralScan.filename}}\"\r\n                               width=\"300px\"\r\n                               alt=\"Fehler beim Laden der Aufnahme\"\r\n                               (click)=\"openEditor(material._id)\"/>\r\n            <span>{{material.scans.lateralScan.filename}}</span>\r\n          </ng-container>\r\n        </td>\r\n        <td class=\"img\">\r\n          <ng-container *ngIf=\"material.scans.preScan !== undefined; else noScan\">\r\n\r\n            <img src=\"{{imageUrl}}{{material.scans.id}}/{{material.scans.preScan.filename}}\"\r\n                               width=\"300px\"\r\n                               alt=\"Fehler beim Laden der Aufnahme\"\r\n                               (click)=\"openEditor(material._id)\"/>\r\n            <span>{{material.scans.preScan.filename}}</span>\r\n          </ng-container>\r\n        </td>\r\n        <td class=\"meta\">\r\n          <table class=\"metatable\">\r\n            <tr>\r\n              <td class=\"metadata\">Modalität:</td>\r\n              <td class=\"metadata\">{{material.modality}}</td>\r\n            </tr>\r\n            <tr>\r\n              <td class=\"metadata\">Template:</td>\r\n              <td class=\"metadata\">{{material.template.name}}</td>\r\n            </tr>\r\n            <tr>\r\n              <td class=\"metadata\">Boxen vorhanden in:</td>\r\n              <td class=\"metadata\">{{checkBoxes(material.coordinates)}}</td>\r\n            </tr>\r\n          </table>\r\n              <button class=\"btn btn-outline-primary custom-button\"\r\n                        (click)=\"openEditor(material._id)\">Start Befundung</button>\r\n          <button class=\"btn btn-danger custom-button\" (click)=\"delete(material._id, material.scans.id)\">Entfernen</button>\r\n        </td>\r\n      </tr>\r\n\r\n    </table>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #noEntry>\r\n  <div style=\"padding: 10px;\">\r\n    Keine Einträge gefunden.\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #noScan><td class=\"text\">Keine Aufnahme vorhanden</td></ng-template>\r\n\r\n\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport {Router} from \"@angular/router\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\n\r\nimport {environment} from \"@env/environment\";\r\nimport {BoundingBox, Material} from \"@app/models\";\r\nimport {BackendCallerService, MatDialogService} from \"@app/core\";\r\nimport {UploadMaterialComponent, ConfirmDialogComponent, ConfirmDialogModel} from \"@app/shared\";\r\n\r\n@Component({\r\n  selector: \"app-display-material\",\r\n  templateUrl: \"./list-material.component.html\",\r\n  styleUrls: [\"./list-material.component.scss\"]\r\n})\r\nexport class ListMaterialComponent implements OnInit {\r\n\r\n  imageUrl = environment.backend + \"images/\";\r\n  materials: Material[] = [];\r\n  query: Record<string, unknown>;\r\n\r\n  constructor(private backendCaller: BackendCallerService,\r\n              private router: Router,\r\n              private dialogService: MatDialogService,\r\n              private dialog: MatDialog) { }\r\n\r\n  ngOnInit(): void {\r\n    this.query = {\r\n      judged: false\r\n    };\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    this.backendCaller.queryMaterials(this.query).subscribe((mats: Material[]) => {\r\n      this.materials = mats;\r\n    });\r\n  }\r\n\r\n  reload() {\r\n    this.getData();\r\n  }\r\n\r\n  changeQuery(newValue: boolean) {\r\n    this.query = {\r\n      judged: newValue\r\n    };\r\n    this.getData();\r\n  }\r\n\r\n  checkBoxes(coordinates: Record<string, BoundingBox[]>): string {\r\n    const res: string[] = [];\r\n    if (coordinates.main.length > 0) {\r\n      res.push(\"Hauptaufnahme\");\r\n    }\r\n    if (coordinates.lateral.length > 0) {\r\n      res.push(\"Lateralaufnahme\");\r\n    }\r\n    if (coordinates.pre.length > 0) {\r\n      res.push(\"Voraufnahme\");\r\n    }\r\n\r\n    if (res.length > 0) {\r\n      return res.join(\", \");\r\n    } else {\r\n      return \"Keiner Aufnahme\";\r\n    }\r\n\r\n  }\r\n\r\n  delete(objectID: string, scanID: string) {\r\n    const dialogData = new ConfirmDialogModel(\r\n      \"warning\",\r\n      \"Entfernen bestätigen\",\r\n      \"Möchten Sie diesen Eintrag wirklich entfernen?\");\r\n\r\n    const dialogConfig = this.dialogService.defaultConfig(\"400px\", dialogData);\r\n    dialogConfig.position = { top: \"50px\" };\r\n\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(dialogResult => {\r\n      if (dialogResult) {\r\n        this.backendCaller.deleteMaterial(objectID, scanID).subscribe(res => {\r\n          window.alert(\"Eintrag erfolgreich gelöscht.\");\r\n          this.getData();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  openEditor(matID: string) {\r\n    this.router.navigate([\"/\", \"mainMat\", matID]).then();\r\n  }\r\n\r\n  openUploadDialog() {\r\n    const dialogConfig = this.dialogService.defaultConfig(\"600px\");\r\n    const dialogRef = this.dialog.open(UploadMaterialComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(() => {\r\n      this.reload();\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"main\">\r\n\r\n  <div>\r\n    <h4>Schablone wählen</h4>\r\n    <table  class=\"liste\">\r\n      <tr *ngFor=\"let template of templates; let i = index\" class=\"list-row\">\r\n        <td class=\"text\"><ul><li><a style=\"text-decoration: none;\" [routerLink]=\"['/', 'main', template._id]\">{{template.name}}</a></li></ul></td>\r\n        <td class=\"text\">vom {{displayDate(template.timestamp)}}</td>\r\n        <td class=\"button\">\r\n          <button *ngIf=\"isMod\" class=\"btn btn-secondary ml-3 disabled\" [routerLink]=\"['/', 'edit', template.name]\">\r\n          Edit</button></td>\r\n        <td class=\"button\">\r\n          <button *ngIf=\"isMod\" class=\"btn btn-danger ml-3\" (click)=\"removeAlert(template._id, template.name)\">\r\n          Entfernen</button></td>\r\n      </tr>\r\n    </table>\r\n    <ng-container *ngIf=\"templates.length === 0\">\r\n      Es wurde noch nichts hochgeladen\r\n    </ng-container>\r\n  </div>\r\n\r\n  <div *ngIf=\"isMod\" class=\"buttons\">\r\n    <button class=\"btn btn-outline-primary\" (click)=\"openUploadDialog()\">Schablone hochladen</button>\r\n    <button class=\"btn btn-outline-primary disabled\">Neue Schablone erstellen</button>\r\n  </div>\r\n\r\n</div>\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { MatDialog } from \"@angular/material/dialog\";\r\nimport { ConfirmDialogComponent, ConfirmDialogModel } from \"@app/shared/confirm-dialog/confirm-dialog.component\";\r\n\r\nimport {BackendCallerService, MatDialogService, AuthenticationService} from \"@app/core\";\r\nimport {Template} from \"@app/models\";\r\nimport {UploadComponent} from \"@app/shared\";\r\nimport {Role, User} from \"@app/models\";\r\n\r\n\r\n@Component({\r\n  selector: \"app-list\",\r\n  templateUrl: \"./list.component.html\",\r\n  styleUrls: [\"./list.component.scss\"]\r\n})\r\nexport class ListComponent implements OnInit {\r\n\r\n  templates: Template[] = [];\r\n  isLoading: boolean;\r\n\r\n  private user: User;\r\n\r\n  constructor(private dialog: MatDialog,\r\n              private backendCaller: BackendCallerService,\r\n              private dialogService: MatDialogService,\r\n              private authenticationService: AuthenticationService\r\n  ) { }\r\n\r\n  get isMod() {\r\n    return this.user && (this.user.role === Role.Admin || this.user.role === Role.Moderator);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n    this.isLoading = true;\r\n    this.update();\r\n  }\r\n\r\n  update(): void {\r\n    this.backendCaller.getTemplateList().subscribe((templates) => {\r\n      this.templates = templates;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  removeAlert(id: string, name: string) {\r\n    const dialogData = new ConfirmDialogModel(\r\n      \"warning\",\r\n      \"Entfernen bestätigen\",\r\n      \"Möchten Sie die Schablone '\" + name + \"' wirklich entfernen?\");\r\n\r\n    const dialogConfig = this.dialogService.defaultConfig(\"400px\", dialogData);\r\n    dialogConfig.position = { top: \"50px\" };\r\n\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(dialogResult => {\r\n      if (dialogResult) {\r\n        this.remove(id);\r\n      }\r\n    });\r\n  }\r\n\r\n  remove(id: string): void {\r\n    this.backendCaller.deleteTemplate(id).subscribe(res => {\r\n      this.update();\r\n    });\r\n  }\r\n\r\n  displayDate(date: string | Date): string {\r\n    if (typeof(date) === \"string\") {\r\n      date = new Date(date);\r\n    }\r\n    return date.getDate() + \".\" + date.getMonth() + \".\" + date.getFullYear();\r\n  }\r\n\r\n  openUploadDialog() {\r\n    const dialogConfig = this.dialogService.defaultConfig(\"470px\");\r\n    const dialogRef = this.dialog.open(UploadComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(() => {\r\n      this.update();\r\n    });\r\n  }\r\n}\r\n","<div class=\"main\">\r\n  <div class=\"header\">\r\n    <div class=\"inputArea\">\r\n      <label class=\"inputLabel\" for=\"input\">Eingabe:</label>\r\n      <input class=\"inputBox\" id=\"input\" name=\"Befund\" type=\"text\" [(ngModel)]=\"this.input\"\r\n             (input)=\"onInput($event)\" placeholder=\"Befund eingeben...\">\r\n    </div>\r\n    <div class=\"buttons\">\r\n      <button id=\"normal-button\" (click)=\"makeNormal()\"\r\n              class=\"btn btn-outline-secondary\">Rest normal</button>\r\n      <button id=\"reset-button\" (click)=\"reset()\"\r\n              class=\"btn btn-outline-secondary\">Zurücksetzen</button>\r\n      <button id=\"back\" title=\"Go back to list\" [routerLink]=\"['/', 'list']\"\r\n              class=\"btn btn-outline-secondary\">Zurück</button>\r\n      <a class=\"btn btn-outline-secondary\" title=\"Download JSON\" (click)=generateDownloadJson(parts)\r\n         [href]=\"downJson\" download=\"befund.json\">Download JSON</a>\r\n    </div>\r\n\r\n    <div class=\"inputText\" id=\"inputText\" >\r\n      {{foundKeywords}}\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"content\" *ngIf=\"categories\">\r\n    <app-report class=\"report\" [report]=\"report\" [judgement]=\"judgement\"></app-report>\r\n    <app-options class=\"options\" (clickEvent)=\"onClick()\" [categories]=\"categories\"></app-options>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from \"@angular/core\";\r\nimport {ActivatedRoute} from \"@angular/router\";\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {Location} from \"@angular/common\";\r\nimport {DomSanitizer, SafeUrl} from \"@angular/platform-browser\";\r\n\r\nimport {DataParserService, BackendCallerService, InputParserService} from \"@app/core\";\r\nimport {OptionsComponent} from \"@app/shared\";\r\nimport {Template, Category, TopLevel} from \"@app/models\";\r\n\r\n@Component({\r\n  selector: \"app-workspace\",\r\n  templateUrl: \"./ui-base.component.html\",\r\n  styleUrls: [\"./ui-base.component.scss\"],\r\n})\r\n\r\nexport class UiBaseComponent implements OnInit {\r\n\r\n  @ViewChild(OptionsComponent)\r\n  private optionsComponent: OptionsComponent;\r\n\r\n  parts: TopLevel[];\r\n  defaultParts: TopLevel[];\r\n\r\n  input = \"\";\r\n  foundKeywords = \"\";\r\n\r\n  categories: Category[];\r\n  report = \"\";\r\n  judgement = \"\";\r\n\r\n  downJson: SafeUrl;\r\n\r\n  constructor(private http: HttpClient,\r\n              private route: ActivatedRoute,\r\n              private dataParser: DataParserService,\r\n              private _location: Location,\r\n              private inputParser: InputParserService,\r\n              private backendCaller: BackendCallerService,\r\n              private sanitizer: DomSanitizer) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getData();\r\n    this.foundKeywords = \"Detected keywords go here\";\r\n  }\r\n\r\n  getData() {\r\n    this.route.paramMap.subscribe(ps => {\r\n      if (ps.has(\"id\")) {\r\n        const templateID = ps.get(\"id\");\r\n        this.backendCaller.getTemplateById(templateID).subscribe((template: Template) => {\r\n          if (template === undefined) {\r\n            window.alert(\"Dieses Dictionary existiert nicht! \" +\r\n              \"Bitte auf List Seite zurückkehren und eines der dort aufgeführten Dictionaries auswählen.\");\r\n          } else {\r\n            this.parts = template.parts;\r\n            this.defaultParts = JSON.parse(JSON.stringify(this.parts));\r\n            this.categories = this.dataParser.extractCategories(this.parts, false);\r\n            this.inputParser.init(this.defaultParts);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  generateDownloadJson(jsonData) {\r\n    const json = JSON.stringify(jsonData);\r\n    this.downJson = this.sanitizer.bypassSecurityTrustUrl(\"data:text/json;charset=UTF-8,\" + encodeURIComponent(json));\r\n  }\r\n\r\n  updateText(): void {\r\n    [this.report, this.judgement] = this.dataParser.makeText(this.parts);\r\n  }\r\n\r\n  resetText(): void {\r\n    this.report = \"\";\r\n    this.judgement = \"\";\r\n  }\r\n\r\n  onClick() {\r\n    setTimeout(() => this.updateText(), 1);\r\n  }\r\n\r\n  onInput(ev) {\r\n    if (this.input[this.input.length - 1] === \" \") {\r\n      this.input = this.inputParser.autocorrect(this.input);\r\n    }\r\n    this.inputParser.findKeywords(this.input);\r\n    const [splitInput, splitReducedInput] = this.inputParser.splitInputFromKeywords(this.input);\r\n    console.log(splitInput);\r\n    console.log(splitReducedInput);\r\n  }\r\n\r\n  makeNormal() {\r\n    this.dataParser.makeNormal(this.parts);\r\n    this.updateText();\r\n  }\r\n\r\n  reset() {\r\n    this.parts = JSON.parse(JSON.stringify(this.defaultParts));\r\n    this.categories = this.dataParser.extractCategories(this.parts, false);\r\n    setTimeout(() => this.optionsComponent.initRows(), 5);\r\n    setTimeout(() => this.resetText(), 5);\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from \"@angular/router\";\r\n\r\nimport { AuthenticationService } from \"@app/core/services/authentication.service\";\r\n\r\n@Injectable({ providedIn: \"root\" })\r\nexport class AuthGuard implements CanActivate {\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private authenticationService: AuthenticationService\r\n  ) { }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n    const user = this.authenticationService.userValue;\r\n    if (user) {\r\n      // check if route is restricted by role\r\n      if (route.data.roles && route.data.roles.indexOf(user.role) === -1) {\r\n        // role not authorised so redirect to home page\r\n        this.router.navigate([\"/\"]).then();\r\n        return false;\r\n      }\r\n\r\n      // authorised so return true\r\n      return true;\r\n    }\r\n\r\n    // not logged in so redirect to login page with the return url\r\n    this.router.navigate([\"/login\"], { queryParams: { returnUrl: state.url } }).then();\r\n    return false;\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from \"@angular/common/http\";\r\nimport { Observable, throwError } from \"rxjs\";\r\nimport { catchError } from \"rxjs/operators\";\r\n\r\nimport { AuthenticationService } from \"@app/core/services/authentication.service\";\r\n\r\n@Injectable()\r\nexport class ErrorInterceptor implements HttpInterceptor {\r\n  constructor(private authenticationService: AuthenticationService) { }\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    return next.handle(request).pipe(catchError(err => {\r\n      if ([401, 403].indexOf(err.status) !== -1) {\r\n        // auto logout if 401 Unauthorized or 403 Forbidden response returned from api\r\n        this.authenticationService.logout();\r\n      }\r\n\r\n      const error = err.error.message || err.statusText;\r\n      return throwError(error);\r\n    }));\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpRequest, HttpResponse, HttpHandler, HttpEvent, HttpInterceptor, HTTP_INTERCEPTORS } from \"@angular/common/http\";\r\nimport { Observable, of, throwError } from \"rxjs\";\r\nimport { delay, materialize, dematerialize } from \"rxjs/operators\";\r\n\r\nimport { Role } from \"@app/models\";\r\n\r\nconst users = [\r\n  { id: 1, username: \"admin\", password: \"admin\", role: Role.Admin },\r\n  { id: 2, username: \"student\", password: \"student\", role: Role.User },\r\n  { id: 3, username: \"arzt\", password: \"arzt\", role: Role.Moderator },\r\n];\r\n\r\n@Injectable()\r\nexport class FakeBackendInterceptor implements HttpInterceptor {\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    const { url, method, headers, body } = request;\r\n\r\n    return handleRoute();\r\n\r\n    function handleRoute() {\r\n      switch (true) {\r\n        case url.endsWith(\"/users/authenticate\") && method === \"POST\":\r\n          return authenticate();\r\n        case url.endsWith(\"/users\") && method === \"GET\":\r\n          return getUsers();\r\n        case url.match(/\\/users\\/\\d+$/) && method === \"GET\":\r\n          return getUserById();\r\n        default:\r\n          // pass through any requests not handled above\r\n          return next.handle(request);\r\n      }\r\n\r\n    }\r\n\r\n    // route functions\r\n\r\n    function authenticate() {\r\n      const { username, password } = body;\r\n      const user = users.find(x => x.username === username && x.password === password);\r\n      if (!user) {\r\nreturn error(\"Username or password is incorrect\");\r\n}\r\n      return ok({\r\n        id: user.id,\r\n        username: user.username,\r\n        role: user.role,\r\n        token: `fake-jwt-token.${user.id}`\r\n      });\r\n    }\r\n\r\n    function getUsers() {\r\n      if (!isAdmin()) {\r\nreturn unauthorized();\r\n}\r\n      return ok(users);\r\n    }\r\n\r\n    function getUserById() {\r\n      if (!isLoggedIn()) {\r\nreturn unauthorized();\r\n}\r\n\r\n      // only admins can access other user records\r\n      if (!isAdmin() && currentUser().id !== idFromUrl()) {\r\nreturn unauthorized();\r\n}\r\n\r\n      const user = users.find(x => x.id === idFromUrl());\r\n      return ok(user);\r\n    }\r\n\r\n    // helper functions\r\n\r\n    function ok(body) {\r\n      return of(new HttpResponse({ status: 200, body }))\r\n        .pipe(delay(500)); // delay observable to simulate server api call\r\n    }\r\n\r\n    function unauthorized() {\r\n      return throwError({ status: 401, error: { message: \"unauthorized\" } })\r\n        .pipe(materialize(), delay(500), dematerialize()); // call materialize and dematerialize to ensure delay even if an error is thrown (https://github.com/Reactive-Extensions/RxJS/issues/648);\r\n    }\r\n\r\n    function error(message) {\r\n      return throwError({ status: 400, error: { message } })\r\n        .pipe(materialize(), delay(500), dematerialize());\r\n    }\r\n\r\n    function isLoggedIn() {\r\n      const authHeader = headers.get(\"Authorization\") || \"\";\r\n      return authHeader.startsWith(\"Bearer fake-jwt-token\");\r\n    }\r\n\r\n    function isAdmin() {\r\n      return isLoggedIn() && currentUser().role === Role.Admin;\r\n    }\r\n\r\n    function currentUser() {\r\n      if (!isLoggedIn()) {\r\nreturn;\r\n}\r\n      const id = parseInt(headers.get(\"Authorization\").split(\".\")[1]);\r\n      return users.find(x => x.id === id);\r\n    }\r\n\r\n    function idFromUrl() {\r\n      const urlParts = url.split(\"/\");\r\n      return parseInt(urlParts[urlParts.length - 1]);\r\n    }\r\n  }\r\n}\r\n\r\nexport const fakeBackendProvider = {\r\n  // use fake backend in place of Http service for backend-less development\r\n  provide: HTTP_INTERCEPTORS,\r\n  useClass: FakeBackendInterceptor,\r\n  multi: true\r\n};\r\n","import { NativeDateAdapter, MatDateFormats } from \"@angular/material/core\";\r\nimport {Injectable} from \"@angular/core\";\r\n\r\n@Injectable()\r\nexport class AppDateAdapter extends NativeDateAdapter {\r\n  format(date: Date, displayFormat: Object): string {\r\n    if (displayFormat === \"input\") {\r\n      let day: string = date.getDate().toString();\r\n      day = +day < 10 ? \"0\" + day : day;\r\n      let month: string = (date.getMonth() + 1).toString();\r\n      month = +month < 10 ? \"0\" + month : month;\r\n      const year = date.getFullYear();\r\n      return `${day}-${month}-${year}`;\r\n    }\r\n    return date.toDateString();\r\n  }\r\n}\r\n\r\nexport const APP_DATE_FORMATS: MatDateFormats = {\r\n  parse: {\r\n    dateInput: { month: \"short\", year: \"numeric\", day: \"numeric\" }\r\n  },\r\n  display: {\r\n    dateInput: \"input\",\r\n    monthYearLabel: { year: \"numeric\", month: \"numeric\" },\r\n    dateA11yLabel: { year: \"numeric\", month: \"long\", day: \"numeric\"\r\n    },\r\n    monthYearA11yLabel: { year: \"numeric\", month: \"long\" },\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from \"@angular/common/http\";\r\nimport { Observable } from \"rxjs\";\r\n\r\nimport { environment } from \"@env/environment\";\r\nimport { AuthenticationService } from \"@app/core/services/authentication.service\";\r\n\r\n@Injectable()\r\nexport class JwtInterceptor implements HttpInterceptor {\r\n  constructor(private authenticationService: AuthenticationService) { }\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    // add auth header with jwt if user is logged in and request is to api url\r\n    const user = this.authenticationService.userValue;\r\n    const isLoggedIn = user && user.accessToken;\r\n    const isApiUrl = request.url.startsWith(environment.backend);\r\n    if (isLoggedIn && isApiUrl) {\r\n      request = request.clone({\r\n        setHeaders: {\r\n          authorization: `Bearer ${user.accessToken}`\r\n        }\r\n      });\r\n    }\r\n\r\n    return next.handle(request);\r\n  }\r\n}\r\n","import { NgbDateStruct } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { assertNever, flatMap } from \"./util\";\r\n\r\nexport type Selectable = CheckBox | Group;\r\nexport type Clickable  = CheckBox | Option;\r\n\r\nexport interface Data {\r\n[name: string]: string[];\r\n}\r\n\r\nexport interface TextExtractor {\r\n  ofCheckbox(c: CheckBox): string | undefined;\r\n  ofOption(o: Option): string | undefined;\r\n  ofEnumeration(e: Enumeration): string | undefined;\r\n  ofBlock(e: Block): string | undefined;\r\n  ofConditional(c: Conditional): string | undefined;\r\n}\r\n\r\n// Selectable classes, lower than category\r\n\r\nexport interface CheckBox {\r\n  kind:           \"box\";\r\n  name:           string;\r\n  value:          boolean;\r\n  text:           string;\r\n  judgementText?: string;\r\n  conditionalId?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  enumeration?:   string;\r\n  data:           Data;\r\n}\r\n\r\nexport interface Group {\r\n  kind:    \"group\";\r\n  name:    string;\r\n  options: Option[];\r\n  value?:  string;\r\n  data:    Data;\r\n}\r\n\r\nexport interface Option {\r\n  kind:           \"option\";\r\n  name:           string;\r\n  text:           string;\r\n  conditionalId?: string;\r\n  judgementText?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  data:           Data;\r\n}\r\n\r\nexport type TopLevel = Category | Block | Enumeration | Conditional;\r\n\r\n// Main data management and display class\r\n\r\nexport interface Category {\r\n  kind: \"category\";\r\n  name: string;\r\n  optional?: boolean;\r\n  selectables: Selectable[];\r\n  data: Data;\r\n}\r\n\r\nexport interface Block {\r\n  kind: \"block\";\r\n  text?: string;\r\n  judgementText?: string;\r\n  data: Data;\r\n}\r\n\r\nexport interface Enumeration {\r\n  kind:           \"enumeration\";\r\n  text:           string;\r\n  judgementText?: string;\r\n  id:             string;\r\n  data:           Data;\r\n}\r\n\r\nexport interface Conditional {\r\n  kind:           \"conditional\";\r\n  precondition:   Literal[][];\r\n  normalText?:    string;\r\n  judgementText?: string;\r\n  data:           Data;\r\n}\r\n\r\nexport interface Literal {\r\n  id:      string;\r\n  negated: boolean;\r\n}\r\n\r\n// Variable types\r\n\r\nexport type Variable = VariableOC | VariableMC | VariableText | VariableNumber | VariableDate | VariableRatio;\r\n\r\nexport interface VariableCommon {\r\n  id:         string;\r\n  textBefore: string;\r\n  textAfter:  string;\r\n  data:       Data;\r\n}\r\n\r\nexport interface VariableOC extends VariableCommon {\r\n  kind:   \"oc\";\r\n  value?: string;\r\n  values: string[];\r\n}\r\n\r\nexport interface VariableMC extends VariableCommon {\r\n  kind:   \"mc\";\r\n  values: [string, boolean][];\r\n}\r\n\r\nexport interface VariableText extends VariableCommon {\r\n  kind:  \"text\";\r\n  value: string;\r\n}\r\n\r\nexport interface VariableNumber extends VariableCommon {\r\n  kind:  \"number\";\r\n  value: number;\r\n}\r\n\r\nexport interface VariableDate extends VariableCommon {\r\n  kind:  \"date\";\r\n  value: NgbDateStruct;\r\n}\r\n\r\nexport interface VariableRatio extends VariableCommon {\r\n  kind:           \"ratio\";\r\n  numerator:      number;\r\n  denominator:    number;\r\n  fractionDigits: number;\r\n}\r\n\r\nexport function resolve(varId: string, structure: TopLevel[]): Variable | undefined {\r\n  for (const tl of structure) {\r\n    switch (tl.kind) {\r\n      case \"block\": continue;\r\n      case \"enumeration\": continue;\r\n      case \"conditional\": continue;\r\n      case \"category\": {\r\n        const result = resolveCategory(varId, tl);\r\n        if (result) {\r\n          return result;\r\n        } else {\r\n          continue;\r\n        }\r\n      }\r\n      default: assertNever(tl);\r\n    }\r\n  }\r\n}\r\n\r\nexport function resolveCategory(varId: string, c: Category): Variable | undefined {\r\n  return flatMap(c.selectables, variablesOfSelectable).find(v => v.id === varId);\r\n}\r\n\r\nfunction variablesOfSelectable(s: Selectable): Variable[] {\r\n  switch (s.kind) {\r\n    case \"box\": return s.variables;\r\n    case \"group\": return flatMap(s.options, o => o.variables);\r\n    default: return assertNever(s);\r\n  }\r\n}\r\n","export function assertNever(n: never): never {\r\n  throw new Error(JSON.stringify(n) + \" should never be a value\");\r\n}\r\n\r\nexport function flatMap<X, Y>(xs: X[], f: (x: X) => Y[]): Y[] {\r\n  let ret: Y[] = [];\r\n\r\n  for (const x of xs) {\r\n    ret = ret.concat(f(x));\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nexport function displayableQuotient(numerator: number, denominator: number, fractionDigits: number = 2): string {\r\n  const res = numerator / denominator ;\r\n  if (isFinite(res)) {\r\n    return res.toFixed(fractionDigits);\r\n  } else {\r\n    return \"   \";\r\n  }\r\n}\r\n\r\nexport function levenshtein(a: string, b: string): number {\r\n  const an = a ? a.length : 0;\r\n  const bn = b ? b.length : 0;\r\n  if (an === 0) {\r\n    return bn;\r\n  }\r\n  if (bn === 0) {\r\n    return an;\r\n  }\r\n  const matrix = new Array<number[]>(bn + 1);\r\n  for (let i = 0; i <= bn; ++i) {\r\n    const row = matrix[i] = new Array<number>(an + 1);\r\n    row[0] = i;\r\n  }\r\n  const firstRow = matrix[0];\r\n  for (let j = 1; j <= an; ++j) {\r\n    firstRow[j] = j;\r\n  }\r\n  for (let i = 1; i <= bn; ++i) {\r\n    for (let j = 1; j <= an; ++j) {\r\n      if (b.charAt(i - 1) === a.charAt(j - 1)) {\r\n        matrix[i][j] = matrix[i - 1][j - 1];\r\n      } else {\r\n        matrix[i][j] = Math.min(\r\n          matrix[i - 1][j - 1], // substitution\r\n          matrix[i][j - 1], // insertion\r\n          matrix[i - 1][j] // deletion\r\n        ) + 1;\r\n      }\r\n    }\r\n  }\r\n  return matrix[bn][an];\r\n}\r\n\r\nexport function getAllIndexOf(searchStr: string, inputStr: string, caseSensitive: boolean): number[] {\r\n  // searches for all occurrences of a searchString within an inputString and returns all start indexes as an array\r\n  if (searchStr.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  if (!caseSensitive) {\r\n    inputStr = inputStr.toLowerCase();\r\n    searchStr = searchStr.toLowerCase();\r\n  }\r\n\r\n  let startIndex = 0;\r\n  let index: number;\r\n  const indexes: number[] = [];\r\n\r\n  while ((index = inputStr.indexOf(searchStr, startIndex)) > -1) {\r\n    indexes.push(index);\r\n    startIndex = index + searchStr.length;\r\n  }\r\n\r\n  return indexes;\r\n}\r\n\r\nexport function splitStringFromIndexes(input: string, indexes: number[]): string[] {\r\n  const splitText: string[] = [];\r\n  indexes.sort();\r\n  for (let i = 0; i < indexes.length; i++) {\r\n    if (i === indexes.length) {\r\n      splitText.push(input.substring(indexes[i], input.length));\r\n    } else {\r\n      splitText.push(input.substring(indexes[i], indexes[i + 1]));\r\n    }\r\n  }\r\n  return splitText;\r\n}\r\n\r\nexport function getDateFormatted(date: Date, addTime: boolean): string {\r\n  let result: string;\r\n  const day: string = (\"0\" + date.getDate()).slice(-2);\r\n  const month: string = (\"0\" + (date.getMonth() + 1)).slice(-2);\r\n  result = day + \".\" + month + \".\" + date.getFullYear();\r\n  if (addTime) {\r\n    const hour: string = (\"0\" + date.getHours()).slice(-2);\r\n    const minutes: string = (\"0\" + date.getMinutes()).slice(-2);\r\n    result += \", \" + hour + \":\" + minutes;\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function arrayBufferToBase64(buffer) {\r\n  let binary = \"\";\r\n  const bytes = new Uint8Array(buffer);\r\n  console.log(bytes);\r\n  const len = bytes.byteLength;\r\n  for (let i = 0; i < len; i++) {\r\n    binary += String.fromCharCode(bytes[i]);\r\n  }\r\n  return window.btoa(binary);\r\n}\r\n\r\nexport function getBase64Image(img) {\r\n  const canvas = document.createElement(\"canvas\");\r\n  canvas.width = img.width;\r\n  canvas.height = img.height;\r\n\r\n  const ctx = canvas.getContext(\"2d\");\r\n  ctx.drawImage(img, 0, 0);\r\n\r\n  const dataURL = canvas.toDataURL(\"image/png\");\r\n\r\n  return dataURL.replace(/^data:image\\/(png|jpg);base64,/, \"\");\r\n}\r\n\r\nexport function getFileExtension(filename: string) {\r\n  return filename.split(\".\").pop().toLowerCase();\r\n}\r\n\r\nexport function getImageDimensions(imgUrl): [number, number] {\r\n\r\n  let width: number;\r\n  let height: number;\r\n  let img = new Image();\r\n\r\n  img.src = imgUrl;\r\n  img.onload = (event) => {\r\n    let loadedImage = event.currentTarget as HTMLImageElement;\r\n    width = loadedImage.width;\r\n    height = loadedImage.height;\r\n  }\r\n\r\n  console.log(\"UTIL HERE\");\r\n  console.log(width, height);\r\n  return [width, height];\r\n}\r\n","import * as M from \"./templateModel\";\r\n\r\nexport function normalExtractor(): M.TextExtractor {\r\n  return new class {\r\n    ofCheckbox(c: M.CheckBox): string | undefined { return c.text; }\r\n    ofOption(o: M.Option): string | undefined { return o.text; }\r\n    ofEnumeration(e: M.Enumeration): string | undefined { return e.text; }\r\n    ofBlock(b: M.Block): string | undefined { return b.text; }\r\n    ofConditional(c: M.Conditional): string | undefined { return c.normalText; }\r\n  };\r\n}\r\n\r\nexport function judgementExtractor(): M.TextExtractor {\r\n  return new class {\r\n    ofCheckbox(c: M.CheckBox): string | undefined { return c.judgementText; }\r\n    ofOption(o: M.Option): string | undefined { return o.judgementText; }\r\n    ofEnumeration(e: M.Enumeration): string | undefined { return e.judgementText; }\r\n    ofBlock(b: M.Block): string | undefined { return b.judgementText; }\r\n    ofConditional(c: M.Conditional): string | undefined { return c.judgementText; }\r\n  };\r\n}\r\n\r\nexport function makeText(parts: M.TopLevel[], extractor: M.TextExtractor, suppressed: string[]): string {\r\n let result = parts.map(c => {\r\n    if (c.kind === \"category\") {\r\n      return getTexts(c.selectables, suppressed, extractor)\r\n        .map(t => expandVariablesInString(t, parts, true)).join(\"\");\r\n    } else if (c.kind === \"block\") {\r\n      return extractor.ofBlock(c) || \"\";\r\n    } else if (c.kind === \"enumeration\") {\r\n      return makeEnumeration(c, parts, extractor);\r\n    } else if (c.kind === \"conditional\") {\r\n      if (checkConditional(c, parts)) {\r\n        const data = extractor.ofConditional(c);\r\n        if (data) {\r\n          return expandVariablesInString(data, parts, true);\r\n        } else {\r\n          return \"\";\r\n        }\r\n      }\r\n    } else {\r\n      throw new Error(\"unknown top level kind\");\r\n    }\r\n  }).join(\"\");\r\n  const blocks = parts.filter(x => x.kind === \"block\");\r\n  for (const b of blocks) {\r\n    const regEx = new RegExp((b as M.Block).text + \"(\\\\n|$)\");\r\n    result = result.replace(regEx, \"\\n\");\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function getSuppressedConditionalIds(data: M.TopLevel[]): string[][] {\r\n  const suppressedNormal: string[] = [];\r\n  const suppressedJudgement: string[] = [];\r\n\r\n  for (const topLevel of data) {\r\n    if (topLevel.kind === \"conditional\") {\r\n      if (checkConditional(topLevel, data)) {\r\n        for (const anded of topLevel.precondition) {\r\n          for (const literal of anded) {\r\n            if (!literal.negated) {\r\n              if (topLevel.normalText) {\r\n                suppressedNormal.push(literal.id);\r\n              }\r\n              if (topLevel.judgementText) {\r\n                suppressedJudgement.push(literal.id);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return [suppressedNormal, suppressedJudgement];\r\n}\r\n\r\nexport function checkConditional(c: M.Conditional, data: M.TopLevel[]): boolean {\r\n  outer:\r\n  for (const anded of c.precondition) {\r\n    for (const literal of anded) {\r\n      if (isClicked(literal.id, data) === literal.negated) {\r\n        continue outer;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function isClicked(clickableId: string, data: M.TopLevel[]): boolean {\r\n  for (const category of data.filter(p => p.kind === \"category\").map(c => c as M.Category)) {\r\n    for (const selectable of category.selectables) {\r\n      if (selectable.kind === \"box\") {\r\n        if (selectable.value && selectable.conditionalId === clickableId) {\r\n          return true;\r\n        }\r\n      } else {\r\n        for (const option of selectable.options) {\r\n          if (option.conditionalId === clickableId && selectable.value === option.name) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n\r\nexport function getTexts(ss: M.Selectable[], suppressed: string[], textExtractor: M.TextExtractor): string[] {\r\n  const ret: string[] = [];\r\n\r\n  for (const s of ss) {\r\n    if (s.kind === \"box\" && s.value && !s.enumeration && (!s.conditionalId || suppressed.indexOf(s.conditionalId) === -1)) {\r\n      const result = textExtractor.ofCheckbox(s);\r\n      if (result) {\r\n        ret.push(result);\r\n      }\r\n    } else if (s.kind === \"group\") {\r\n      for (const o of s.options) {\r\n        if (s.value === o.name && (!o.conditionalId || suppressed.indexOf(o.conditionalId) === -1)) {\r\n          const result = textExtractor.ofOption(o);\r\n          if (result) {\r\n            ret.push(result);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\nexport function expandVariablesInString(s: string, data: M.TopLevel[], addFullStop: boolean): string {\r\n  const today = new Date();\r\n  const yesterday = new Date();\r\n  yesterday.setDate(today.getDate() - 1);\r\n  const tomorrow = new Date();\r\n  tomorrow.setDate(today.getDate() + 1);\r\n\r\n  const lookup: (string) => string = (name) => {\r\n    if (name === \"%Gestern%\") {\r\n      return makeDateString(yesterday);\r\n    } else if (name === \"%Heute%\") {\r\n      return makeDateString(today);\r\n    } else if (name === \"%Morgen%\") {\r\n      return makeDateString(tomorrow);\r\n    }\r\n    const vars = allVariables(data);\r\n    const matching = vars.find(v => \"%\" + v.id + \"%\" === name);\r\n    if (matching) {\r\n      if (textOfVariable(matching)) {\r\n        return textOfVariable(matching);\r\n      } else {\r\n        return \"---\";\r\n      }\r\n    } else {\r\n      return \"---\";\r\n    }\r\n  };\r\n  s = s.replace(/%[^%]+%/g, lookup);\r\n  const brackets = s.match(/(\\[]*?[^\\]]*?])/g);\r\n  if (brackets != null) {\r\n    for (const t of brackets) {\r\n      if (t.includes(\"---\")) {\r\n        s = s.replace(t, \"\");\r\n      }\r\n    }\r\n  }\r\n  s = s.replace(/(---)/g, \"\"); // \"Fehlzeichen\" weg\r\n  s = s.replace(/\\s\\s+/g, \" \"); // doppelt oder mehr Leerzeichen weg\r\n  s = s.replace(/\\[|\\]/g, \"\"); // Klammern weg\r\n  s = s.trim();\r\n  if (addFullStop) {\r\n    s = s.replace(/(\\s*\\.?\\s*$)/, \". \"); // Punkt am Ende einfügen, falls keiner da ist\r\n  }\r\n  return s;\r\n}\r\n\r\nexport function makeDateString(d: Date): string {\r\n  return d.toLocaleDateString(\"de-DE\", { year: \"numeric\", month: \"numeric\", day: \"numeric\" });\r\n}\r\n\r\nexport function allVariables(data: M.TopLevel[]): M.Variable[] {\r\n  let vars: M.Variable[] = [];\r\n\r\n  for (const c of data) {\r\n    if (c.kind === \"category\") {\r\n      for (const sel of c.selectables) {\r\n        if (sel.kind === \"box\" && sel.value) {\r\n          vars = vars.concat(sel.variables);\r\n        } else if (sel.kind === \"group\") {\r\n          for (const o of sel.options) {\r\n            if (sel.value === o.name) {\r\n              vars = vars.concat(o.variables);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return vars;\r\n}\r\n\r\nexport function textOfVariable(v: M.Variable): string | undefined {\r\n  if (v.kind === \"oc\") {\r\n    return v.value;\r\n  } else if (v.kind === \"mc\") {\r\n    return v.values.filter(val => val[1]).map(val => val[0]).join(\", \");\r\n  } else if (v.kind === \"text\") {\r\n    return v.value;\r\n  } else if (v.kind === \"number\") {\r\n    if (v.value !== 0) {\r\n      return \"\" + v.value;\r\n    } else {\r\n    return \"\";\r\n    }\r\n  } else if (v.kind === \"date\") {\r\n    return v.value.day + \".\" + v.value.month + \".\" + v.value.year;\r\n  } else if (v.kind === \"ratio\") {\r\n    return (v.numerator / v.denominator).toLocaleString(\"de-DE\", { maximumFractionDigits: v.fractionDigits });\r\n  }\r\n\r\n  return assertUnreachable(v);\r\n}\r\n\r\nexport function makeNormalCategory(c: M.Category): void {\r\n  if (hasSelection(c)) { return; }\r\n\r\n  for (const entry of c.selectables) {\r\n    if (entry.kind === \"box\") {\r\n      if (entry.normal) {\r\n        entry.value = true;\r\n      }\r\n    } else if (entry.kind === \"group\") {\r\n      for (const o of entry.options) {\r\n        if (o.normal) {\r\n          entry.value = o.name;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function hasSelection(c: M.Category): boolean {\r\n  for (const entry of c.selectables) {\r\n    if (entry.kind === \"box\" && entry.value) {\r\n      return true;\r\n    } else if (entry.kind === \"group\" && entry.value) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n\r\nexport function makeEnumeration(e: M.Enumeration, data: M.TopLevel[], textExtractor: M.TextExtractor): string {\r\n  const items: string[] = getRelevantEnumerationItems(e.id, data, textExtractor);\r\n  if (items.length === 0) {\r\n    return \"\";\r\n  } else if (items.length === 1) {\r\n    return textExtractor.ofEnumeration(e) + items[0] + \". \";\r\n  } else if (items.length === 2) {\r\n    return textExtractor.ofEnumeration(e) + items[0] + \" und \" + items[1] + \". \";\r\n  } else if (items.length > 2) {\r\n    return textExtractor.ofEnumeration(e) + items.slice(0, items.length - 1).join(\", \") + \" und \" + items[items.length - 1] + \" \";\r\n  }\r\n}\r\n\r\nexport function getRelevantEnumerationItems(id: string, data: M.TopLevel[], textExtractor: M.TextExtractor): string[] {\r\n  const items: string[] = [];\r\n\r\n  for (const p of data) {\r\n    if (p.kind === \"category\") {\r\n      for (const s of p.selectables) {\r\n        if (s.kind === \"box\") {\r\n          if (s.value && s.enumeration === id) {\r\n            const result = textExtractor.ofCheckbox(s);\r\n            if (result) {\r\n              items.push(expandVariablesInString(result, data, false));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return items;\r\n}\r\n\r\nexport function assertUnreachable(x: never): never {\r\n  throw new Error(\"should not be reachable: \" + x);\r\n}\r\n","export enum Role {\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  User = \"user\",\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  Moderator = \"moderator\",\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  Admin = \"admin\"\r\n}\r\n","/*\r\n * Type Definitions\r\n */\r\nexport type Taker = (text: string) => TakeResult | undefined;\r\n\r\nexport interface TakeResult {\r\n  lengthTaken: number;\r\n  setter: () => void;\r\n}\r\n\r\n/*\r\n * basic takers\r\n */\r\n\r\nexport function text(text: string): Taker {\r\n  return (input: string): TakeResult | undefined  => {\r\n    const sub = input.substr(0, text.length)\r\n    if (sub === text) {\r\n      return {\r\n        lengthTaken: sub.length,\r\n        setter: () => {}\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nexport function regex(r: RegExp): Taker {\r\n  return (input: string): TakeResult | undefined  => {\r\n    const match = r.exec(input)\r\n    if (match) {\r\n      return {\r\n        lengthTaken: match[0].length,\r\n        setter: () => {}\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const dummy:   Taker = (s: string) => { console.log(\"there are still dummy takers\"); return undefined; }\r\nexport const fail:    Taker = (s: string) => { return undefined; }\r\nexport const success: Taker = (s: string) => { return { lengthTaken: 0, setter: () => { } }; }\r\nexport const decimal: Taker = regex(/\\d+([.,]\\d+)?/)\r\n\r\n/*\r\n * combinators\r\n */\r\n\r\nexport function compound(takers: Taker[]): Taker {\r\n  return (s: string) => {\r\n    const results: TakeResult[] = [];\r\n\r\n    let ss = s;\r\n    for (let t of takers) {\r\n      const result = t(ss);\r\n      if (result) {\r\n        results.push(result);\r\n        ss = ss.substr(result.lengthTaken);\r\n      } else {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    return {\r\n      lengthTaken: results.reduce((a, b) => a + b.lengthTaken, 0),\r\n      setter: () => { results.forEach(r => r.setter()) }\r\n    };\r\n  }\r\n}\r\n\r\nexport function or(takers: Taker[]): Taker {\r\n  return (s: string) => {\r\n    for (let taker of takers) {\r\n      const result = taker(s);\r\n      if (result) {\r\n        return result;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function optional(t: Taker): Taker {\r\n  return or([t, success]);\r\n}\r\n\r\nexport function addSetter(t: Taker, f: (oldText: string) => void) {\r\n  return s => {\r\n    const result = t(s);\r\n    if (result) {\r\n      return {\r\n        lengthTaken: result.lengthTaken,\r\n        setter: () => { result.setter(); f(s.substring(0, result.lengthTaken)); }\r\n      };\r\n    }\r\n\r\n    return result;\r\n  };\r\n}\r\n\r\n\r\nexport function logOnFail(t: Taker, msg: string): Taker {\r\n  return s => {\r\n    const result = t(s);\r\n    if (result) {\r\n      return result;\r\n    } else {\r\n      console.log(msg);\r\n    }\r\n  };\r\n}\r\n\r\nexport function logOnSuccess(t: Taker, msg: string): Taker {\r\n  return s => {\r\n    const result = t(s);\r\n    if (result) {\r\n      console.log(msg);\r\n      return result;\r\n    }\r\n  };\r\n}\r\n\r\n\r\nexport function log(t: Taker, msgSuc: string, msgFail: string): Taker {\r\n  return logOnSuccess(logOnFail(t, msgFail), msgSuc);\r\n}\r\n","import {NgbDateStruct} from \"@ng-bootstrap/ng-bootstrap\";\r\nimport * as M from \"../helpers/old_model\";\r\n\r\nexport interface TextExtractor {\r\n  ofCheckbox(c: CheckBox): string | undefined;\r\n  ofOption(o: Option): string | undefined;\r\n  ofEnumeration(e: Enumeration): string | undefined;\r\n  ofBlock(e: Block): string | undefined;\r\n  ofConditional(c: Conditional): string | undefined;\r\n}\r\n\r\nexport interface Template {\r\n  _id: string;\r\n  name: string;\r\n  timestamp: Date;\r\n  parts: TopLevel[];\r\n}\r\n\r\nexport type TopLevel = Category | Block | Enumeration | Conditional;\r\n\r\n// Main data management and display class\r\n\r\nexport interface Category {\r\n  kind: \"category\";\r\n  name: string;\r\n  optional?: boolean;\r\n  selectables: Selectable[];\r\n}\r\n\r\nexport interface Block {\r\n  kind: \"block\";\r\n  text?: string;\r\n  judgementText?: string;\r\n}\r\n\r\nexport interface Enumeration {\r\n  kind:           \"enumeration\";\r\n  text:           string;\r\n  judgementText?: string;\r\n  id:             string;\r\n}\r\n\r\nexport interface Conditional {\r\n  kind:           \"conditional\";\r\n  precondition:   Literal[][];\r\n  normalText?:    string;\r\n  judgementText?: string;\r\n}\r\n\r\nexport interface Literal {\r\n  id:      string;\r\n  negated: boolean;\r\n}\r\n\r\n// Selectable classes, lower than category\r\n\r\nexport type Selectable = CheckBox | Group;\r\nexport type Clickable  = CheckBox | Option;\r\n\r\nexport interface CheckBox {\r\n  kind:           \"box\";\r\n  name:           string;\r\n  value:          boolean;\r\n  text:           string;\r\n  conditionalId?: string;\r\n  judgementText?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  enumeration?:   string;\r\n  keys:           string[];\r\n}\r\n\r\nexport interface Group {\r\n  kind:    \"group\";\r\n  name:    string;\r\n  options: Option[];\r\n  value?:  string;\r\n}\r\n\r\nexport interface Option {\r\n  kind:           \"option\";\r\n  name:           string;\r\n  text:           string;\r\n  conditionalId?: string;\r\n  judgementText?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  keys:           string[];\r\n}\r\n\r\n// Variable types\r\n\r\nexport type Variable = VariableOC | VariableMC | VariableText | VariableNumber | VariableDate | VariableRatio;\r\n\r\nexport interface VariableCommon {\r\n  id:         string;\r\n  textBefore: string;\r\n  textAfter:  string;\r\n  // TODO: Refactor because only OC and MC need keys (aka synonyms)\r\n  keys?:      string[][];\r\n}\r\n\r\nexport interface VariableOC extends VariableCommon {\r\n  kind:   \"oc\";\r\n  value?: string;\r\n  values: string[];\r\n}\r\n\r\nexport interface VariableMC extends VariableCommon {\r\n  kind:   \"mc\";\r\n  values: [string, boolean][];\r\n}\r\n\r\nexport interface VariableText extends VariableCommon {\r\n  kind:  \"text\";\r\n  value: string;\r\n}\r\n\r\nexport interface VariableNumber extends VariableCommon {\r\n  kind:  \"number\";\r\n  value: number;\r\n}\r\n\r\nexport interface VariableDate extends VariableCommon {\r\n  kind:  \"date\";\r\n  value: NgbDateStruct;\r\n}\r\n\r\nexport interface VariableRatio extends VariableCommon {\r\n  kind:           \"ratio\";\r\n  numerator:      number;\r\n  denominator:    number;\r\n  fractionDigits: number;\r\n}\r\n\r\nexport function convertModel(oldModel: M.TopLevel[]) {\r\n  const newParts: TopLevel[] = [];\r\n  for (const part of oldModel) {\r\n    if (part.kind === \"category\") {\r\n      newParts.push(convertCategory(part));\r\n    } else if(part.kind === \"block\") {\r\n      newParts.push(convertBlock(part));\r\n    } else if(part.kind === \"enumeration\") {\r\n      newParts.push(convertEnum(part));\r\n    } else if(part.kind === \"conditional\") {\r\n      newParts.push(convertCond(part));\r\n    }\r\n  }\r\n  return newParts;\r\n}\r\n\r\nexport function convertSelectables(oldSels: M.Selectable[]): Selectable[] {\r\n  const newSels: Selectable[] = [];\r\n  for (const oldSel of oldSels) {\r\n    let newSel: Selectable;\r\n    if (oldSel.kind === \"box\") {\r\n      newSel = convertCheckBox(oldSel);\r\n    } else if (oldSel.kind === \"group\") {\r\n      newSel = convertGroup(oldSel);\r\n    }\r\n    newSels.push(newSel);\r\n  }\r\n  return newSels;\r\n}\r\n\r\nexport function convertCheckBox(oldBox: M.CheckBox): CheckBox {\r\n  const newVariables: Variable[] = convertVariables(oldBox.variables);\r\n  const keywords: string[] = splitKeywords(oldBox.data[\"bau\"][0], \";\");\r\n  return {\r\n    kind: oldBox.kind,\r\n    name: oldBox.name,\r\n    value: oldBox.value,\r\n    text: oldBox.text,\r\n    judgementText: oldBox.judgementText,\r\n    enumeration: oldBox.enumeration,\r\n    normal: oldBox.normal,\r\n    variables: newVariables,\r\n    keys: keywords\r\n  };\r\n}\r\n\r\nexport function convertGroup(oldGroup: M.Group): Group {\r\n  const newOpts: Option[] = [];\r\n  for (const oldOpt of oldGroup.options) {\r\n    newOpts.push(convertOption(oldOpt));\r\n  }\r\n  return {\r\n    kind: oldGroup.kind,\r\n    name: oldGroup.name,\r\n    options: newOpts,\r\n    value: oldGroup.value\r\n  };\r\n}\r\n\r\nexport function convertOption(oldOpt: M.Option): Option {\r\n  const newVariables: Variable[] = convertVariables(oldOpt.variables);\r\n  const keys: string[] = splitKeywords(oldOpt.data[\"bau\"][0], \";\");\r\n  return {\r\n    kind: oldOpt.kind,\r\n    name: oldOpt.name,\r\n    text: oldOpt.text,\r\n    judgementText: oldOpt.judgementText,\r\n    normal: oldOpt.normal,\r\n    variables: newVariables,\r\n    keys: keys\r\n  };\r\n}\r\n\r\nexport function convertBlock(oldBlock: M.Block): Block {\r\n  return {\r\n    kind: oldBlock.kind,\r\n    text: oldBlock.text,\r\n    judgementText: oldBlock.judgementText\r\n  };\r\n}\r\n\r\nexport function convertEnum(oldEnum: M.Enumeration): Enumeration {\r\n  return {\r\n    kind: oldEnum.kind,\r\n    text: oldEnum.text,\r\n    judgementText: oldEnum.judgementText,\r\n    id: oldEnum.id\r\n  };\r\n}\r\n\r\nexport function convertCond(oldCond: M.Conditional): Conditional {\r\n  return {\r\n    kind: oldCond.kind,\r\n    precondition: oldCond.precondition,\r\n    normalText: oldCond.normalText,\r\n    judgementText: oldCond. judgementText\r\n  };\r\n}\r\n\r\nexport function convertCategory(oldCat: M.Category): Category {\r\n  const newSels = convertSelectables(oldCat.selectables);\r\n  return {\r\n    kind: oldCat.kind,\r\n    name: oldCat.name,\r\n    optional: oldCat.optional,\r\n    selectables: newSels\r\n  };\r\n}\r\n\r\nexport function convertVariables(oldVars: M.Variable[]): Variable[] {\r\n  const newVars: Variable[] = [];\r\n  for (const variable of oldVars) {\r\n    newVars.push(convertVariable(variable));\r\n  }\r\n  return newVars;\r\n}\r\n\r\nexport function convertVariable(oldVar: M.Variable): Variable {\r\n  let newVar: Variable;\r\n\r\n  if (oldVar.kind === \"oc\") {\r\n    const keys: string[][] = splitKeywordsArray(oldVar.data[\"syn\"][0], \"/\", \";\");\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: keys,\r\n      value: oldVar.value,\r\n      values: oldVar.values\r\n    };\r\n  } else if (oldVar.kind === \"mc\") {\r\n    const keys: string[][] = splitKeywordsArray(oldVar.data[\"syn\"][0], \";\", \",\");\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: keys,\r\n      values: oldVar.values\r\n    };\r\n  } else if (oldVar.kind === \"text\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      value: oldVar.value\r\n    };\r\n  } else if (oldVar.kind === \"number\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      value: oldVar.value\r\n    };\r\n  } else if (oldVar.kind === \"date\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      value: oldVar.value\r\n    };\r\n  } else if (oldVar.kind === \"ratio\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      numerator: oldVar.numerator,\r\n      denominator: oldVar.denominator,\r\n      fractionDigits: oldVar.fractionDigits\r\n    };\r\n  }\r\n\r\n  return newVar;\r\n}\r\n\r\nexport function splitKeywords(keywords: string, splitter: string): string[] {\r\n  if (keywords) {\r\n    return keywords.split(splitter);\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function splitKeywordsArray(keys: string, optionSplitter: string, synonymSplitter: string): string[][] {\r\n  const result: string[][] = [];\r\n  const variableSplit: string[] = splitKeywords(keys, optionSplitter);\r\n  if (variableSplit) {\r\n    for (const varSynonyms of variableSplit) {\r\n      const synSplit: string[] = splitKeywords(varSynonyms, synonymSplitter);\r\n      synSplit.map(key => key.trim());\r\n      result.push(synSplit);\r\n    }\r\n  } else {\r\n    return null;\r\n  }\r\n  return result;\r\n}\r\n","import {Role} from \"./role\";\r\n\r\nexport class User {\r\n  id: number;\r\n  username: string;\r\n  role: Role;\r\n  accessToken?: string;\r\n}\r\n","<h5 mat-dialog-title>\r\n  {{title}}\r\n</h5>\r\n<mat-divider></mat-divider>\r\n\r\n<div mat-dialog-content class=\"content\">\r\n  <p>{{message}}</p>\r\n</div>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<div mat-dialog-actions class=\"buttons\" *ngIf=\"type === 'confirm'\">\r\n  <button class=\"btn btn-primary\" (click)=\"onConfirm()\">Bestätigen</button>\r\n  <button class=\"btn btn-outline-secondary cancelButton\" (click)=\"onDismiss()\">Abbrechen</button>\r\n</div>\r\n\r\n<div mat-dialog-actions class=\"buttons\" *ngIf=\"type === 'warning'\">\r\n  <button class=\"btn btn-danger\" (click)=\"onConfirm()\">Bestätigen</button>\r\n  <button class=\"btn btn-outline-secondary cancelButton\" (click)=\"onDismiss()\">Abbrechen</button>\r\n</div>\r\n","import {Component, Inject, OnInit} from \"@angular/core\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\n\r\n@Component({\r\n  selector: \"app-confirm-dialog\",\r\n  templateUrl: \"./confirm-dialog.component.html\",\r\n  styleUrls: [\"./confirm-dialog.component.scss\"]\r\n})\r\nexport class ConfirmDialogComponent implements OnInit {\r\n\r\n  title: string;\r\n  message: string;\r\n  type: string;\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<ConfirmDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: ConfirmDialogModel) { }\r\n\r\n  ngOnInit(): void {\r\n    this.type = this.data.type;\r\n    this.title = this.data.title;\r\n    this.message = this.data.message;\r\n  }\r\n\r\n  onConfirm(): void {\r\n    this.dialogRef.close(true);\r\n  }\r\n\r\n  onDismiss(): void {\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n}\r\n\r\nexport class ConfirmDialogModel {\r\n\r\n  constructor(\r\n    public type: string,\r\n    public title: string,\r\n    public message: string) { }\r\n\r\n}\r\n","<div style=\"background: hsl(202, 73%, 96%); margin: 5px; border-radius: 5px; border: 1px solid hsl(200, 70%, 80%);\r\n            grid-column-gap: 5px; grid-template-columns: 220px 1000px 600px;\r\n            display: grid; align-content: center\">\r\n  <div style=\"display: block; margin: 20px;\">\r\n    <button class=\"btn\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"{'btn-warning': (this.displayBoxes && this.coordinates.main.length > 0\r\n            && this.currentMode !== 'main'),\r\n            'btn-primary': this.currentMode === 'main',\r\n            'btn-outline-primary': this.currentMode !== 'main'}\"\r\n            (click)=\"this.changeMode('main')\">Hauptaufnahme</button>\r\n    <button class=\"btn\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"{'btn-warning': (this.displayBoxes && this.coordinates.lateral.length > 0\r\n            && this.currentMode !== 'lateral'),\r\n            'btn-primary': this.currentMode === 'lateral',\r\n            'btn-outline-primary': this.currentMode !== 'lateral'}\"\r\n            (click)=\"this.changeMode('lateral')\"\r\n            [disabled]=\"this.scans.lateralScan === undefined\">Lateralaufnahme</button>\r\n    <button class=\"btn btn-outline-primary\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"{'btn-warning': (this.displayBoxes && this.coordinates.pre.length > 0\r\n            && this.currentMode !== 'pre'),\r\n            'btn-primary': this.currentMode === 'pre',\r\n            'btn-outline-primary': this.currentMode !== 'pre'}\"\r\n            (click)=\"this.changeMode('pre')\"\r\n            [disabled]=\"this.scans.preScan === undefined\">Voraufnahme</button>\r\n    <button class=\"btn\"\r\n            [ngClass]=\"this.displayBoxes? 'btn-success': 'btn-outline-success'\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"toggleBoxes()\">Boxen anzeigen</button>\r\n    <button class=\"btn\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"this.enableZoom? 'btn-success': 'btn-outline-success'\"\r\n            (click)=\"toggleZoom()\">Toggle Zoom</button>\r\n    <button *ngIf=\"isAllowed\" class=\"btn\"\r\n            [ngClass]=\"this.enableDelete? 'btn-success': 'btn-outline-success'\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"toggleDelete()\">Löschen aktivieren</button>\r\n    <button *ngIf=\"isAllowed\" class=\"btn\"\r\n            [ngClass]=\"this.enableEdit? 'btn-success': 'btn-outline-success'\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"toggleEditor()\">Editor aktivieren</button>\r\n    <button *ngIf=\"isAllowed && this.enableEdit\" class=\"btn btn-outline-success\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"saveNewBox()\">Box Speichern</button>\r\n  </div>\r\n\r\n  <div style=\"position: relative; margin: 5px;\" [ngStyle]=\"{'width.px': currentWidth, 'height.px': currentHeight}\">\r\n    <img #sourceImage\r\n      style=\"position: absolute; left: 0; top: 0; z-index: 0\"\r\n         height=\"{{currentHeight}}\" width=\"{{currentWidth}}\"\r\n         src=\"{{currentScanUrl}}\"\r\n         id=\"sourceImage\" class=\"image\" alt=\"Fehler beim Laden der Aufnahme\"/>\r\n    <canvas #drawLayer style=\"position: absolute; left: 0; top: 0; z-index: 1\" id=\"drawCanvas\"\r\n            width=\"{{currentWidth+50}}\" height=\"{{currentHeight+50}}\"></canvas>\r\n    <canvas #labelLayer style=\"position: absolute; left: 0; top: 0; z-index: 1\" id=\"labelCanvas\"\r\n            width=\"{{currentWidth+50}}\" height=\"{{currentHeight+50}}\"></canvas>\r\n    <div #lensContainer *ngIf=\"enableZoom\">\r\n      <div style=\"position: absolute; border: 1px solid #d4d4d4; width: 300px; height: 300px;\" id=\"lens\" ></div>\r\n      <div style=\"position: absolute; left: 0; top: 0; z-index: 2\" id=\"zoomCanvas\"\r\n           [ngStyle]=\"{'width.px': currentWidth, 'height.px': currentHeight}\"></div>\r\n    </div>\r\n    <canvas *ngIf=\"enableDelete\" #deleteLayer style=\"position: absolute; left: 0; top: 0; z-index: 3\" id=\"deleteCanvas\"\r\n            width=\"{{currentWidth}}\" height=\"{{currentHeight}}\"></canvas>\r\n    <canvas *ngIf=\"enableEdit\" #editLayer style=\"position: absolute; left: 0; top: 0; z-index: 3\" id=\"editCanvas\"\r\n            width=\"{{currentWidth}}\" height=\"{{currentHeight}}\"></canvas>\r\n  </div>\r\n\r\n  <div #zoomDiv style=\"margin: 20px; width: 600px; height: 600px; border: 1px solid #d4d4d4;\"\r\n    id=\"zoom\"></div>\r\n\r\n</div>\r\n\r\n<ng-template #labelDialog>\r\n  <h4 style=\"margin-bottom: 5px\" matDialogTitle>Label-Dialog</h4>\r\n  <mat-divider></mat-divider>\r\n  <mat-dialog-content style=\"margin: 10px 0\">\r\n    <div style=\"margin: 0\">Neues Label eingeben:</div>\r\n    <input style=\"margin: 0\" matInput type=\"text\" id=\"labelInput\" [(ngModel)]=\"newLabel\">\r\n  </mat-dialog-content>\r\n  <mat-divider></mat-divider>\r\n  <mat-dialog-actions style=\"float: right\">\r\n    <button class=\"btn btn-primary\" (click)=\"save()\">Speichern</button>\r\n    <button style=\"margin-left:3px\" class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n  </mat-dialog-actions>\r\n</ng-template>\r\n","import {Component, OnInit, Inject, ViewChild, ElementRef, AfterViewInit, TemplateRef} from \"@angular/core\";\r\nimport {POPOUT_MODAL_DATA, PopoutData} from \"@app/core/services/popout.tokens\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {switchMap, takeUntil} from \"rxjs/operators\";\r\nimport {MatDialogService} from \"@app/core/services/mat-dialog.service\";\r\nimport {MatDialog, MatDialogRef} from \"@angular/material/dialog\";\r\n\r\nimport {environment} from \"@env/environment\";\r\nimport {AuthenticationService} from \"@app/core\";\r\nimport {BoundingBox, Image, Role, User} from \"@app/models\";\r\n\r\nconst BOX_LINE_WIDTH = 5;\r\nconst DISPLAY_BOX_COLOR = \"blue\";\r\nconst EDIT_BOX_COLOR = \"green\";\r\nconst TEXT_COLOR = \"#98FF98\";\r\n\r\nconst MAX_IMAGE_HEIGHT = 900;\r\n\r\n@Component({\r\n  selector: \"app-image-display\",\r\n  templateUrl: \"./image-display.component.html\",\r\n  styleUrls: [\"./image-display.component.scss\"]\r\n})\r\nexport class ImageDisplayComponent implements OnInit, AfterViewInit {\r\n\r\n  serverUrl = environment.backend;\r\n  scans: {\r\n    id: string;\r\n    mainScan: Image;\r\n    lateralScan?: Image;\r\n    preScan?: Image;\r\n  };\r\n  coordinates: {\r\n    main: BoundingBox[];\r\n    lateral: BoundingBox[];\r\n    pre: BoundingBox[];\r\n  };\r\n  currentMode: string;\r\n  currentScanUrl: string;\r\n\r\n  currentScaleFactor = 1.0;\r\n  currentWidth: number;\r\n  currentHeight: number;\r\n\r\n  displayBoxes: boolean;\r\n  enableEdit: boolean;\r\n  enableDelete: boolean;\r\n  enableZoom: boolean;\r\n\r\n  startX = 0;\r\n  startY = 0;\r\n  width = 0;\r\n  height = 0;\r\n  newLabel = \"\";\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"drawLayer\", {static: false }) drawLayer: ElementRef;\r\n  private drawLayerElement;\r\n  private drawContext: CanvasRenderingContext2D;\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"labelLayer\", {static: false }) labelLayer: ElementRef;\r\n  private labelLayerElement;\r\n  private labelContext: CanvasRenderingContext2D;\r\n\r\n  private deleteLayerElement;\r\n  private deleteContext: CanvasRenderingContext2D;\r\n  @ViewChild(\"deleteLayer\", {static: false }) set deleteLayer(layer: ElementRef) {\r\n    if (this.enableDelete) {\r\n      this.deleteLayerElement = layer.nativeElement;\r\n      this.deleteContext = this.deleteLayerElement.getContext(\"2d\");\r\n      this.addDeleteListeners();\r\n    }\r\n  };\r\n\r\n  private editLayerElement;\r\n  private editContext: CanvasRenderingContext2D;\r\n  @ViewChild(\"editLayer\", {static: false }) set editLayer(layer: ElementRef) {\r\n    if (this.enableEdit) {\r\n      this.editLayerElement = layer.nativeElement;\r\n      this.editContext = this.editLayerElement.getContext(\"2d\");\r\n      this.rectangleDrawing();\r\n    }\r\n  };\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"labelDialog\") labelDialog: TemplateRef<any>;\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  dialogRef: MatDialogRef<any>;\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"sourceImage\") sourceImage: ElementRef;\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"zoomDiv\") zoomDiv: ElementRef;\r\n  private zoomLayerElement;\r\n  private lensElement;\r\n  @ViewChild(\"lensContainer\") set zoom(container: ElementRef) {\r\n    if (this.enableZoom) {\r\n      const containerElement = container.nativeElement;\r\n      this.zoomLayerElement = containerElement.children[1];\r\n      this.lensElement = containerElement.children[0];\r\n      this.imageZoom();\r\n    }\r\n  }\r\n\r\n  private restricted = true;\r\n\r\n  constructor(@Inject(POPOUT_MODAL_DATA) public data: PopoutData,\r\n              private dialogService: MatDialogService,\r\n              private dialog: MatDialog) { }\r\n\r\n  ngOnInit(): void {\r\n    this.scans = this.data.scans;\r\n    this.coordinates = this.data.coordinates;\r\n\r\n    if (this.data.restricted !== undefined) {\r\n      this.restricted = this.data.restricted;\r\n    }\r\n    this.displayBoxes = false;\r\n    this.enableEdit = false;\r\n    this.enableDelete = false;\r\n\r\n    this.initMain();\r\n  }\r\n\r\n  get isAllowed() {\r\n    return !this.restricted;\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.drawLayerElement = this.drawLayer.nativeElement;\r\n    this.drawContext = this.drawLayerElement.getContext(\"2d\");\r\n    this.labelLayerElement = this.labelLayer.nativeElement;\r\n    this.labelContext = this.labelLayerElement.getContext(\"2d\");\r\n  }\r\n\r\n  initMain() {\r\n    this.currentMode = \"main\";\r\n    this.setCurrentImage();\r\n    this.setCurrentDimensions();\r\n  }\r\n\r\n  setCanvasProperties(context, lineWidth, lineCap, strokeStyle) {\r\n    context.lineWidth = lineWidth;\r\n    context.lineCap = lineCap;\r\n    context.strokeStyle = strokeStyle;\r\n  }\r\n\r\n  clearCanvas() {\r\n    this.drawContext.clearRect(0, 0, this.drawLayerElement.width, this.drawLayerElement.height);\r\n    this.labelContext.clearRect(0, 0, this.labelLayerElement.width, this.labelLayerElement.height);\r\n  }\r\n\r\n  setCurrentImage() {\r\n    const filename = this.scans[this.currentMode + \"Scan\"].filename;\r\n    this.currentScanUrl = this.serverUrl + this.scans.id + \"/\" + filename;\r\n  }\r\n\r\n  setCurrentDimensions() {\r\n    const img = new Image();\r\n    img.src = this.currentScanUrl;\r\n    img.onload = (event) => {\r\n      const loadedImage = event.currentTarget as HTMLImageElement;\r\n      if (loadedImage.height <= MAX_IMAGE_HEIGHT) {\r\n        this.currentScaleFactor = 1.0;\r\n        this.currentHeight = loadedImage.height;\r\n        this.currentWidth = loadedImage.width;\r\n      } else {\r\n        this.currentScaleFactor = MAX_IMAGE_HEIGHT / loadedImage.height;\r\n        this.currentHeight = MAX_IMAGE_HEIGHT;\r\n        this.currentWidth = loadedImage.width * this.currentScaleFactor;\r\n      }\r\n    };\r\n  }\r\n\r\n  changeMode(mode: string) {\r\n    this.currentMode = mode;\r\n    this.enableDelete = false;\r\n    this.setCurrentImage();\r\n    this.setCurrentDimensions();\r\n    if (this.displayBoxes) {\r\n      this.drawBoxes();\r\n    }\r\n  }\r\n\r\n  toggleBoxes() {\r\n    this.displayBoxes = !this.displayBoxes;\r\n    this.clearCanvas();\r\n    if (this.enableDelete) {\r\n      this.enableDelete = false;\r\n    }\r\n    if (this.displayBoxes) {\r\n      this.drawBoxes();\r\n    }\r\n  }\r\n\r\n  toggleDelete() {\r\n    if (!this.displayBoxes) {\r\n      this.toggleBoxes();\r\n    }\r\n    this.enableDelete = !this.enableDelete;\r\n  }\r\n\r\n  toggleEditor() {\r\n    this.enableEdit = !this.enableEdit;\r\n  }\r\n\r\n  toggleZoom() {\r\n    this.enableZoom = !this.enableZoom;\r\n    if (this.enableDelete) {\r\n      this.toggleDelete();\r\n    }\r\n    if (this.enableEdit) {\r\n      this.toggleEditor();\r\n    }\r\n  }\r\n\r\n  drawBoxes() {\r\n    this.clearCanvas();\r\n    const coordinates = this.coordinates[this.currentMode];\r\n    for (const bbox of coordinates) {\r\n      this.drawRect(this.drawContext, bbox, DISPLAY_BOX_COLOR);\r\n      this.addLabel(bbox);\r\n    }\r\n  }\r\n\r\n  addDeleteListeners() {\r\n    const coordinates = this.coordinates[this.currentMode];\r\n    const rect = this.drawLayerElement.getBoundingClientRect();\r\n    const parent = this;\r\n    for (const bbox of coordinates) {\r\n      console.log(bbox);\r\n      this.deleteLayerElement.addEventListener(\"mousemove\", (e) => {\r\n        const x = bbox.left * parent.currentScaleFactor;\r\n        const y = bbox.top * parent.currentScaleFactor;\r\n        const w = bbox.width * parent.currentScaleFactor;\r\n        const h = bbox.height * parent.currentScaleFactor;\r\n        if (\r\n          x <= e.clientX - rect.left &&\r\n          e.clientX - rect.left <= x + w &&\r\n          y <= e.clientY - rect.top &&\r\n          e.clientY - rect.top <= y + h\r\n        ) {\r\n          parent.drawRect(this.deleteContext, bbox, \"red\");\r\n        } else {\r\n          parent.drawRect(this.deleteContext, bbox, \"blue\");\r\n        }\r\n      });\r\n      this.deleteLayerElement.addEventListener(\"click\", (e) => {\r\n        const x = bbox.left * parent.currentScaleFactor;\r\n        const y = bbox.top * parent.currentScaleFactor;\r\n        const w = bbox.width * parent.currentScaleFactor;\r\n        const h = bbox.height * parent.currentScaleFactor;\r\n        if (\r\n          x <= e.clientX - rect.left &&\r\n          e.clientX - rect.left <= x + w &&\r\n          y <= e.clientY - rect.top &&\r\n          e.clientY - rect.top <= y + h\r\n        ) {\r\n          console.log(\"It works!\");\r\n          parent.removeAlert(bbox);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  removeAlert(bbox: BoundingBox) {\r\n    const result = parent.confirm(\"Soll diese Box (Label: \" + bbox.label + \") wirklich gelöscht werden?\");\r\n    if (result) {\r\n      const idx = this.coordinates[this.currentMode].indexOf(bbox);\r\n      this.coordinates[this.currentMode].splice(idx, 1);\r\n      this.drawBoxes();\r\n      this.enableDelete = false;\r\n    }\r\n  }\r\n\r\n  drawRect(context: CanvasRenderingContext2D, bbox: BoundingBox, color: string) {\r\n    this.setCanvasProperties(context, BOX_LINE_WIDTH, \"square\", color);\r\n    context.beginPath();\r\n    context.rect(\r\n      bbox.left * this.currentScaleFactor,\r\n      bbox.top * this.currentScaleFactor,\r\n      bbox.width * this.currentScaleFactor,\r\n      bbox.height * this.currentScaleFactor);\r\n    context.stroke();\r\n  }\r\n\r\n  addLabel(bbox: BoundingBox) {\r\n    this.labelContext.font = \"bold 18pt Arial\";\r\n    this.labelContext.fillStyle = TEXT_COLOR;\r\n    this.labelContext.strokeStyle = \"black\";\r\n    this.labelContext.lineWidth = 1;\r\n    this.labelContext.fillText(\r\n      bbox.label,\r\n      this.currentScaleFactor * bbox.left,\r\n      this.currentScaleFactor * bbox.top + this.currentScaleFactor * bbox.height\r\n      + BOX_LINE_WIDTH + 20);\r\n    this.labelContext.strokeText(\r\n      bbox.label,\r\n      this.currentScaleFactor * bbox.left,\r\n      this.currentScaleFactor * bbox.top + this.currentScaleFactor * bbox.height\r\n      + BOX_LINE_WIDTH + 20);\r\n  }\r\n\r\n  rectangleDrawing() {\r\n    let rect = this.editLayerElement.getBoundingClientRect();\r\n    fromEvent(this.editLayerElement, \"mousedown\")\r\n      .pipe(\r\n        switchMap((e: MouseEvent) => {\r\n          rect = this.editLayerElement.getBoundingClientRect();\r\n          this.startX = e.clientX - rect.left;\r\n          this.startY = e.clientY - rect.top;\r\n          return fromEvent(this.editLayerElement, \"mousemove\").pipe(\r\n            takeUntil(fromEvent(this.editLayerElement, \"mouseup\")),\r\n            takeUntil(fromEvent(this.editLayerElement, \"mouseleave\"))\r\n          );\r\n        })\r\n      ).subscribe((event: MouseEvent) => {\r\n      const x = event.clientX - rect.left;\r\n      const y = event.clientY - rect.top;\r\n      this.width = x - this.startX;\r\n      this.height = y - this.startY;\r\n\r\n      this.setCanvasProperties(this.editContext, BOX_LINE_WIDTH, \"square\", EDIT_BOX_COLOR);\r\n      this.editContext.beginPath();\r\n      this.editContext.clearRect(0, 0, this.editLayerElement.width, this.editLayerElement.height);\r\n      this.editContext.rect(this.startX, this.startY, this.width, this.height);\r\n      this.editContext.stroke();\r\n    });\r\n  }\r\n\r\n  saveNewBox() {\r\n    if (!(this.width === 0 || this.height === 0)) {\r\n      const dialogConfig = this.dialogService.defaultConfig(\"470px\");\r\n      this.dialogRef = this.dialog.open(this.labelDialog, dialogConfig);\r\n      this.dialogRef.afterClosed().subscribe((val: boolean) => {\r\n        if (val && this.newLabel.length > 0) {\r\n          this.fixNegativeCoordinates();\r\n          this.coordinates[this.currentMode].push({\r\n            left: this.startX / this.currentScaleFactor,\r\n            top: this.startY / this.currentScaleFactor,\r\n            height: this.height / this.currentScaleFactor,\r\n            width: this.width / this.currentScaleFactor,\r\n            label: this.newLabel,\r\n          });\r\n          this.editContext.clearRect(0, 0, this.editLayerElement.width, this.editLayerElement.height);\r\n          this.newLabel = \"\";\r\n          this.width = 0;\r\n          this.height = 0;\r\n          if (this.displayBoxes) {\r\n            this.drawBoxes();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  close() {\r\n    this.newLabel = \"\";\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n  save() {\r\n    this.dialogRef.close(true);\r\n  }\r\n\r\n  private imageZoom() {\r\n    const img = this.sourceImage.nativeElement as HTMLImageElement;\r\n    const result = this.zoomDiv.nativeElement as HTMLDivElement;\r\n    // calculate ratio between result div and lens\r\n    const cx = result.offsetWidth / this.lensElement.offsetWidth;\r\n    const cy = result.offsetHeight / this.lensElement.offsetHeight;\r\n    // Set background properties for the result div\r\n    result.style.backgroundImage = \"url('\" + img.src + \"')\";\r\n    result.style.backgroundSize = (img.width * cx) + \"px \" + (img.height * cy) + \"px\";\r\n    // Execute a function when someone moves the cursor over the image or the lens\r\n    this.lensElement.addEventListener(\"mousemove\", moveLens);\r\n    this.zoomLayerElement.addEventListener(\"mousemove\", moveLens);\r\n\r\n    const parent = this;\r\n    // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\r\n    function moveLens(e) {\r\n      let x;\r\n      let y;\r\n      // Prevent any other actions that may occur when moving over the image\r\n      e.preventDefault();\r\n      // Get the cursor's x and y positions:\r\n      const pos = getCursorPos(e);\r\n      // Calculate the position of the lens:\r\n      x = pos.x - (parent.lensElement.offsetWidth / 2);\r\n      y = pos.y - (parent.lensElement.offsetHeight / 2);\r\n      // Prevent the lens from being positioned outside the image:\r\n      if (x > img.width - parent.lensElement.offsetWidth) {\r\n        x = img.width - parent.lensElement.offsetWidth;\r\n      }\r\n      if (x < 0) {\r\n        x = 0;\r\n      }\r\n      if (y > img.height - parent.lensElement.offsetHeight) {\r\n        y = img.height - parent.lensElement.offsetHeight;\r\n      }\r\n      if (y < 0) {\r\n        y = 0;\r\n      }\r\n      // Set the position of the lens:\r\n      parent.lensElement.style.left = x + \"px\";\r\n      parent.lensElement.style.top = y + \"px\";\r\n      // Display what the lens \"sees\":\r\n      result.style.backgroundPosition = \"-\" + (x * cx) + \"px -\" + (y * cy) + \"px\";\r\n    }\r\n    // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\r\n    function getCursorPos(e) {\r\n      let x = 0;\r\n      let y = 0;\r\n      // Get the x and y positions of the image\r\n      const a = img.getBoundingClientRect();\r\n      // Calculate the cursor's x and y coordinates, relative to the image:\r\n      x = e.pageX - a.left;\r\n      y = e.pageY - a.top;\r\n      // Consider any page scrolling\r\n      x = x - window.pageXOffset;\r\n      y = y - window.pageYOffset;\r\n      return {x, y};\r\n    }\r\n  }\r\n\r\n  private fixNegativeCoordinates() {\r\n    // in case the box is drawn from bottom right to top left: adjust negative width and height\r\n    if (this.width < 0) {\r\n      this.width = - this.width;\r\n      this.startX = this.startX - this.width;\r\n    }\r\n    if (this.height < 0) {\r\n      this.height = - this.height;\r\n      this.startY = this.startY - this.height;\r\n    }\r\n  }\r\n}\r\n","<div mat-dialog-title>\r\n<h5>{{data['parentText']}}</h5>\r\n</div>\r\n<mat-divider></mat-divider>\r\n<mat-dialog-content [formGroup]=\"form\">\r\n  {{data['textBefore']}}\r\n    <mat-form-field *ngIf=\"data.kind === 'text'\">\r\n      <input matInput type=\"text\" formControlName=\"text\" placeholder=\"{{data['value']}}\">\r\n    </mat-form-field>\r\n    <mat-form-field *ngIf=\"data.kind === 'number'\">\r\n      <input matInput type=\"number\" formControlName=\"number\" placeholder=\"{{data['value']}}\">\r\n    </mat-form-field>\r\n    <mat-form-field *ngIf=\"data.kind === 'date'\">\r\n      <input matInput type=\"text\" ngbDatepicker #d=\"ngbDatepicker\" container=\"body\"\r\n             (click)=\"d.toggle()\" formControlName=\"date\" placeholder=\"{{data['value']}}\" readonly/>\r\n    </mat-form-field>\r\n    <ng-container *ngIf=\"data.kind === 'ratio'\">\r\n      <mat-form-field>\r\n        <input #numerator matInput type=\"number\" formControlName=\"numerator\"/>\r\n      </mat-form-field> /\r\n      <mat-form-field>\r\n        <input #denominator matInput type=\"number\" formControlName=\"denominator\"/>\r\n      </mat-form-field>\r\n      = {{displayQuotient(numerator.value, denominator.value)}}\r\n    </ng-container>\r\n  {{data['textAfter']}}\r\n\r\n</mat-dialog-content>\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-actions class=\"buttons\">\r\n  <button class=\"btn btn-primary\" (click)=\"save()\">Speichern</button>\r\n  <button class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n</mat-dialog-actions>\r\n","import { Component, OnInit, Inject } from \"@angular/core\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\n\r\nimport {displayableQuotient} from \"@app/helpers\";\r\n\r\n@Component({\r\n  selector: \"app-modal\",\r\n  templateUrl: \"./inputModal.component.html\",\r\n  styleUrls: [\"./inputModal.component.scss\"]\r\n})\r\nexport class InputModalComponent implements OnInit {\r\n\r\n  form: FormGroup;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<InputModalComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.fb.group({\r\n      text: \"\",\r\n      number: null,\r\n      date: null,\r\n      numerator: null,\r\n      denominator: null\r\n    });\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n  checkForm(): boolean {\r\n    const value = this.form.value;\r\n    return !!(value.text || value.number || value.date || (value.numerator && value.denominator));\r\n  }\r\n\r\n  save() {\r\n    if(this.checkForm()) {\r\n      this.dialogRef.close(this.form.value);\r\n    } else {\r\n      this.dialogRef.close(false);\r\n    }\r\n  }\r\n\r\n  displayQuotient(numerator, denominator) {\r\n    return displayableQuotient(numerator as number,\r\n      denominator as number, this.data[\"fractionDigits\"]);\r\n  }\r\n\r\n}\r\n","<table>\r\n  <tbody>\r\n    <tr *ngFor=\"let row of rows\">\r\n      <td class=\"category\"\r\n          [style.width.%]=\"10\"\r\n          [ngStyle]=\"{'color': row.optional ? 'grey' : 'black'}\">{{row.name}}</td>\r\n      <ng-container *ngFor=\"let sel of row.selectables\" class=\"col-3\">\r\n        <ng-container *ngIf=\"sel.kind === 'box'\">\r\n          <td class=\"box\">\r\n            <input type=\"checkbox\" [(ngModel)]=\"sel.value\"\r\n                   (click)=\"update(sel)\" id=\"{{row.name}} {{sel.name}} box\"/>\r\n          </td>\r\n          <td class=\"title\" [style.width.%]=\"width\">\r\n            <label [ngClass]=\"{'selected': sel.value}\"\r\n                   for=\"{{row.name}} {{sel.name}} box\">\r\n              {{sel.name}}\r\n            </label>\r\n          </td>\r\n          <app-variables *ngIf=\"sel.variables.length > 0\"\r\n                         (clickEvent)=\"updateFromVariable(sel)\"\r\n                         [variables]=\"sel.variables\"\r\n                         [parentText]=\"sel.name\"\r\n                         [parentActive]=\"sel.value\"></app-variables>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"sel.kind === 'group'\">\r\n          <ng-container *ngFor=\"let option of sel.options\">\r\n            <td class=\"radio box\">\r\n              <input type=\"radio\"\r\n                     id=\"{{row.name}} {{sel.name + option.name}} box\"\r\n                     (click)=\"update(sel, option.name)\"\r\n                     [name]=\"sel.name\"\r\n                     [value]=\"option.name\"\r\n                     [(ngModel)]=\"sel.value\"/>\r\n            </td>\r\n            <td class=\"title\" [style.width.%]=\"width\">\r\n              <label for=\"{{row.name}} {{sel.name + option.name}} box\"\r\n                     [ngClass]=\"{'selected': (option.name === sel.value)}\">\r\n                {{option.name}}\r\n              </label>\r\n            </td>\r\n            <app-variables *ngIf=\"option.variables.length > 0\"\r\n                           (clickEvent)=\"updateFromVariable(option, sel)\"\r\n                           [variables]=\"option.variables\"\r\n                           [parentText]=\"option.name\"\r\n                           [parentActive]=\"option.name === sel.value\"></app-variables>\r\n          </ng-container>\r\n        </ng-container>\r\n      </ng-container>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n","import {Component, Input, OnInit, Output, EventEmitter} from \"@angular/core\";\r\n\r\nimport {DataParserService} from \"@app/core\";\r\n\r\nimport * as M from \"@app/models/templateModel\";\r\n\r\n@Component({\r\n  selector: \"app-options\",\r\n  templateUrl: \"./options.component.html\",\r\n  styleUrls: [\"./options.component.scss\"]\r\n})\r\nexport class OptionsComponent implements OnInit {\r\n\r\n  @Input() categories: M.Category[];\r\n\r\n  // TODO Make these configurable\r\n\r\n  minRowLength = 1;\r\n  maxRowLength: number;\r\n  width: number;\r\n  rows: M.Category[];\r\n\r\n  @Output() clickEvent = new EventEmitter<any>();\r\n\r\n  constructor(private dataParser: DataParserService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.setMinRowLength(this.categories);\r\n    this.maxRowLength = 6;\r\n    this.determineWidth();\r\n    this.initRows();\r\n  }\r\n\r\n  initRows() {\r\n    if (this.minRowLength > this.maxRowLength) {\r\n      window.alert(\"Die gewählte Reihenlänge von \" + this.maxRowLength +\r\n        \" ist kleiner als die kleinstmögliche Länge von \" + this.minRowLength +\r\n        \". Die Reihenlänge wird auf \" + this.minRowLength + \" gesetzt.\");\r\n      this.maxRowLength = this.minRowLength;\r\n    }\r\n    this.rows = this.dataParser.extractRows(this.categories, this.maxRowLength);\r\n  }\r\n\r\n  setMinRowLength(cats: M.Category[]) {\r\n    let minRowLength = 1;\r\n    for (const cat of cats) {\r\n      for (const sel of cat.selectables) {\r\n        if (sel.kind === \"group\") {\r\n          if (sel.options.length > minRowLength) {\r\n            minRowLength = sel.options.length;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.minRowLength = minRowLength;\r\n  }\r\n\r\n  update(sel: M.Selectable, option?: string) {\r\n    if (sel.kind === \"group\") {\r\n      if (sel.value === option) {\r\n        sel.value = null;\r\n      }\r\n    }\r\n    this.clickEvent.emit();\r\n  }\r\n\r\n  updateFromVariable(parent: M.Clickable, group?: M.Group) {\r\n    if (parent.kind === \"box\") {\r\n      parent.value = true;\r\n    } else {\r\n      if (group === undefined) {\r\n        Error(\"Something went wrong here\");\r\n      } else {\r\n        group.value = parent.name;\r\n      }\r\n    }\r\n    this.clickEvent.emit();\r\n  }\r\n\r\n  private determineWidth() {\r\n    this.width = 88 / this.maxRowLength;\r\n  }\r\n}\r\n","import {Component, OnInit, Input} from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-report\",\r\n  templateUrl: \"./report.component.html\",\r\n  styleUrls: [\"./report.component.scss\"]\r\n})\r\nexport class ReportComponent implements OnInit {\r\n\r\n  @Input() report: string;\r\n  @Input() judgement: string;\r\n\r\n  disclaimer: string;\r\n\r\n  constructor() { }\r\n\r\n  // TODO: make download button\r\n  // TODO: Send change event to layout so changes in report are reflected in data structure\r\n\r\n  ngOnInit() {\r\n    this.disclaimer = \"Dieser Bericht wurde mit Hilfe eines sprachgesteuerten Browsertools aus Textbausteinen erstellt.\";\r\n  }\r\n\r\n  copyText(inputElement: HTMLTextAreaElement) {\r\n    inputElement.select();\r\n    document.execCommand(\"copy\");\r\n    inputElement.setSelectionRange(0, 0);\r\n  }\r\n\r\n  copyAll() {\r\n    let fullText: string;\r\n    fullText = this.report + \"\\n\\n\" + this.disclaimer + \"\\n\\n\\n\" + this.judgement + \"\\n\\n\" + this.disclaimer;\r\n    const selBox = document.createElement(\"textarea\");\r\n    selBox.value = fullText;\r\n    document.body.append(selBox);\r\n    selBox.focus();\r\n    selBox.select();\r\n    document.execCommand(\"copy\");\r\n    document.body.removeChild(selBox);\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"button\">\r\n  <button id=\"copy-button\" (click)=\"copyAll()\" class=\"btn btn-outline-secondary\">Kopieren</button>\r\n</div>\r\n\r\n<div class=\"report-text\">\r\n  <label for=\"report\"></label>\r\n  <textarea placeholder=\"Wenn Sie hier etwas eingeben, wird es bei der Berichtserstellung überschrieben\"\r\n            id=\"report\" class=\"w-100\" [(ngModel)]=\"report\" #textContent ></textarea>\r\n</div>\r\n\r\n<div class=\"judgement-text\">\r\n    <label for=\"judgement\"></label>\r\n\t\t<textarea placeholder=\"Wenn Sie hier etwas eingeben, wird es bei der Beurteilungsgenerierung überschrieben\"\r\n              id=\"judgement\" class=\"w-100\" [(ngModel)]=\"judgement\"></textarea>\r\n</div>\r\n\r\n\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { MatDialogModule } from \"@angular/material/dialog\";\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { MatDividerModule } from \"@angular/material/divider\";\r\nimport { MatInputModule } from \"@angular/material/input\";\r\nimport { MatRadioModule } from \"@angular/material/radio\";\r\nimport { MatTooltipModule } from \"@angular/material/tooltip\";\r\nimport { MatProgressBarModule } from \"@angular/material/progress-bar\";\r\nimport { NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\n\r\nimport { ConfirmDialogComponent } from \"@app/shared/confirm-dialog/confirm-dialog.component\";\r\nimport { InputModalComponent } from \"@app/shared/inputModal/inputModal.component\";\r\nimport { OptionsComponent } from \"@app/shared/options/options.component\";\r\nimport { ReportComponent } from \"@app/shared/report/report.component\";\r\nimport { UploadComponent } from \"@app/shared/upload/upload.component\";\r\nimport { UploadMaterialComponent } from \"@app/shared/upload-material/upload-material.component\";\r\nimport { VariablesComponent } from \"@app/shared/variables/variables.component\";\r\nimport { ImageDisplayComponent } from \"@app/shared/image-display/image-display.component\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ConfirmDialogComponent,\r\n    InputModalComponent,\r\n    OptionsComponent,\r\n    ReportComponent,\r\n    UploadComponent,\r\n    UploadMaterialComponent,\r\n    VariablesComponent,\r\n    ImageDisplayComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatDialogModule,\r\n    MatDividerModule,\r\n    MatInputModule,\r\n    MatTooltipModule,\r\n    MatRadioModule,\r\n    MatProgressBarModule,\r\n    NgbModule\r\n  ],\r\n  exports: [\r\n    ConfirmDialogComponent,\r\n    InputModalComponent,\r\n    OptionsComponent,\r\n    ReportComponent,\r\n    UploadComponent,\r\n    UploadMaterialComponent,\r\n    VariablesComponent,\r\n    ImageDisplayComponent\r\n  ],\r\n})\r\nexport class SharedModule { }\r\n","<div mat-dialog-title class=\"header\">\r\n  <h4>Aufnahmen hochladen</h4>\r\n</div>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-content class=\"uploadForm\" [formGroup]=\"uploadForm\" (ngSubmit)=\"submit()\">\r\n    <table class=\"files\">\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"identifier\">Identifier: </label></td>\r\n        <td class=\"button\"><input #identifierInput (change)=\"updateIdentifier(identifierInput.value)\" matTooltip=\"String-Pattern für Bildzuordnung eingeben.\r\n        Variable Ziffern mit * kennzeichnen.\"\r\n          type=\"text\" id=\"identifier\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"mainScans\">Frontalaufnahme(n): </label></td>\r\n        <td class=\"button\">\r\n          <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"fileInput1.click()\">Datei(en) auswählen</button>\r\n          <input hidden class=\"mr-3\" type=\"file\" multiple=\"multiple\" id=\"mainScans\" #fileInput1\r\n                 (change)=\"onFileSelect($event, 'mainScans')\"/></td>\r\n        <td class=\"button\">\r\n          <select class=\"dropdown\" id=\"mainImageFiles\" name=\"mainImageFiles\"\r\n                  [ngStyle]=\"{'background-color': (mainFlags.includes(false)) ? 'red' : 'white'}\"\r\n                  [disabled]=\"this.uploadForm.get('mainScans').value.length === 0\">\r\n            <option>Dateien</option>\r\n            <ng-container *ngFor=\"let file of this.uploadForm.get('mainScans').value; index as i\">\r\n              <option disabled [ngStyle]=\"{'background-color': (mainFlags[i] ? 'white' : 'red')}\">{{file.name}}</option>\r\n            </ng-container>\r\n          </select>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"lateralScans\">Lateralaufnahme(n): </label></td>\r\n        <td class=\"button\">\r\n          <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"fileInput2.click()\">Datei(en) auswählen</button>\r\n          <input hidden type=\"file\" multiple=\"multiple\" id=\"lateralScans\" #fileInput2\r\n                 (change)=\"onFileSelect($event,'lateralScans')\"/></td>\r\n        <td class=\"button\">\r\n          <select class=\"dropdown\" id=\"lateralImageFiles\" name=\"lateralImageFiles\"\r\n                  [ngStyle]=\"{'background-color': (lateralRedFlags.includes(false)) ? 'red' :\r\n                            (lateralYellowFlags.includes(false)) ? 'yellow' : 'white'}\"\r\n                  [disabled]=\"this.uploadForm.get('lateralScans').value.length === 0\">\r\n            <option>Dateien</option>\r\n            <ng-container *ngFor=\"let file of this.uploadForm.get('lateralScans').value; index as i\">\r\n              <option disabled [ngStyle]=\"{'background-color': !lateralRedFlags[i] ? 'red':\r\n                                              !lateralYellowFlags[i] ? 'yellow' : 'white'}\">\r\n                {{file.name}}</option>\r\n            </ng-container>\r\n          </select>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"preImageFile\">Voraufnahme(n): </label></td>\r\n        <td class=\"button\">\r\n          <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"fileInput3.click()\">Datei(en) auswählen</button>\r\n          <input hidden type=\"file\" multiple=\"multiple\" id=\"preImageFile\" #fileInput3\r\n                 (change)=\"onFileSelect($event,'preScans')\"/>\r\n        </td>\r\n        <td class=\"button\">\r\n          <select class=\"dropdown\" id=\"preImageFiles\" name=\"preImageFiles\"\r\n                  [ngStyle]=\"{'background-color': (preRedFlags.includes(false)) ? 'red' :\r\n                            (preYellowFlags.includes(false)) ? 'yellow' : 'white'}\"\r\n                  [disabled]=\"this.uploadForm.get('preScans').value.length === 0\">\r\n            <option>Dateien</option>\r\n            <ng-container *ngFor=\"let file of this.uploadForm.get('preScans').value; index as i\">\r\n              <option disabled [ngStyle]=\"{'background-color': !preRedFlags[i] ? 'red':\r\n                                              !preYellowFlags[i] ? 'yellow' : 'white'}\">\r\n                {{file.name}}</option>\r\n            </ng-container>\r\n          </select>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n\r\n    <mat-divider></mat-divider>\r\n\r\n  <div class=\"templateSelect\">\r\n    <h5>Schablone auswählen:</h5>\r\n    <mat-radio-group class=\"verticalRadioGroup\" formControlName=\"template\">\r\n      <ng-container *ngFor=\"let template of templates\">\r\n        <mat-radio-button style=\"font-size: 120%\" value=\"{{stringify(template)}}\">\r\n          {{template.name}}\r\n        </mat-radio-button>\r\n      </ng-container>\r\n    </mat-radio-group>\r\n  </div>\r\n\r\n  <ng-container *ngIf=\"uploading\">\r\n    <mat-progress-bar mode=\"determinate\" value=\"{{progress}}\"></mat-progress-bar>\r\n    <div class=\"alert\" *ngFor=\"let message of messages\">{{message}}</div>\r\n  </ng-container>\r\n\r\n</mat-dialog-content>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-actions class=\"buttons\">\r\n  <button type=\"submit\" id=\"submitButton\" class=\"btn btn-primary\"\r\n          [disabled]=\"uploadForm.invalid\"\r\n          (click)=\"submit()\">Hochladen</button>\r\n  <button id=\"cancelButton\" class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n</mat-dialog-actions>\r\n\r\n\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport {FormControl, FormGroup, Validators} from \"@angular/forms\";\r\nimport {nanoid} from \"nanoid\";\r\nimport {MatDialogRef} from \"@angular/material/dialog\";\r\n\r\nimport * as M from \"@app/models/templateModel\";\r\nimport {BackendCallerService, FilesSortingService} from \"@app/core\";\r\n\r\n@Component({\r\n  selector: \"app-upload-material\",\r\n  templateUrl: \"./upload-material.component.html\",\r\n  styleUrls: [\"./upload-material.component.scss\"]\r\n})\r\nexport class UploadMaterialComponent implements OnInit {\r\n\r\n  uploadForm: FormGroup;\r\n  templates: M.Template[];\r\n\r\n  mainFlags: boolean[] = [];\r\n  lateralRedFlags: boolean[] = [];\r\n  lateralYellowFlags: boolean[] = [];\r\n  preRedFlags: boolean[] = [];\r\n  preYellowFlags: boolean[] = [];\r\n\r\n  supportedFileTypes = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\r\n  progress = 0;\r\n  uploading = false;\r\n  messages: string[] = [];\r\n\r\n  constructor(private backendCaller: BackendCallerService,\r\n              private dialogRef: MatDialogRef<UploadMaterialComponent>,\r\n              private filesSorter: FilesSortingService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initForm();\r\n    this.updateTemplateList();\r\n  }\r\n\r\n  initForm() {\r\n    this.uploadForm = new FormGroup({\r\n      mainScans: new FormControl([], {validators: [Validators.required]}),\r\n      lateralScans: new FormControl([]),\r\n      preScans: new FormControl([]),\r\n      template: new FormControl(null, {validators: [Validators.required]})\r\n    });\r\n  }\r\n\r\n  updateTemplateList(): void {\r\n    this.backendCaller.getTemplateList().subscribe((templates) => {\r\n      this.templates = templates;\r\n    });\r\n  }\r\n\r\n  stringify(dict) {\r\n    return JSON.stringify(dict);\r\n  }\r\n\r\n  updateIdentifier(id: string) {\r\n    this.filesSorter.setIdentifier(id);\r\n    this.flagFiles();\r\n  }\r\n\r\n  onFileSelect(event, scanType: string) {\r\n    if (event.target.files.length > 0) {\r\n      const files = event.target.files;\r\n      if (this.fileFilter(files)) {\r\n        this.uploadForm.get(scanType).setValue(Array.from(files));\r\n        this.flagFiles();\r\n      }\r\n    }\r\n  }\r\n\r\n  fileFilter(files: File[]): boolean {\r\n    for (const file of files) {\r\n      if (!(this.supportedFileTypes.includes(file.type))) {\r\n        window.alert(\"Die Datei \" + file.name + \" besitzt ein nicht unterstütztes Dateiformat. Bitte nur PNG oder JPEG hochladen.\");\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  flagFiles(): void {\r\n    const mainFiles: File[] = this.uploadForm.get(\"mainScans\").value;\r\n    const lateralFiles: File[] = this.uploadForm.get(\"lateralScans\").value;\r\n    const preFiles: File[] = this.uploadForm.get(\"preScans\").value;\r\n\r\n    this.mainFlags = this.filesSorter.identifierSearch(mainFiles);\r\n    this.lateralRedFlags = this.filesSorter.identifierSearch(lateralFiles);\r\n    this.preRedFlags = this.filesSorter.identifierSearch(preFiles);\r\n\r\n    this.lateralYellowFlags = this.filesSorter.fileMatchSearch(mainFiles, lateralFiles);\r\n    this.preYellowFlags = this.filesSorter.fileMatchSearch(mainFiles, preFiles);\r\n  }\r\n\r\n  submit(): void {\r\n    this.uploading = true;\r\n    let choice = true;\r\n    if (this.mainFlags.includes(false) || this.lateralYellowFlags.includes(false) || this.lateralRedFlags.includes(false)\r\n    || this.preYellowFlags.includes(false) || this.preRedFlags.includes(false)) {\r\n      choice = window.confirm(\"Eine oder mehre Dateien konnten nicht korrekt zugeordnet werden. \" +\r\n        \"Diese werden beim Upload ignoriert. Sind Sie sicher, dass Sie fortfahren möchten?\");\r\n    }\r\n\r\n    if (choice) {\r\n      const mainScans = this.uploadForm.get(\"mainScans\").value;\r\n      const lateralScans = this.uploadForm.get(\"lateralScans\").value;\r\n      const preScans = this.uploadForm.get(\"preScans\").value;\r\n\r\n      const fileTuples: [File, File, File][] = this.filesSorter.getFileTuples(mainScans, lateralScans, preScans);\r\n\r\n      for (const fileTuple of fileTuples) {\r\n        const formData = new FormData();\r\n        formData.append(\"template\", this.uploadForm.get(\"template\").value);\r\n        // TODO: Add choice for this later\r\n        formData.append(\"modality\", \"xray\");\r\n        formData.append(\"id\", nanoid());\r\n        formData.append(\"mainScan\", fileTuple[0]);\r\n        formData.append(\"lateralScan\", fileTuple[1]);\r\n        formData.append(\"preScan\", fileTuple[2]);\r\n\r\n        this.backendCaller.addMaterial(formData).subscribe( result => {\r\n          this.progress += 100/(fileTuples.length);\r\n          if (result.success === false) {\r\n            this.messages.push(fileTuple[0].name + \": \" + result.message);\r\n          }\r\n        });\r\n      }\r\n      setTimeout(() => this.close(), 2000);\r\n    } else {\r\n      this.uploading = false;\r\n    }\r\n\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","<div mat-dialog-title class=\"header\">\r\n    <h5>Schablone hochladen</h5>\r\n</div>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-content [formGroup]=\"uploadForm\">\r\n  <div>\r\n    <table class=\"files\">\r\n      <tr>\r\n        <td><label class=\"mr-3\" for=\"NameOfFile\">Name: </label></td>\r\n        <td><input class=\"mr-3 inputField\" type=\"text\" name=\"name\" id=\"NameOfFile\" formControlName=\"name\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td><label class=\"mr-3\" for=\"filename\">Datei: </label></td>\r\n        <td><input readonly\r\n                   [value]=\"(currentFile === null || currentFile === undefined) ? null : currentFile.name\"\r\n                   class=\"mr-3 inputField\" type=\"text\" id=\"filename\"></td>\r\n        <td>\r\n          <button class=\"btn btn-outline-primary\" (click)=\"inputField.click()\" id=\"UploadButton\">Durchsuchen...</button>\r\n          <input hidden #inputField class=\"mr-3\"\r\n                 type=\"file\" id=\"uploadFile\" formControlName=\"filename\"\r\n                 (change)=\"onFileSelect($event)\">\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td></td>\r\n        <td><span *ngIf=\"this.showWarning\" class=\"alert-warning\">Dateityp nicht unterstützt.</span></td>\r\n      </tr>\r\n    </table>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-actions class=\"buttons\">\r\n  <button id=\"submitButton\" class=\"btn btn-primary\" (click)=\"upload()\">Hochladen</button>\r\n  <button id=\"cancelButton\" class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n</mat-dialog-actions>\r\n","import {Component, OnInit} from \"@angular/core\";\r\nimport {MatDialogRef} from \"@angular/material/dialog\";\r\nimport {FormControl, FormGroup, Validators} from \"@angular/forms\";\r\n\r\nimport {BackendCallerService} from \"@app/core\";\r\nimport {getFileExtension} from \"@app/helpers\";\r\n\r\n@Component({\r\n  selector: \"app-upload\",\r\n  templateUrl: \"./upload.component.html\",\r\n  styleUrls: [\"./upload.component.scss\"]\r\n})\r\nexport class UploadComponent implements OnInit {\r\n  currentFile: File;\r\n  showWarning = false;\r\n  uploadForm: FormGroup;\r\n\r\n  constructor(private dialogRef: MatDialogRef<UploadComponent>,\r\n              private backendCaller: BackendCallerService) { }\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n  }\r\n\r\n  initForm() {\r\n    this.uploadForm = new FormGroup({\r\n      name: new FormControl(null, {\r\n        validators: [Validators.required, Validators.minLength(3)]\r\n      }),\r\n      file: new FormControl(null, {validators: [Validators.required]}),\r\n      filename: new FormControl(null, {validators: [Validators.required]})\r\n    });\r\n  }\r\n\r\n  onFileSelect(event) {\r\n    if (event.target.files.length > 0) {\r\n      this.currentFile = event.target.files[0];\r\n      this.checkFileExtension(this.currentFile);\r\n      this.uploadForm.get(\"file\").setValue(this.currentFile);\r\n    }\r\n  }\r\n\r\n  checkFileExtension(file: File) {\r\n    this.showWarning = false;\r\n    const extension = getFileExtension(file.name);\r\n    if (!(extension === \"xlsx\" || extension === \"json\")) {\r\n      this.showWarning = true;\r\n    }\r\n  }\r\n\r\n  upload() {\r\n    const extension = getFileExtension(this.uploadForm.value.file.name);\r\n    const postData = new FormData();\r\n    postData.append(\"name\", this.uploadForm.value.name);\r\n    postData.append(\"file\", this.uploadForm.value.file);\r\n    if (extension === \"xlsx\") {\r\n      // this.templateManager.addExcel(postData);\r\n    } else if (extension === \"json\") {\r\n      this.backendCaller.addTemplateFromJSON(postData).subscribe((res) => {\r\n        window.alert(res.message);\r\n        this.uploadForm.reset();\r\n        this.currentFile = null;\r\n        this.close();\r\n      });\r\n    } else {\r\n      window.alert(\"Nicht unterstützter Dateityp! Datei muss .xlsx oder .json sein.\");\r\n      this.uploadForm.reset();\r\n      this.currentFile = null;\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  /*\r\n  upload(): void {\r\n    this.timesService.addTimeStamp(new Date());\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL((document.getElementById(\"uploadFile\") as HTMLInputElement).files[0]);\r\n    reader.onload = () => {\r\n      const dat = new Date();\r\n      const base64 = (reader.result as string).replace(/^.*?base64,/, \"\");\r\n      const data = { name: this.name + \" \" + dat.getDate() + \" \" + this.months[dat.getMonth()] + \" \" + dat.getFullYear() , data: base64 };\r\n      this.http.post(environment.urlRootScala + \"upload\", data, { \"observe\": \"response\" } ).subscribe((result) => {\r\n        window.alert(\"Upload Erfolgreich\");\r\n        this.router.navigate([\"list\"]);\r\n\r\n      }, (error) => {\r\n        if (error instanceof ErrorEvent) {\r\n          window.alert(\"an unknown error has occurred\");\r\n        } else {\r\n          window.alert(\"parsing failure: \" + (error as any).error);\r\n        }\r\n      });\r\n    };\r\n    reader.onerror = (error) => {\r\n      window.alert(\"The following error occurred:\\n\" + error);\r\n    };\r\n  }\r\n*/\r\n}\r\n","<table class=\"variables\">\r\n  <ng-container *ngFor=\"let variable of this.variables\">\r\n    <tr>\r\n      <td *ngIf=\"variable.kind === 'oc'\">\r\n          {{variable.textBefore}}\r\n\t        (<ng-container *ngFor=\"let val of variable.values; let last=last\">\r\n\t\t        <input type=\"radio\" id=\"{{variable.id}}+{{val}}\"  name=\"{{variable.id}}\"\r\n                   [value]=\"val\" [(ngModel)]=\"variable.value\"\r\n                   (click)=\"clicked(variable, val)\"/>\r\n            <label for=\"{{variable.id}}+{{val}}\"\r\n                   [ngClass]=\"{'selected': (val === variable.value && parentActive)}\">{{val}}</label>\r\n            <ng-container *ngIf=\"!last\">/</ng-container>\r\n\t        </ng-container>) {{variable.textAfter}}\r\n      </td>\r\n\r\n      <td *ngIf=\"variable.kind === 'mc'\">\r\n        {{variable.textBefore}}\r\n\t        [<ng-container *ngFor=\"let val of variable.values; let last=last\">\r\n\t\t        <input type=\"checkbox\" id=\"{{variable.id}}+{{val[0]}}\" name=\"{{variable.id}}\"\r\n                   [value]=\"val[0]\" [(ngModel)]=\"val[1]\" (click)=\"clicked(variable)\"/>\r\n            <label for=\"{{variable.id}}+{{val[0]}}\"\r\n                   [ngClass]=\"{'selected': (val[1] && parentActive)}\">{{val[0]}}</label>\r\n            <ng-container *ngIf=\"!last\">/</ng-container>\r\n\t        </ng-container>] {{variable.textAfter}}\r\n      </td>\r\n\r\n      <td *ngIf=\"variable.kind === 'text' || variable.kind === 'number'\r\n      || variable.kind === 'date' || variable.kind === 'ratio'\">\r\n        {{variable.textBefore}}\r\n        <button class=\"modal-button\"\r\n                [ngClass]=\"{'selected': (hasButtonBeenClickedOnce[variable.id] && parentActive)}\"\r\n                id=\"{{variable.id}} btn\" (click)=\"submit(variable)\">{{parseButtonText(variable)}}</button>\r\n        {{variable.textAfter}}\r\n      </td>\r\n    </tr>\r\n  </ng-container>\r\n</table>\r\n","import {Component, Input, OnInit, Output, EventEmitter} from \"@angular/core\";\r\nimport {Variable} from \"@app/models\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {NgbDateStruct} from \"@ng-bootstrap/ng-bootstrap\";\r\nimport {displayableQuotient} from \"@app/helpers\";\r\nimport {MatDialogService} from \"@app/core\";\r\n\r\nimport {InputModalComponent} from \"../inputModal/inputModal.component\";\r\n\r\n@Component({\r\n  selector: \"app-variables\",\r\n  templateUrl: \"./variables.component.html\",\r\n  styleUrls: [\"./variables.component.scss\"]\r\n})\r\nexport class VariablesComponent implements OnInit {\r\n\r\n  @Input() variables: Variable[];\r\n  @Input() parentText: string;\r\n  @Input() parentActive: boolean;\r\n\r\n  @Output() clickEvent = new EventEmitter<any>();\r\n\r\n  hasButtonBeenClickedOnce: Map<string, boolean> = new Map();\r\n\r\n  constructor(private dialog: MatDialog,\r\n              private dialogService: MatDialogService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initButtonClickedMap();\r\n  }\r\n\r\n  initButtonClickedMap() {\r\n    for (const variable of this.variables) {\r\n      if (variable.kind === \"text\" || variable.kind === \"number\" ||\r\n        variable.kind === \"date\" || variable.kind === \"ratio\") {\r\n        this.hasButtonBeenClickedOnce[variable.id] = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  parseButtonText(variable: Variable) {\r\n    if (!this.hasButtonBeenClickedOnce[variable.id] || !this.parentActive) {\r\n      return \".....\";\r\n    } else if (variable.kind === \"text\" || variable.kind === \"number\") {\r\n      return variable.value;\r\n    } else if (variable.kind === \"date\") {\r\n      return variable.value.day + \".\" + variable.value.month + \".\" + variable.value.year;\r\n    } else if (variable.kind === \"ratio\") {\r\n      return displayableQuotient(variable.numerator,\r\n        variable.denominator, variable.fractionDigits);\r\n    }\r\n  }\r\n\r\n  clicked(variable: Variable, value?: string) {\r\n    if (variable.kind === \"oc\") {\r\n      if (variable.value === value) {\r\n        variable.value = null;\r\n      }\r\n    }\r\n    this.clickEvent.emit();\r\n  }\r\n\r\n  async submit(variable: Variable) {\r\n    const response = await this.modalInput(variable);\r\n    if (response) {\r\n      this.hasButtonBeenClickedOnce[variable.id] = true;\r\n      this.clickEvent.emit();\r\n    }\r\n  }\r\n\r\n  modalInput(variable: Variable) {\r\n    const dialogConfig = this.dialogService.defaultConfig();\r\n\r\n    dialogConfig.data = {\r\n      kind: variable.kind,\r\n      textBefore: variable.textBefore,\r\n      textAfter: variable.textAfter,\r\n      parentText: this.parentText,\r\n    };\r\n    if (variable.kind === \"ratio\") {\r\n      dialogConfig.data[\"denominator\"] = variable.denominator;\r\n      dialogConfig.data[\"numerator\"] = variable.numerator;\r\n      dialogConfig.data[\"fractionDigits\"] = variable.fractionDigits;\r\n    } else if (variable.kind === \"text\" || variable.kind === \"number\") {\r\n      dialogConfig.data[\"value\"] = variable.value;\r\n    } else if (variable.kind === \"date\") {\r\n      dialogConfig.data[\"value\"] = variable.value.year.toString() + \"-\" +\r\n        variable.value.month.toString() + \"-\" + variable.value.day.toString();\r\n    }\r\n\r\n    const dialogRef = this.dialog.open(InputModalComponent, dialogConfig);\r\n\r\n    return dialogRef.afterClosed()\r\n      .toPromise()\r\n      .then(response => {\r\n        if (!response) {\r\n          return Promise.resolve(false);\r\n        } else {\r\n          this.assignValues(variable, response);\r\n          return Promise.resolve(true);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  assignValues(variable: Variable, input): void {\r\n    // TODO: check if response is valid\r\n    if (variable.kind === \"text\") {\r\n        variable.value = input.text;\r\n    } else if (variable.kind === \"date\") {\r\n      variable.value = (input.date as NgbDateStruct);\r\n    } else if (variable.kind === \"number\") {\r\n      variable.value = input.number as number;\r\n    } else if (variable.kind === \"ratio\") {\r\n      variable.numerator = input.numerator as number;\r\n      variable.denominator = input.denominator as number;\r\n    }\r\n  }\r\n\r\n\r\n\r\n}\r\n","import { Component, OnInit } from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-admin\",\r\n  templateUrl: \"./admin.component.html\",\r\n  styleUrls: [\"./admin.component.css\"]\r\n})\r\nexport class AdminComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>admin works!</p>\r\n","<nav class=\"navbar navbar-expand-lg navbar-light bg-light\"  *ngIf=\"displayNavbar\">\r\n  <a class=\"navbar-brand\" href=\"#\">{{title}}  <fa-icon class=\"ml-1\" [icon]=\"faUser\"></fa-icon></a>\r\n  <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\"\r\n          aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n    <span class=\"navbar-toggler-icon\"></span>\r\n  </button>\r\n\r\n  <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n    <ul class=\"navbar-nav mr-auto\">\r\n      <li class=\"nav-item\" routerLinkActive='active'>\r\n        <a class=\"nav-link\" routerLink='/list'>Schablonen</a>\r\n      </li>\r\n      <li class=\"nav-item\" routerLinkActive='active'>\r\n        <a class=\"nav-link\" routerLink='/listMat' *ngIf=\"(isMod)\">Aufnahmen befunden</a>\r\n      </li>\r\n      <li class=\"nav-item\" routerLinkActive='active'>\r\n        <a class=\"nav-link\" routerLink='/'>Radiolearn</a>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"navbar-nav ms-auto\">\r\n      <li class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/admin\" *ngIf=\"(isAdmin)\">Admin</a>\r\n      </li>\r\n      <li class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/manageAccount\">Account Management</a>\r\n      </li>\r\n      <li class=\"nav-item\">\r\n        <a class=\"nav-link\" style=\"cursor: pointer;\" (click)=\"logout()\">Logout</a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n\r\n</nav>\r\n","import {Component, DoCheck, OnInit} from \"@angular/core\";\r\nimport { faLaptopMedical } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport { DisplayService, AuthenticationService } from \"@app/core\";\r\nimport {Role, User} from \"@app/models\";\r\n\r\n@Component({\r\n  selector: \"app-header\",\r\n  templateUrl: \"./header.component.html\",\r\n  styleUrls: [\"./header.component.scss\"]\r\n})\r\nexport class HeaderComponent implements OnInit, DoCheck {\r\n\r\n\r\n  displayNavbar: boolean;\r\n  title = \"RadioSpeech\";\r\n  faUser: any;\r\n\r\n  private user: User;\r\n\r\n  constructor(private displayService: DisplayService,\r\n              private authenticationService: AuthenticationService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n    this.displayNavbar = true;\r\n    this.faUser = faLaptopMedical;\r\n  }\r\n\r\n  ngDoCheck(): void {\r\n    this.displayService.updateDisplay();\r\n    this.displayNavbar = this.displayService.displayHeader;\r\n  }\r\n\r\n  get isMod() {\r\n    return this.user && (this.user.role === Role.Admin || this.user.role === Role.Moderator);\r\n  }\r\n\r\n  get isAdmin() {\r\n    return this.user && this.user.role === Role.Admin;\r\n  }\r\n\r\n  logout() {\r\n    this.authenticationService.logout();\r\n  }\r\n\r\n}\r\n","<div class=\"col-md-6 offset-md-3 mt-5\">\r\n  <div class=\"card\">\r\n    <h4 class=\"card-header\">RadioSpeech - Login</h4>\r\n    <div class=\"card-body\">\r\n      <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">Nutzername</label>\r\n          <input id=\"username\" type=\"text\" formControlName=\"username\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && f.username.errors }\" />\r\n          <div *ngIf=\"submitted && f.username.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"f.username.errors.required\">Nutzername ist erforderlich</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Passwort</label>\r\n          <input id=\"password\" type=\"password\" formControlName=\"password\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && f.password.errors }\" />\r\n          <div *ngIf=\"submitted && f.password.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"f.password.errors.required\">Passwort ist erforderlich</div>\r\n          </div>\r\n        </div>\r\n        <button [disabled]=\"loading\" class=\"btn btn-primary\">\r\n          <span *ngIf=\"loading\" class=\"spinner-border spinner-border-sm mr-1\"></span>\r\n          Login\r\n        </button>\r\n        <div *ngIf=\"error\" class=\"alert alert-danger mt-3 mb-0\">{{error}}</div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { Router, ActivatedRoute } from \"@angular/router\";\r\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\nimport { first } from \"rxjs/operators\";\r\n\r\nimport {AuthenticationService} from \"@app/core/services/authentication.service\";\r\n\r\n@Component({\r\n  selector: \"app-login\",\r\n  templateUrl: \"./login.component.html\",\r\n  styleUrls: [\"./login.component.scss\"]\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  loginForm: FormGroup;\r\n  loading = false;\r\n  submitted = false;\r\n  error = \"\";\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              private route: ActivatedRoute,\r\n              private router: Router,\r\n              private authenticationService: AuthenticationService\r\n  ) {\r\n    if (this.authenticationService.userValue) {\r\n      this.router.navigate([\"/\"]);\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loginForm = this.formBuilder.group({\r\n      username: [\"\", Validators.required],\r\n      password: [\"\", Validators.required]\r\n    });\r\n  }\r\n\r\n  // convenience getter for easy access to form fields\r\n  get f() {\r\n    return this.loginForm.controls;\r\n  }\r\n\r\n  onSubmit() {\r\n    this.submitted = true;\r\n\r\n    // stop here if form is invalid\r\n    if (this.loginForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    this.authenticationService.login(this.f.username.value, this.f.password.value)\r\n      .pipe(first())\r\n      .subscribe({\r\n        next: () => {\r\n          // get return url from query parameters or default to home page\r\n          const returnUrl = this.route.snapshot.queryParams[\"returnUrl\"] || \"/\";\r\n          this.router.navigateByUrl(returnUrl);\r\n        },\r\n        error: error => {\r\n          this.error = error;\r\n          this.loading = false;\r\n        }\r\n      });\r\n  }\r\n\r\n}\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { ReactiveFormsModule } from \"@angular/forms\";\r\nimport { FontAwesomeModule } from \"@fortawesome/angular-fontawesome\";\r\nimport { RouterModule } from \"@angular/router\";\r\n\r\nimport { AdminComponent } from \"@app/view/admin/admin.component\";\r\nimport { HeaderComponent } from \"@app/view/header/header.component\";\r\nimport { LoginComponent } from \"@app/view/login/login.component\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HeaderComponent,\r\n    AdminComponent,\r\n    LoginComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    FontAwesomeModule,\r\n    RouterModule\r\n  ],\r\n  exports: [\r\n    HeaderComponent,\r\n    AdminComponent,\r\n    LoginComponent\r\n  ]\r\n})\r\nexport class ViewModule { }\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  backend: \"http://localhost:8000/\",\r\n  authentication: \"radio/authentication/this/is/very/safe/133742069/\",\r\n  database: \"radio/database/\",\r\n  template: \"template/\",\r\n  material: \"material/\"\r\n};\r\n\r\n/*\r\n * In development mode, for easier debugging, you can ignore zone related error\r\n * stack frames such as `zone.run`/`zoneDelegate.invokeTask` by importing the\r\n * below file. Don't forget to comment it out in production mode\r\n * because it will have a performance impact when errors are thrown\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n"]}