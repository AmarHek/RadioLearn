{"version":3,"mappings":"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","names":["e","webpackEmptyAsyncContext","module","routes","path","component","_app_view__WEBPACK_IMPORTED_MODULE_0__","_app_feature__WEBPACK_IMPORTED_MODULE_1__","canActivate","_app_helpers__WEBPACK_IMPORTED_MODULE_2__","data","roles","_app_models__WEBPACK_IMPORTED_MODULE_3__","redirectTo","AppRoutingModule","_angular_router__WEBPACK_IMPORTED_MODULE_5__","imports","exports","AppComponent","selectors","decls","vars","template","_angular_core__WEBPACK_IMPORTED_MODULE_1__","AppModule","bootstrap","_app_component__WEBPACK_IMPORTED_MODULE_0__","_app_core__WEBPACK_IMPORTED_MODULE_6__","provide","_angular_material_core__WEBPACK_IMPORTED_MODULE_8__","useClass","_app_helpers__WEBPACK_IMPORTED_MODULE_5__","useValue","_angular_common_http__WEBPACK_IMPORTED_MODULE_9__","multi","_angular_platform_browser__WEBPACK_IMPORTED_MODULE_10__","_angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_11__","_app_routing_module__WEBPACK_IMPORTED_MODULE_4__","_app_feature_feature_module__WEBPACK_IMPORTED_MODULE_1__","_app_shared_shared_module__WEBPACK_IMPORTED_MODULE_3__","_app_view_view_module__WEBPACK_IMPORTED_MODULE_2__","declarations","AuthenticationService","router","http","userSubject","rxjs__WEBPACK_IMPORTED_MODULE_1__","JSON","parse","localStorage","getItem","user","asObservable","value","username","password","post","_env_environment__WEBPACK_IMPORTED_MODULE_0__","pipe","setItem","stringify","next","removeItem","navigate","then","_angular_core__WEBPACK_IMPORTED_MODULE_3__","factory","providedIn","BackendCallerService","id","get","templateUrl","jsonData","put","_id","parts","name","formData","materialUrl","objectID","scanID","query","material","coordinates","judged","DataParserService","parseOptional","newParts","part","kind","push","_models_templateModel__WEBPACK_IMPORTED_MODULE_1__","newPart","parseOptionalCategory","res","el","parsedCat","cat","parsedName","parseCategoryTitle","optional","selectables","catName","includes","substring","length","categories","maxRowLength","rows","category","splits","getSplits","split_cats","splitCategory","concat","pos","split","temp_sels","slice","rowSplits","currentSplit","rowCounter","sel","options","indexOf","groupValues","Map","console","log","set","_models_generator__WEBPACK_IMPORTED_MODULE_0__","suppressedNormal","suppressedJudgement","normalExtractor","judgementExtractor","report","judgement","p","NAVBAR_HEADER_TOGGLE_1","NAVBAR_HEADER_TOGGLE_2","DisplayService","displayHeader","updateDisplay","updateTitle","url","title","_angular_core__WEBPACK_IMPORTED_MODULE_0__","FilesSortingService","identifier","RegExp","nIntegers","preString","join","files","map","file","test","baseFiles","checkFiles","some","baseFile","match","undefined","checkFiles1","checkFiles2","result","checkFile1","find","checkFile2","InputParserService","rootEl","initializeKeywords","initializeDictionary","foundClickables","foundVariables","inputString","possibleWords","Array","from","primaryDictionary","inputSplit","forEach","word","idx","distances","possibleWord","toLowerCase","toLocaleLowerCase","replacement","input","reset","findClickables","varText","getTextBetweenClickables","overText","shift","i","findVariableKeywords","foundKeywordsTemp","clickableKeywords","keyword","positions","synonym","keywordWithPos","position","filterOverlap","sort","compareKeywords","clickKey","relativePosition","foundVariablesTemp","possibleVariables","varKeyDictionary","splitters","varKey","newVarKey","textBefore","textAfter","positionEnd","posValueStart","posValueEnd","valueString","trim","foundKeywords","fKCopy","toRemove","overlap","filter","kw","removable","splice","splitRight","splitLeft","arg1","arg2","nVariables","numberFoundUniqueVariables","color","text","resultText","day","month","year","clickKeys","tempSelectables","extractVariableKeywords","Set","add","values","variables","varKeys","option","MatDialogService","width","dialogConfig","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__","disableClose","autoFocus","hasBackdrop","PopoutService","injector","componentFactoryResolver","applicationRef","windowInstance","openOnce","setTimeout","createCDKPortal","target","winRef","window","open","location","href","outlet","_angular_cdk_portal__WEBPACK_IMPORTED_MODULE_2__","document","body","styleSheetElement","getStyleSheetElement","head","appendChild","onload","innerText","createInjector","componentInstance","attachContainer","_popout_tokens__WEBPACK_IMPORTED_MODULE_0__","containerPortal","_app_shared__WEBPACK_IMPORTED_MODULE_1__","containerRef","attach","instance","injectionTokens","WeakMap","createElement","querySelectorAll","htmlElement","rel","absoluteUrl","URL","POPOUT_MODAL_DATA","POPOUT_MODALS","RadiolearnService","UserService","newUsername","newPassword","role","AccountManagementComponent","authenticationService","subscribe","x","changeUsername","changePassword","consts","ctx","_angular_core__WEBPACK_IMPORTED_MODULE_2__","AdminComponent","userService","getUserList","getAll","users","confirm","deleteUser","alert","message","err","FeatureModule","_angular_common__WEBPACK_IMPORTED_MODULE_10__","_angular_router__WEBPACK_IMPORTED_MODULE_11__","_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_12__","_angular_forms__WEBPACK_IMPORTED_MODULE_13__","_app_shared_shared_module__WEBPACK_IMPORTED_MODULE_0__","_app_feature_judge_mat_judge_mat_component__WEBPACK_IMPORTED_MODULE_1__","_app_feature_list_list_component__WEBPACK_IMPORTED_MODULE_2__","_app_feature_list_material_list_material_component__WEBPACK_IMPORTED_MODULE_3__","_app_feature_ui_base_ui_base_component__WEBPACK_IMPORTED_MODULE_4__","_account_management_account_management_component__WEBPACK_IMPORTED_MODULE_5__","_app_feature_admin_admin_component__WEBPACK_IMPORTED_MODULE_6__","_radiolearn_radiolearn_component__WEBPACK_IMPORTED_MODULE_7__","_radiolearn_view_radiolearn_view_component__WEBPACK_IMPORTED_MODULE_8__","_angular_core__WEBPACK_IMPORTED_MODULE_4__","ctx_r0","JudgeMatComponent","backendCaller","route","dataParser","popoutService","event","closePopoutModal","getData","paramMap","ps","has","matID","getMaterialById","extractCategories","openImagePopout","makeText","updateText","makeNormal","_app_core__WEBPACK_IMPORTED_MODULE_1__","updateMaterial","navigateByUrl","restricted","_app_models__WEBPACK_IMPORTED_MODULE_0__","modalData","scans","openPopoutModal","hostBindings","_r3","ListMaterialComponent","dialogService","dialog","queryMaterials","mats","materials","newValue","main","lateral","pre","dialogData","defaultConfig","top","dialogRef","afterClosed","dialogResult","deleteMaterial","reload","_r1","ListComponent","_app_models__WEBPACK_IMPORTED_MODULE_2__","isLoading","update","getTemplateList","templates","_app_shared_confirm_dialog_confirm_dialog_component__WEBPACK_IMPORTED_MODULE_0__","remove","deleteTemplate","date","Date","getDate","getMonth","getFullYear","RadiolearnViewComponent","RadiolearnComponent","_angular_core__WEBPACK_IMPORTED_MODULE_5__","ctx_r3","UiBaseComponent","_location","inputParser","sanitizer","_app_models__WEBPACK_IMPORTED_MODULE_1__","templateID","getTemplateById","defaultParts","init","json","downJson","bypassSecurityTrustUrl","encodeURIComponent","ev","inputType","autocorrect","parseInput","assignValues","getColoredText","key","c","s","group","o","vari","v","val","numerator","denominator","optionsComponent","initRows","resetText","viewQuery","_app_shared__WEBPACK_IMPORTED_MODULE_0__","AuthGuard","state","userValue","queryParams","returnUrl","ErrorInterceptor","request","handle","status","logout","error","statusText","FakeBackendInterceptor","method","headers","handleRoute","endsWith","authenticate","getUsers","getUserById","ok","token","isAdmin","unauthorized","isLoggedIn","currentUser","idFromUrl","_angular_common_http__WEBPACK_IMPORTED_MODULE_2__","authHeader","startsWith","parseInt","urlParts","fakeBackendProvider","AppDateAdapter","displayFormat","toString","toDateString","_angular_material_core__WEBPACK_IMPORTED_MODULE_0__","t","APP_DATE_FORMATS","dateInput","display","monthYearLabel","dateA11yLabel","monthYearA11yLabel","JwtInterceptor","accessToken","isApiUrl","clone","setHeaders","authorization","mustMatch","controlName","matchingControlName","formGroup","control","controls","matchingControl","errors","setErrors","resolve","varId","structure","tl","resolveCategory","variablesOfSelectable","getClickableKeywords","keys","getSplitters","splitWords","splitWord","parseValue","varKind","isNaN","Number","dateString","ratioString","ratioNumbers","countUniqueVariableKeywords","variableKeywords","foundIDs","filterUniqueOptions","reverse","getVariableKeywords","clickable","variable","selectable","assertNever","n","Error","flatMap","xs","f","ret","displayableQuotient","fractionDigits","isFinite","toFixed","levenshtein","a","b","an","bn","matrix","row","firstRow","j","charAt","Math","min","getAllIndexOf","searchStr","inputStr","caseSensitive","startIndex","index","indexes","splitStringFromIndexes","splitText","getDateFormatted","addTime","hour","getHours","minutes","getMinutes","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","getBase64Image","img","canvas","height","getContext","drawImage","dataURL","toDataURL","replace","getFileExtension","filename","pop","getImageDimensions","imgUrl","Image","src","loadedImage","currentTarget","getNextHighestValue","array","testValue","normalText","judgementText","extractor","suppressed","getTexts","expandVariablesInString","ofBlock","makeEnumeration","checkConditional","ofConditional","blocks","regEx","getSuppressedConditionalIds","topLevel","precondition","anded","literal","negated","outer","isClicked","clickableId","conditionalId","ss","textExtractor","enumeration","ofCheckbox","ofOption","addFullStop","today","yesterday","setDate","tomorrow","lookup","makeDateString","allVariables","matching","textOfVariable","brackets","d","toLocaleDateString","toLocaleString","maximumFractionDigits","assertUnreachable","makeNormalCategory","hasSelection","entry","normal","items","getRelevantEnumerationItems","ofEnumeration","Role","sub","substr","lengthTaken","setter","regex","r","exec","dummy","fail","success","decimal","compound","takers","results","reduce","or","taker","addSetter","logOnFail","msg","logOnSuccess","msgSuc","msgFail","convertModel","oldModel","convertCategory","convertBlock","convertEnum","convertCond","convertSelectables","oldSels","newSels","oldSel","newSel","convertCheckBox","convertGroup","oldBox","newVariables","convertVariables","keywords","splitKeywords","oldGroup","newOpts","oldOpt","convertOption","oldBlock","oldEnum","oldCond","oldCat","oldVars","newVars","convertVariable","oldVar","newVar","splitKeywordsArray","splitter","optionSplitter","synonymSplitter","variableSplit","varSynonyms","synSplit","User","ChangePasswordComponent","formBuilder","changeForm","_angular_forms__WEBPACK_IMPORTED_MODULE_3__","confirmPass","validator","submitted","invalid","userID","inputs","ChangeUsernameComponent","_angular_forms__WEBPACK_IMPORTED_MODULE_2__","ConfirmDialogComponent","type","close","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__","ConfirmDialogModel","BOX_LINE_WIDTH","DISPLAY_BOX_COLOR","EDIT_BOX_COLOR","TEXT_COLOR","MAX_IMAGE_HEIGHT","ImageDisplayComponent","_env_environment__WEBPACK_IMPORTED_MODULE_1__","enableZoom","wheelDelta","max","deltaY","detail","lensSize","imageZoom","layer","enableDelete","deleteLayerElement","nativeElement","deleteContext","addDeleteListeners","enableEdit","editLayerElement","editContext","rectangleDrawing","container","containerElement","zoomLayerElement","children","lensElement","displayBoxes","initMain","drawLayerElement","drawLayer","drawContext","labelLayerElement","labelLayer","labelContext","currentMode","setCurrentImage","setCurrentDimensions","context","lineWidth","lineCap","strokeStyle","clearRect","currentScanUrl","serverUrl","currentScaleFactor","currentHeight","currentWidth","mode","drawBoxes","toggleZoom","clearCanvas","toggleBoxes","toggleDelete","toggleEditor","bbox","drawRect","addLabel","rect","getBoundingClientRect","parent","addEventListener","left","y","w","h","clientX","clientY","removeAlert","label","setCanvasProperties","beginPath","stroke","font","fillStyle","fillText","strokeText","startX","startY","labelDialog","newLabel","fixNegativeCoordinates","sourceImage","zoomDiv","cx","offsetWidth","cy","offsetHeight","style","backgroundImage","backgroundSize","removeEventListener","moveLens","preventDefault","getCursorPos","backgroundPosition","pageX","pageY","pageXOffset","pageYOffset","_app_core_services_popout_tokens__WEBPACK_IMPORTED_MODULE_0__","_r4","InputModalComponent","fb","form","number","checkForm","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__","sel_r3","option_r19","OptionsComponent","setMinRowLength","determineWidth","minRowLength","extractRows","cats","clickEvent","emit","outputs","ReportComponent","disclaimer","inputElement","select","execCommand","setSelectionRange","fullText","selBox","append","focus","removeChild","SharedModule","_angular_common__WEBPACK_IMPORTED_MODULE_12__","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_14__","_angular_material_divider__WEBPACK_IMPORTED_MODULE_15__","_angular_material_input__WEBPACK_IMPORTED_MODULE_16__","_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_17__","_angular_material_radio__WEBPACK_IMPORTED_MODULE_18__","_angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_19__","_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_20__","_angular_material_checkbox__WEBPACK_IMPORTED_MODULE_21__","_app_shared_inputModal_inputModal_component__WEBPACK_IMPORTED_MODULE_1__","_app_shared_options_options_component__WEBPACK_IMPORTED_MODULE_2__","_app_shared_report_report_component__WEBPACK_IMPORTED_MODULE_3__","_app_shared_upload_upload_component__WEBPACK_IMPORTED_MODULE_4__","_app_shared_upload_material_upload_material_component__WEBPACK_IMPORTED_MODULE_5__","_app_shared_variables_variables_component__WEBPACK_IMPORTED_MODULE_6__","_app_shared_image_display_image_display_component__WEBPACK_IMPORTED_MODULE_7__","_sign_up_sign_up_component__WEBPACK_IMPORTED_MODULE_8__","_change_password_change_password_component__WEBPACK_IMPORTED_MODULE_9__","_change_username_change_username_component__WEBPACK_IMPORTED_MODULE_10__","SignUpComponent","signUpForm","_angular_forms__WEBPACK_IMPORTED_MODULE_4__","signUp","sc","UploadMaterialComponent","filesSorter","initForm","updateTemplateList","uploadForm","mainScans","validators","lateralScans","preScans","dict","ignoreFlags","setIdentifier","flagFiles","scanType","fileFilter","setValue","supportedFileTypes","mainFiles","lateralFiles","preFiles","mainFlags","identifierSearch","lateralRedFlags","preRedFlags","lateralYellowFlags","fileMatchSearch","preYellowFlags","uploading","choice","fileTuples","getFileTuples","fileTuple","FormData","addMaterial","progress","messages","_r5","UploadComponent","currentFile","checkFileExtension","showWarning","extension","postData","addTemplateFromJSON","_r0","variable_r1","$event","val_r17","VariablesComponent","initButtonClickedMap","hasButtonBeenClickedOnce","base","parentActive","modalInput","response","parentText","toPromise","Promise","HeaderComponent","displayService","displayNavbar","faUser","_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__","LoginComponent","loginForm","loading","login","fc","snapshot","ViewModule","_angular_common__WEBPACK_IMPORTED_MODULE_3__","_fortawesome_angular_fontawesome__WEBPACK_IMPORTED_MODULE_5__","_angular_router__WEBPACK_IMPORTED_MODULE_6__","_app_view_header_header_component__WEBPACK_IMPORTED_MODULE_0__","_app_view_login_login_component__WEBPACK_IMPORTED_MODULE_1__","environment","production","backend","authentication","database","_angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__","bootstrapModule","_app_app_module__WEBPACK_IMPORTED_MODULE_0__"],"sources":["webpack:///$_lazy_route_resources|lazy|groupOptions:%20%7B%7D|namespace%20object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/core/services/authentication.service.ts","webpack:///src/app/core/services/backend-caller.service.ts","webpack:///src/app/core/services/dataParser.service.ts","webpack:///src/app/core/services/display.service.ts","webpack:///src/app/core/services/files-sorting.service.ts","webpack:///src/app/core/services/input-parser.service.ts","webpack:///src/app/core/services/mat-dialog.service.ts","webpack:///src/app/core/services/popout.service.ts","webpack:///src/app/core/services/popout.tokens.ts","webpack:///src/app/core/services/radiolearn.service.ts","webpack:///src/app/core/services/user.service.ts","webpack:///src/app/feature/account-management/account-management.component.html","webpack:///src/app/feature/account-management/account-management.component.ts","webpack:///src/app/feature/admin/admin.component.html","webpack:///src/app/feature/admin/admin.component.ts","webpack:///src/app/feature/feature.module.ts","webpack:///src/app/feature/judge-mat/judge-mat.component.html","webpack:///src/app/feature/judge-mat/judge-mat.component.ts","webpack:///src/app/feature/list-material/list-material.component.html","webpack:///src/app/feature/list-material/list-material.component.ts","webpack:///src/app/feature/list/list.component.html","webpack:///src/app/feature/list/list.component.ts","webpack:///src/app/feature/radiolearn-view/radiolearn-view.component.ts","webpack:///src/app/feature/radiolearn-view/radiolearn-view.component.html","webpack:///src/app/feature/radiolearn/radiolearn.component.ts","webpack:///src/app/feature/radiolearn/radiolearn.component.html","webpack:///src/app/feature/ui-base/ui-base.component.html","webpack:///src/app/feature/ui-base/ui-base.component.ts","webpack:///src/app/helpers/auth.guard.ts","webpack:///src/app/helpers/error.interceptor.ts","webpack:///src/app/helpers/fake-backend.ts","webpack:///src/app/helpers/format-datepicker.ts","webpack:///src/app/helpers/jwt.interceptor.ts","webpack:///src/app/helpers/must-match.validator.ts","webpack:///src/app/helpers/old_model.ts","webpack:///src/app/helpers/parsingUtils.ts","webpack:///src/app/helpers/util.ts","webpack:///src/app/models/generator.ts","webpack:///src/app/models/role.ts","webpack:///src/app/models/takers.ts","webpack:///src/app/models/templateModel.ts","webpack:///src/app/models/user.ts","webpack:///src/app/shared/change-password/change-password.component.html","webpack:///src/app/shared/change-password/change-password.component.ts","webpack:///src/app/shared/change-username/change-username.component.html","webpack:///src/app/shared/change-username/change-username.component.ts","webpack:///src/app/shared/confirm-dialog/confirm-dialog.component.html","webpack:///src/app/shared/confirm-dialog/confirm-dialog.component.ts","webpack:///src/app/shared/image-display/image-display.component.html","webpack:///src/app/shared/image-display/image-display.component.ts","webpack:///src/app/shared/inputModal/inputModal.component.html","webpack:///src/app/shared/inputModal/inputModal.component.ts","webpack:///src/app/shared/options/options.component.html","webpack:///src/app/shared/options/options.component.ts","webpack:///src/app/shared/report/report.component.ts","webpack:///src/app/shared/report/report.component.html","webpack:///src/app/shared/shared.module.ts","webpack:///src/app/shared/sign-up/sign-up.component.html","webpack:///src/app/shared/sign-up/sign-up.component.ts","webpack:///src/app/shared/upload-material/upload-material.component.html","webpack:///src/app/shared/upload-material/upload-material.component.ts","webpack:///src/app/shared/upload/upload.component.html","webpack:///src/app/shared/upload/upload.component.ts","webpack:///src/app/shared/variables/variables.component.html","webpack:///src/app/shared/variables/variables.component.ts","webpack:///src/app/view/header/header.component.html","webpack:///src/app/view/header/header.component.ts","webpack:///src/app/view/login/login.component.html","webpack:///src/app/view/login/login.component.ts","webpack:///src/app/view/view.module.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98255;\nmodule.exports = webpackEmptyAsyncContext;","import { NgModule } from \"@angular/core\";\r\nimport { Routes, RouterModule } from \"@angular/router\";\r\n\r\nimport { LoginComponent, AdminComponent } from \"@app/view\";\r\nimport {\r\n  ListComponent,\r\n  UiBaseComponent,\r\n  ListMaterialComponent,\r\n  JudgeMatComponent,\r\n  AccountManagementComponent,\r\n  RadiolearnComponent, RadiolearnViewComponent\r\n} from \"@app/feature\";\r\nimport { AuthGuard } from \"@app/helpers\";\r\nimport { Role } from \"@app/models\";\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"login\",\r\n    component: LoginComponent\r\n  },\r\n  {\r\n    path: \"list\",\r\n    component: ListComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.User, Role.ExternalUser, Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"main/:id\",\r\n    component: UiBaseComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.User, Role.ExternalUser, Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"listMat\",\r\n    component: ListMaterialComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"mainMat/:id\",\r\n    component: JudgeMatComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"radiolearn\",\r\n    component: RadiolearnComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.User, Role.ExternalUser, Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"radiolearn/:id\",\r\n    component: RadiolearnViewComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.User, Role.ExternalUser, Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"admin\",\r\n    component: AdminComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.Admin] }\r\n  },\r\n  {\r\n    path: \"manageAccount\",\r\n    component: AccountManagementComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.Admin, Role.Moderator, Role.User]}\r\n  },\r\n  {path: \"**\", redirectTo: \"/list\"}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\n\r\nexport class AppRoutingModule { }\r\n","import {Component} from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-root\",\r\n  templateUrl: \"./app.component.html\",\r\n  styleUrls: [\"./app.component.scss\"]\r\n})\r\n\r\nexport class AppComponent {\r\n\r\n  constructor() {\r\n  }\r\n\r\n}\r\n\r\n","<app-header></app-header>\r\n<router-outlet></router-outlet>\r\n","import { BrowserModule } from \"@angular/platform-browser\";\r\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { HTTP_INTERCEPTORS, HttpClientModule } from \"@angular/common/http\";\r\n\r\nimport { DateAdapter, MAT_DATE_FORMATS } from \"@angular/material/core\";\r\nimport { AppComponent } from \"./app.component\";\r\nimport { FeatureModule } from \"@app/feature/feature.module\";\r\nimport { ViewModule } from \"@app/view/view.module\";\r\nimport { SharedModule } from \"@app/shared/shared.module\";\r\nimport { AppRoutingModule } from \"./app-routing.module\";\r\nimport {JwtInterceptor, ErrorInterceptor, APP_DATE_FORMATS, AppDateAdapter, fakeBackendProvider} from \"@app/helpers\";\r\nimport { PopoutService } from \"@app/core\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n  ],\r\n    imports: [\r\n      BrowserModule,\r\n      BrowserAnimationsModule,\r\n      HttpClientModule,\r\n      AppRoutingModule,\r\n      FeatureModule,\r\n      SharedModule,\r\n      ViewModule,\r\n    ],\r\n  providers: [PopoutService,\r\n    { provide: DateAdapter, useClass: AppDateAdapter },\r\n    { provide: MAT_DATE_FORMATS, useValue: APP_DATE_FORMATS },\r\n    { provide: HTTP_INTERCEPTORS, useClass: JwtInterceptor, multi: true },\r\n    { provide: HTTP_INTERCEPTORS, useClass: ErrorInterceptor, multi: true },\r\n    fakeBackendProvider\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Router } from \"@angular/router\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { BehaviorSubject, Observable } from \"rxjs\";\r\nimport { map } from \"rxjs/operators\";\r\n\r\nimport { environment } from \"@env/environment\";\r\nimport {User} from \"@app/models\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class AuthenticationService {\r\n  public user: Observable<User>;\r\n  private userSubject: BehaviorSubject<User>;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private http: HttpClient\r\n  ) {\r\n    this.userSubject = new BehaviorSubject<User>(JSON.parse(localStorage.getItem(\"user\")));\r\n    this.user = this.userSubject.asObservable();\r\n  }\r\n\r\n  public get userValue(): User {\r\n    return this.userSubject.value;\r\n  }\r\n\r\n  login(username: string, password: string) {\r\n    return this.http.post<any>(environment.backend + environment.authentication + \"signIn\", { username, password })\r\n      .pipe(map(user => {\r\n        // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n        this.userSubject.next(user);\r\n        return user;\r\n      }));\r\n  }\r\n\r\n  logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem(\"user\");\r\n    this.userSubject.next(null);\r\n    this.router.navigate([\"/login\"]).then();\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport * as M from \"../../models/templateModel\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { environment } from \"@env/environment\";\r\nimport {Observable} from \"rxjs\";\r\nimport {Template} from \"@app/models\";\r\nimport {Material} from \"@app/models\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\n\r\n// -----------------------------------\r\n// This class administrates the list of templates and executes all api calls\r\n// -----------------------------------\r\n\r\nexport class BackendCallerService {\r\n\r\n  templateUrl = environment.backend + environment.database + environment.template;\r\n  materialUrl = environment.backend + environment.database + environment.material;\r\n\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  getTemplateById(id: string): Observable<Template> {\r\n      return this.http.get<Template>(this.templateUrl + id);\r\n  }\r\n\r\n  // TEMPLATE API\r\n\r\n  addTemplate(template: M.Template): Observable<{ message: string; templateId: string }> {\r\n    return this.http.post<{ message: string; templateId: string }>(\r\n      this.templateUrl,\r\n      template\r\n    );\r\n  }\r\n\r\n  addTemplateFromJSON(jsonData: FormData): Observable<{message: string; templateId: string }> {\r\n    return this.http.post<{message: string, templateId: string }>(\r\n      this.templateUrl + \"json/\",\r\n      jsonData\r\n    );\r\n  }\r\n\r\n  /*\r\naddTemplateFromExcel(postData: FormData) {\r\n  this.http\r\n    .post<{ message: string; templateId: string }>(\r\n      this.activeUrl + \"excel\",\r\n      postData\r\n    )\r\n    .subscribe((res) => {\r\n      let str = \"\";\r\n      if (res.templateId === \"false\") {\r\n        str =\r\n          \"Fehler beim Hochladen der Excel Datei. Die Tabelle wurde nicht korrekt befüllt. \\n Folgender Fehler ist aufgetreten: \\n\\n\";\r\n      }\r\n      window.alert(str + res.message);\r\n    });\r\n}*/\r\n\r\n  deleteTemplate(id: string) {\r\n    return this.http.delete(this.templateUrl + id);\r\n  }\r\n\r\n  updateTemplate(template: M.Template) {\r\n    return this.http\r\n      .put(this.templateUrl + template._id, {\r\n        parts: template.parts,\r\n        name: template.name,\r\n      });\r\n  }\r\n\r\n  getTemplateList(): Observable<Template[]> {\r\n    return this.http.get<Template[]>(this.templateUrl);\r\n  }\r\n\r\n  // MATERIAL API\r\n\r\n  addMaterial(formData: FormData): Observable<{ success: boolean; message: string }> {\r\n    return this.http.post<{ success: boolean; message: string }>(\r\n      this.materialUrl,\r\n      formData\r\n    );\r\n  }\r\n\r\n  getMaterialById(id: string): Observable<Material> {\r\n    return this.http.get<Material>(this.materialUrl + id);\r\n  }\r\n\r\n  deleteMaterial(objectID: string, scanID: string): Observable<{ message: string }> {\r\n    return this.http.post<{message: string}>(this.materialUrl + \"delete/\",\r\n      {objectID, scanID});\r\n  }\r\n\r\n  getMaterials(): Observable<Material[]> {\r\n    return this.http.get<Material[]>(\r\n      this.materialUrl + \"sample/\"\r\n    );\r\n  }\r\n\r\n  queryMaterials(query: Record<string, unknown>): Observable<Material[]> {\r\n    return this.http.post<Material[]>(\r\n      this.materialUrl + \"query/\",\r\n      query\r\n    );\r\n  }\r\n\r\n  updateMaterial(material: Material) {\r\n    return this.http.put<{message: string}>(this.materialUrl + material._id, {\r\n      template: material.template,\r\n      coordinates: material.coordinates,\r\n      judged: true\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\n","import { Injectable } from \"@angular/core\";\r\nimport * as O from \"../../helpers/old_model\";\r\nimport * as G from \"../../models/generator\";\r\nimport * as M from \"../../models/templateModel\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\n\r\nexport class DataParserService {\r\n\r\n  constructor() {}\r\n\r\n  convertModel(parts: O.TopLevel[], parseOptional: boolean): M.TopLevel[] {\r\n    const newParts: M.TopLevel[] = [];\r\n    for (const part of parts) {\r\n      if (part.kind === \"block\") {\r\n        newParts.push(M.convertBlock(part));\r\n      } else if (part.kind === \"enumeration\") {\r\n        newParts.push(M.convertEnum(part));\r\n      } else if (part.kind === \"category\") {\r\n        let newPart = M.convertCategory(part);\r\n        if (parseOptional) {\r\n          newPart = this.parseOptionalCategory(newPart);\r\n        }\r\n        newParts.push(newPart);\r\n      }\r\n    }\r\n    return newParts;\r\n  }\r\n\r\n  extractCategories(parts: M.TopLevel[], parseOptional: boolean): M.Category[] {\r\n    const res: M.Category[] = [];\r\n    for (const el of parts) {\r\n      if (el.kind === \"category\") {\r\n        if (parseOptional) {\r\n          const parsedCat = this.parseOptionalCategory(el);\r\n          res.push(parsedCat);\r\n        } else {\r\n          res.push(el);\r\n        }\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  parseOptionalCategory(cat: M.Category): M.Category {\r\n    const parsedName = this.parseCategoryTitle(cat.name);\r\n    return {\r\n      kind: cat.kind,\r\n      name: parsedName[0],\r\n      optional: parsedName[1],\r\n      selectables: cat.selectables\r\n    };\r\n  }\r\n\r\n  parseCategoryTitle(catName: string): [string, boolean] {\r\n    if (catName.includes(\"<\", 0)) {\r\n      return [catName.substring(1, catName.length), true];\r\n    } else {\r\n      return [catName, false];\r\n    }\r\n  }\r\n\r\n  // Takes list of categories to transform them into list of rows without groups, only singular buttons\r\n  extractRows(categories: M.Category[], maxRowLength: number): M.Category[] {\r\n    let rows: M.Category[] = [];\r\n\r\n    for (const category of categories) {\r\n      const splits = this.getSplits(category, maxRowLength);\r\n      const split_cats = this.splitCategory(category, splits);\r\n      rows = rows.concat(split_cats);\r\n    }\r\n\r\n    return rows;\r\n  }\r\n\r\n  splitCategory(category: M.Category, splits: number[]) {\r\n    // let n_categories = Math.ceil(category.selectables.length / splitLength);\r\n    const res: M.Category[] = [];\r\n\r\n    let pos = 0;\r\n    for (const split of splits) {\r\n      let name: string;\r\n      if (pos === 0) {\r\n        name = category.name;\r\n      } else {\r\n        name = \"\";\r\n      }\r\n      let temp_sels: M.Selectable[] = [];\r\n      temp_sels = category.selectables.slice(pos, pos + split);\r\n      res.push({\r\n        kind: \"category\",\r\n        name: name,\r\n        optional: category.optional,\r\n        selectables: temp_sels\r\n      });\r\n      pos += split;\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  getSplits(category: M.Category, maxRowLength: number): number[] {\r\n    // Variation of getRowLengths: returns the number of selectables per row instead of number of options\r\n    const rowSplits = [];\r\n    let currentSplit = 0;\r\n    let rowCounter = 0;\r\n    for (const sel of category.selectables) {\r\n      if (rowCounter >= maxRowLength) {\r\n        rowSplits.push(currentSplit);\r\n        currentSplit = 0;\r\n        rowCounter = 0;\r\n      }\r\n\r\n      if (sel.kind === \"box\") {\r\n        rowCounter += 1;\r\n        currentSplit += 1;\r\n      } else if (sel.kind === \"group\") {\r\n        if (rowCounter + sel.options.length > maxRowLength) {\r\n          rowSplits.push(currentSplit);\r\n          rowCounter = sel.options.length;\r\n          currentSplit = 1;\r\n        } else {\r\n          rowCounter += sel.options.length;\r\n          currentSplit += 1;\r\n        }\r\n      }\r\n\r\n      if (category.selectables.indexOf(sel) === (category.selectables.length - 1) && currentSplit !== 0) {\r\n        rowSplits.push(currentSplit);\r\n      }\r\n    }\r\n    return rowSplits;\r\n  }\r\n\r\n  // extracts group identifiers and corresponding values for ngModel application\r\n  extractGroups(categories: M.Category[]): Map<string, string> {\r\n    const groupValues: Map<string, string> = new Map();\r\n    for (const category of categories) {\r\n      for (const sel of category.selectables) {\r\n        if (sel.kind === \"group\") {\r\n          console.log(sel.name, sel.value);\r\n          groupValues.set(sel.name, sel.value);\r\n        }\r\n      }\r\n    }\r\n    return groupValues;\r\n  }\r\n\r\n  makeText(parts: M.TopLevel[]) {\r\n    const [suppressedNormal, suppressedJudgement] = G.getSuppressedConditionalIds(parts);\r\n    const normalExtractor: M.TextExtractor = G.normalExtractor();\r\n    const judgementExtractor: M.TextExtractor = G.judgementExtractor();\r\n\r\n    const report = G.makeText(parts, normalExtractor, suppressedNormal);\r\n    const judgement = G.makeText(parts, judgementExtractor, suppressedJudgement);\r\n\r\n    return [report, judgement];\r\n  }\r\n\r\n  makeNormal(parts: M.TopLevel[]) {\r\n    for (const p of parts) {\r\n      if (p.kind === \"category\") {\r\n        G.makeNormalCategory(p);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport {Router} from \"@angular/router\";\r\n\r\nconst NAVBAR_HEADER_TOGGLE_1 = \"main\";\r\nconst NAVBAR_HEADER_TOGGLE_2 = \"login\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class DisplayService {\r\n\r\n  // TODO: Do something with layouts so all possible layouts are contained in a list, perhaps dropdown menu\r\n\r\n  displayHeader: boolean;\r\n  title: string;\r\n\r\n  constructor(private router: Router) {\r\n    this.displayHeader = true;\r\n  }\r\n\r\n  update() {\r\n    this.updateDisplay();\r\n    this.updateTitle();\r\n  }\r\n\r\n  private updateDisplay() {\r\n    this.displayHeader = !(this.router.url.includes(NAVBAR_HEADER_TOGGLE_1) ||\r\n      this.router.url.includes(NAVBAR_HEADER_TOGGLE_2));\r\n  }\r\n\r\n  private updateTitle() {\r\n    if (this.router.url.includes(\"radiolearn\")) {\r\n      this.title = \"RadioLearn\";\r\n    } else {\r\n      this.title = \"RadioSpeech\";\r\n    }\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class FilesSortingService {\r\n\r\n  identifier: RegExp;\r\n\r\n  constructor() {\r\n    this.identifier = new RegExp(\"thisShouldNotMatchAnything\");\r\n  }\r\n\r\n  setIdentifier(id: string) {\r\n    if (id.length === 0) {\r\n      this.identifier = new RegExp(\".*\");\r\n    } else {\r\n      // TODO: Currently only string + n integers possible, make more options available\r\n      const nIntegers = (id.split(\"*\").length - 1);\r\n      const preString = id.split(\"*\").join(\"\");\r\n      this.identifier = new RegExp(\"^\" + preString + \"\\\\d{\" + nIntegers + \"}\" + \"\\\\D\");\r\n    }\r\n  }\r\n\r\n  // searches for the identifier in filenames and returns boolean value based on if a match is found or not\r\n  identifierSearch(files: File[]): boolean[]  {\r\n    return files.map((file: File) => this.identifier.test(file.name));\r\n  }\r\n\r\n  fileMatchSearch(baseFiles: File[], checkFiles: File[]): boolean[] {\r\n    return checkFiles.map((file: File) => baseFiles.some((baseFile: File) => {\r\n      const match = baseFile.name.match(this.identifier);\r\n      if (match !== undefined) {\r\n        const id = match[0];\r\n        return file.name.includes(id);\r\n      } else {\r\n        return false;\r\n      }\r\n    }));\r\n  }\r\n\r\n  getFileTuples(baseFiles: File[], checkFiles1?: File[], checkFiles2?: File[]): [File, File, File][] {\r\n    if (checkFiles1 === undefined) {\r\n      checkFiles1 = [];\r\n    }\r\n    if (checkFiles2 === undefined) {\r\n      checkFiles2 = [];\r\n    }\r\n    const result: [File, File, File][] = [];\r\n\r\n    for (const baseFile of baseFiles) {\r\n      const match = baseFile.name.match(this.identifier);\r\n      if (match !== undefined) {\r\n        const id = match[0];\r\n        const checkFile1 = checkFiles1.find(file => file.name.includes(id));\r\n        const checkFile2 = checkFiles2.find(file => file.name.includes(id));\r\n        result.push([baseFile, checkFile1, checkFile2]);\r\n        // TODO: Maybe add removal of already pushed files\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport {NgbDateStruct} from \"@ng-bootstrap/ng-bootstrap\";\r\n\r\nimport * as M from \"@app/models/templateModel\";\r\nimport {KeyVariable, KeyClickable, ColoredText} from \"@app/models\";\r\nimport { levenshtein, getAllIndexOf, getNextHighestValue, getClickableKeywords,\r\n         getSplitters, parseValue, countUniqueVariableKeywords, filterUniqueOptions,\r\n         getVariableKeywords} from \"@app/helpers\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class InputParserService {\r\n\r\n  clickableKeywords: KeyClickable[] = [];\r\n  varKeyDictionary: Map<string, KeyVariable[]> = new Map<string, KeyVariable[]>();\r\n\r\n  lastKeyword: KeyClickable;  // input buffer for last spoken keyword\r\n\r\n  foundClickables: KeyClickable[] = [];\r\n  foundVariables: Map<string, KeyVariable[]> = new Map<string, KeyVariable[]>();\r\n\r\n  primaryDictionary: Set<string>;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  init(rootEl: M.TopLevel[]): void {\r\n    this.initializeKeywords(rootEl);\r\n    this.initializeDictionary();\r\n  }\r\n\r\n  reset() {\r\n    this.foundClickables = [];\r\n    this.foundVariables = new Map<string, KeyVariable[]>();\r\n  }\r\n\r\n  autocorrect(inputString: string): string {\r\n    const possibleWords: string[] = Array.from(this.primaryDictionary);\r\n    const inputSplit = inputString.split(\" \");\r\n    inputSplit.forEach((word, idx) => {\r\n      const distances: number[] = possibleWords.map((possibleWord) =>\r\n        levenshtein(word.toLowerCase(), possibleWord.toLocaleLowerCase()));\r\n      if (!distances.includes(0)) {\r\n        if (word.length >= 3 && word.length < 8) {\r\n          if (distances.includes(1)) {\r\n            const replacement = distances.indexOf(1);\r\n            inputSplit[idx] = possibleWords[replacement];\r\n          }\r\n        } else if (word.length >= 8) {\r\n          if (distances.includes(1)) {\r\n            const replacement = distances.indexOf(1);\r\n            inputSplit[idx] = possibleWords[replacement];\r\n          } else if (distances.includes(2)) {\r\n            const replacement = distances.indexOf(2);\r\n            inputSplit[idx] = possibleWords[replacement];\r\n          }\r\n        }\r\n      }\r\n    });\r\n    return inputSplit.join(\" \");\r\n  }\r\n\r\n  // wrapper for all functions\r\n  parseInput(input: string) {\r\n    this.reset();\r\n    // Possibly reinitialize when starting\r\n    this.findClickables(input);\r\n    const varText = this.getTextBetweenClickables(input);\r\n    if (varText.length > this.foundClickables.length) {\r\n      // TODO\r\n      // This means that the first variable text is from the previous input\r\n      // if lastKeyword is not null, use that, otherwise use dummy varKey\r\n      // for now just ignore though\r\n      const overText = varText.shift();\r\n    }\r\n    for (let i = 0; i < varText.length; i++) {\r\n      this.findVariableKeywords(varText[i], this.foundClickables[i]);\r\n    }\r\n  }\r\n\r\n  // Finds all Clickable Keywords in an input string\r\n  findClickables(input: string) {\r\n    let foundKeywordsTemp: KeyClickable[] = [];\r\n    for (const keyword of this.clickableKeywords) {\r\n      // gets all positions of this keyword within the input\r\n      // finding all keywords (and not just the last) is necessary for proper coloring later\r\n      // and for finding all variables\r\n      const positions: number[] = getAllIndexOf(keyword.synonym, input, false);\r\n      if (positions.length >= 1) {\r\n        for (const pos of positions) {\r\n          const keywordWithPos: KeyClickable = JSON.parse(JSON.stringify(keyword));\r\n          keywordWithPos.position = pos;\r\n          foundKeywordsTemp.push(keywordWithPos);\r\n        }\r\n      }\r\n    }\r\n    // this removes keywords that are substrings of other keywords (e.g. \"Aufnahme\" and \"Aufnahme von heute\")\r\n    foundKeywordsTemp = this.filterOverlap(foundKeywordsTemp);\r\n    foundKeywordsTemp.sort(this.compareKeywords);\r\n    this.foundClickables = foundKeywordsTemp;\r\n  }\r\n\r\n  // find all Variable Keywords in input string (typically just a fraction of the entire string)\r\n  findVariableKeywords(input: string, clickKey: KeyClickable) {\r\n    const relativePosition = clickKey.position + clickKey.synonym.length + 1;\r\n    const id: string = clickKey.category + \" \" + clickKey.name;\r\n    const foundVariablesTemp: KeyVariable[] = [];\r\n    const possibleVariables = this.varKeyDictionary.get(id);\r\n\r\n    if (input.length > 0 && possibleVariables !== undefined) {\r\n      const splitters: number[] = getSplitters(possibleVariables, input);\r\n      for (const varKey of possibleVariables) {\r\n        if (varKey.kind === \"oc\" || varKey.kind === \"mc\") {\r\n          // gets all positions of this keyword within the input. One keyword is generated per input\r\n          // finding all keywords (and not just the last) is required for proper coloring later\r\n          const positions: number[] = getAllIndexOf(varKey.synonym, input, false);\r\n          if (positions.length >= 1) {\r\n            for (const pos of positions) {\r\n              const newVarKey: KeyVariable = JSON.parse(JSON.stringify(varKey));\r\n              // check if textBefore is present, if textBefore exists, and adjust position\r\n              if (varKey.textBefore.length > 0 &&\r\n                input.substring(pos - varKey.textBefore.length, pos) === varKey.textBefore) {\r\n                newVarKey.position = pos + relativePosition - varKey.textBefore.length;\r\n              } else {\r\n                newVarKey.position = pos + relativePosition;\r\n              }\r\n              // check if textAfter is present, if textBefore exists, and adjust end-position\r\n              if (varKey.textAfter.length > 0 &&\r\n                input.substring(pos + varKey.synonym.length + 1,\r\n                  pos + varKey.synonym.length + 1 + varKey.textAfter.length) === varKey.textAfter) {\r\n                newVarKey.positionEnd = pos + varKey.synonym.length + 1 + varKey.textAfter.length + relativePosition;\r\n              } else {\r\n                newVarKey.positionEnd = pos + varKey.synonym.length + relativePosition;\r\n              }\r\n              foundVariablesTemp.push(newVarKey);\r\n            }\r\n          }\r\n        } else {\r\n          const positions: number[] = getAllIndexOf(varKey.textBefore, input, false);\r\n          for (const pos of positions) {\r\n            const posValueStart = pos + varKey.textBefore.length;\r\n            let posValueEnd: number;\r\n            if (varKey.textAfter.length === 0) {\r\n              posValueEnd = getNextHighestValue(splitters, posValueStart);\r\n              if (posValueEnd === -1) {\r\n                posValueEnd = input.length;\r\n              } else {\r\n                posValueEnd--;\r\n              }\r\n            } else {\r\n              posValueEnd = input.indexOf(varKey.textAfter, pos);\r\n            }\r\n            const valueString = input.substring(posValueStart, posValueEnd).trim();\r\n            const newVarKey = JSON.parse(JSON.stringify(varKey));\r\n            newVarKey.position = pos + relativePosition;\r\n            // no need to check for existence of textAfter and textBefore since they always need to be present here\r\n            // (if textAfter exists in this case. textBefore must always exist)\r\n            newVarKey.positionEnd = posValueEnd + relativePosition;\r\n            newVarKey.value = parseValue(valueString, newVarKey.kind);\r\n            foundVariablesTemp.push(newVarKey);\r\n          }\r\n        }\r\n      }\r\n      foundVariablesTemp.sort(this.compareKeywords);\r\n      this.foundVariables.set(id, foundVariablesTemp);\r\n    }\r\n  }\r\n\r\n  // Removes all synonyms/keywords that are substrings of another synonym/keyword\r\n  filterOverlap(foundKeywords: KeyClickable[]): KeyClickable[] {\r\n    // filters out keyword synonyms that are substrings of another keyword\r\n    const fKCopy = JSON.parse(JSON.stringify(foundKeywords));\r\n    let toRemove: KeyClickable[] = [];\r\n    for (const keyword of fKCopy) {\r\n      const overlap: KeyClickable[] = fKCopy.filter((kw) =>\r\n        keyword.synonym !== kw.synonym && // do not filter out the same synonym\r\n        keyword.position <= kw.position && // kw must be right of keyword\r\n        kw.position < (keyword.position + keyword.synonym.length) && // kw must be contained within keyword\r\n        kw.synonym.length < keyword.synonym.length // kw must be shorter than keyword\r\n      );\r\n      toRemove = toRemove.concat(overlap);\r\n    }\r\n    for (const removable of toRemove) {\r\n      fKCopy.splice(fKCopy.indexOf(removable), 1);\r\n    }\r\n    return fKCopy;\r\n  }\r\n\r\n  getTextBetweenClickables(input: string): string[] {\r\n    const result: string[] = [];\r\n\r\n    const splitRight: number[] = [];\r\n    const splitLeft: number[] = [0];\r\n\r\n    for (const keyword of this.foundClickables) {\r\n      splitRight.push(keyword.position);\r\n      splitLeft.push(keyword.position + keyword.synonym.length);\r\n    }\r\n    splitRight.push(input.length);\r\n\r\n    if (splitRight[0] === 0) {\r\n      splitLeft.shift();\r\n      splitRight.shift();\r\n    }\r\n    for (let i = 0; i < splitLeft.length; i++) {\r\n      result.push(input.substring(splitLeft[i], splitRight[i]).trim());\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  // sorts keywords based on their position in the input string\r\n  compareKeywords(arg1: KeyClickable | KeyVariable, arg2: KeyClickable | KeyVariable): number {\r\n    if (arg1.position > arg2.position) {\r\n      return 1;\r\n    } else if (arg1.position < arg2.position) {\r\n      return -1;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  getColoredText(input: string): ColoredText[] {\r\n    const result: ColoredText[] = [];\r\n    // go through each found Clickable and check for variable completion\r\n    for (const clickKey of this.foundClickables) {\r\n      if (clickKey.nVariables > 0) {\r\n        // get variables of clickKey\r\n        const foundVariables: KeyVariable[] = this.foundVariables.get(clickKey.category + \" \" + clickKey.name);\r\n        //const foundVariables: KeyVariable[] = InputParserService.filterUniqueOptions(\r\n        //  this.foundVariables.get(clickKey.category + \" \" + clickKey.name));\r\n        // check text Color of clickKey for variable filling\r\n        const numberFoundUniqueVariables = countUniqueVariableKeywords(foundVariables);\r\n        let color: string;\r\n        // TODO: Think how to handle the coloring. Also text that *could* be a keyword goes unnoticed like this\r\n        // TODO: But do we need feedback for such text or is ignoring sufficient?\r\n        if (clickKey.nVariables === numberFoundUniqueVariables) {\r\n          color = \"green\";\r\n        } else if (clickKey.nVariables < numberFoundUniqueVariables) {\r\n          color = \"yellow\";\r\n        } else {\r\n          color = \"red\";\r\n        }\r\n        // finally push the result (must be here because variables must come right after to preserve text order\r\n        result.push({\r\n          text: clickKey.synonym,\r\n          color\r\n        });\r\n        // now handle the variables\r\n        for (const varKey of foundVariables) {\r\n          // easy for oc and mc: add textAfter if in substring (orange), add name (lightgreen)\r\n          // and add textAfter if included (orange)\r\n          if (varKey.kind === \"mc\" || varKey.kind === \"oc\") {\r\n            const substring = input.substring(varKey.position, varKey.positionEnd);\r\n            if (varKey.textBefore.length > 0 && substring.includes(varKey.textBefore)) {\r\n              result.push({\r\n                text: varKey.textBefore,\r\n                color: \"orange\"\r\n              });\r\n            }\r\n            result.push({\r\n              text: varKey.name,\r\n              color: \"lightgreen\"\r\n            });\r\n            if (varKey.textAfter.length > 0 && substring.includes(varKey.textAfter)) {\r\n              result.push({\r\n                text: varKey.textAfter,\r\n                color: \"orange\"\r\n              });\r\n            }\r\n          } else {\r\n            // remaining variables are easy: add textBefore, since always present\r\n            // color the value text lightblue if parsing did not work (i.e. value is undefined) otherwise lightgreen\r\n            // add textAfter, if exists\r\n            result.push({\r\n              text: varKey.textBefore,\r\n              color: \"orange\"\r\n            });\r\n            // check the value\r\n            if (varKey.value === undefined) {\r\n              // if value could not be parsed, just add the text as light blue\r\n              result.push({\r\n                text: input.substring(varKey.position + 1 + varKey.textBefore.length, varKey.positionEnd),\r\n                color: \"lightblue\"\r\n              });\r\n            } else {\r\n              // otherwise parse the values accordingly\r\n              let resultText: string;\r\n              if (varKey.kind === \"date\") {\r\n                const value = varKey.value as NgbDateStruct;\r\n                resultText = value.day + \".\" + value.month + \".\" + value.year;\r\n              } else if (varKey.kind === \"ratio\") {\r\n                const value = varKey.value as [number, number];\r\n                resultText = value[0] + \"/\" + value[1];\r\n              } else {\r\n                resultText = varKey.value as string;\r\n              }\r\n              result.push({\r\n                text: resultText,\r\n                color: \"lightgreen\"\r\n              });\r\n            }\r\n            // check textAfter\r\n            if (varKey.textAfter.length > 0) {\r\n              result.push({\r\n                  text: varKey.textAfter,\r\n                  color: \"orange\"\r\n                }\r\n              );\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        // no variables means clickKey is immediately green, easiest case\r\n        result.push({\r\n          text: clickKey.synonym,\r\n          color: \"green\"\r\n        });\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private initializeKeywords(rootEl: M.TopLevel[]): void {\r\n    let clickKeys: KeyClickable[] = [];\r\n    clickKeys.push({\r\n      name: \"Rest normal\",\r\n      synonym: \"Rest normal\",\r\n      category: \"normal\",\r\n      position: -1,\r\n      nVariables: 0\r\n    });\r\n    for (const el of rootEl) {\r\n      if (el.kind === \"category\") {\r\n        const tempSelectables: KeyClickable[] = getClickableKeywords(el.selectables, el.name);\r\n        clickKeys = clickKeys.concat(tempSelectables);\r\n        this.extractVariableKeywords(el.selectables, el.name);\r\n      }\r\n    }\r\n    this.clickableKeywords = clickKeys;\r\n  }\r\n\r\n  private initializeDictionary(): void {\r\n    this.primaryDictionary = new Set<string>();\r\n    for (const clickKey of this.clickableKeywords) {\r\n      const split: string[] = clickKey.synonym.split(\" \");\r\n      split.forEach((word) => this.primaryDictionary.add(word));\r\n    }\r\n    for (const variables of this.varKeyDictionary.values()) {\r\n      for (const varKey of variables) {\r\n        if (varKey.synonym) {\r\n          const split: string[] = varKey.synonym.split(\" \");\r\n          split.forEach((word) => this.primaryDictionary.add(word));\r\n        }\r\n        if (varKey.textAfter) {\r\n          const split: string[] = varKey.textAfter.split(\" \");\r\n          split.forEach((word) => this.primaryDictionary.add(word));\r\n        }\r\n        if (varKey.textBefore) {\r\n          const split: string[] = varKey.textBefore.split(\" \");\r\n          split.forEach((word) => this.primaryDictionary.add(word));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Takes list of Selectables from a category and converts their variables into Keywords and adds them to the varKeyDict\r\n  private extractVariableKeywords(selectables: M.Selectable[], category: string): void {\r\n    let varKeys: KeyVariable[];\r\n    let id: string;\r\n    for (const sel of selectables) {\r\n      if (sel.kind === \"box\") {\r\n        id = category + \" \" + sel.name;\r\n        varKeys = getVariableKeywords(sel.variables, category, sel.name);\r\n        if (varKeys.length > 0) {\r\n          this.varKeyDictionary.set(id, varKeys);\r\n        }\r\n      } else if (sel.kind === \"group\") {\r\n        for (const option of sel.options) {\r\n          id = category + \" \" + option.name;\r\n          varKeys = getVariableKeywords(option.variables, category, option.name);\r\n          if (varKeys.length > 0) {\r\n            this.varKeyDictionary.set(id, varKeys);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport {MatDialogConfig} from \"@angular/material/dialog\";\r\nimport {ConfirmDialogModel} from \"../../shared/confirm-dialog/confirm-dialog.component\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class MatDialogService {\r\n\r\n  constructor() { }\r\n\r\n  defaultConfig(width?: string, data?: ConfirmDialogModel): MatDialogConfig {\r\n    const dialogConfig = new MatDialogConfig();\r\n\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.autoFocus = true;\r\n    dialogConfig.hasBackdrop = true;\r\n\r\n    if(width !== undefined) {\r\n      dialogConfig.width = width;\r\n    }\r\n\r\n    if(data !== undefined) {\r\n      dialogConfig.data = data;\r\n    }\r\n\r\n    return dialogConfig;\r\n  }\r\n}\r\n","import { ComponentPortal, DomPortalOutlet, PortalInjector } from \"@angular/cdk/portal\";\r\nimport { ApplicationRef, ComponentFactoryResolver, ComponentRef, Injectable, Injector } from \"@angular/core\";\r\n\r\nimport {POPOUT_MODAL_DATA, POPOUT_MODALS} from \"./popout.tokens\";\r\nimport { ImageDisplayComponent } from \"@app/shared\";\r\n\r\n\r\n@Injectable()\r\nexport class PopoutService {\r\n  styleSheetElement;\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private applicationRef: ApplicationRef\r\n  ) {\r\n  }\r\n\r\n  openPopoutModal(data) {\r\n    const windowInstance = this.openOnce(\r\n      \"assets/modal/popout.html\",\r\n      \"MODAL_POPOUT\"\r\n    );\r\n\r\n    // Wait for window instance to be created\r\n    setTimeout(() => {\r\n      this.createCDKPortal(data, windowInstance);\r\n    }, 1000);\r\n  }\r\n\r\n  openOnce(url, target) {\r\n    // Open a blank \"target\" window\r\n    // or get the reference to the existing \"target\" window\r\n    const winRef = window.open(\"\", target, \"\", true);\r\n    // If the \"target\" window was just opened, change its url\r\n    if (winRef.location.href === \"about:blank\") {\r\n      winRef.location.href = url;\r\n    }\r\n    return winRef;\r\n  }\r\n\r\n  createCDKPortal(data, windowInstance) {\r\n    if (windowInstance) {\r\n      // Create a PortalOutlet with the body of the new window document\r\n      const outlet = new DomPortalOutlet(windowInstance.document.body,\r\n        this.componentFactoryResolver, this.applicationRef, this.injector);\r\n\r\n      // Copy stylesheet link from parent window\r\n      this.styleSheetElement = this.getStyleSheetElement();\r\n      windowInstance.document.head.appendChild(this.styleSheetElement);\r\n\r\n      this.styleSheetElement.onload = () => {\r\n        // Clear popout modal content\r\n        windowInstance.document.body.innerText = \"\";\r\n        // Create an injector with modal data\r\n        const injector = this.createInjector(data);\r\n        // Attach the portal\r\n        windowInstance.document.title = \"Image Display\";\r\n        const componentInstance = this.attachContainer(outlet, injector);\r\n\r\n        POPOUT_MODALS[\"windowInstance\"] = windowInstance;\r\n        POPOUT_MODALS[\"outlet\"] = outlet;\r\n        POPOUT_MODALS[\"componentInstance\"] = componentInstance;\r\n      };\r\n    }\r\n  }\r\n\r\n  isPopoutWindowOpen() {\r\n    return POPOUT_MODALS[\"windowInstance\"] && !POPOUT_MODALS[\"windowInstance\"].closed;\r\n  }\r\n\r\n  focusPopoutWindow() {\r\n    POPOUT_MODALS[\"windowInstance\"].focus();\r\n  }\r\n\r\n  closePopoutModal() {\r\n    if (POPOUT_MODALS[\"windowInstance\"]) {\r\n      POPOUT_MODALS[\"windowInstance\"].close();\r\n    }\r\n  }\r\n\r\n  attachContainer(outlet, injector) {\r\n    const containerPortal = new ComponentPortal(ImageDisplayComponent, null, injector);\r\n    const containerRef: ComponentRef<ImageDisplayComponent> = outlet.attach(containerPortal);\r\n    return containerRef.instance;\r\n  }\r\n\r\n  createInjector(data): PortalInjector {\r\n    const injectionTokens = new WeakMap();\r\n    injectionTokens.set(POPOUT_MODAL_DATA, data);\r\n    return new PortalInjector(this.injector, injectionTokens);\r\n  }\r\n\r\n  getStyleSheetElement() {\r\n    const styleSheetElement = document.createElement(\"link\");\r\n    document.querySelectorAll(\"link\").forEach(htmlElement => {\r\n      if (htmlElement.rel === \"stylesheet\") {\r\n        const absoluteUrl = new URL(htmlElement.href).href;\r\n        styleSheetElement.rel = \"stylesheet\";\r\n        styleSheetElement.href = absoluteUrl;\r\n      }\r\n    });\r\n    return styleSheetElement;\r\n  }\r\n}\r\n","import { InjectionToken } from \"@angular/core\";\r\nimport {BoundingBox, Image} from \"@app/models\";\r\n\r\nexport interface PopoutData {\r\n  scans: {\r\n    id: string;\r\n    mainScan: Image;\r\n    lateralScan?: Image;\r\n    preScan?: Image;\r\n  };\r\n  coordinates: {\r\n    main: BoundingBox[];\r\n    lateral: BoundingBox[];\r\n    pre: BoundingBox[];\r\n  };\r\n  restricted?: boolean;\r\n}\r\n\r\nexport const POPOUT_MODAL_DATA = new InjectionToken<PopoutData>(\"POPOUT_MODAL_DATA\");\r\n\r\nexport const POPOUT_MODALS = {\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class RadiolearnService {\r\n\r\n  constructor() { }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\n\r\nimport { environment } from \"@env/environment\";\r\nimport {Role, User} from \"@app/models\";\r\n\r\n@Injectable({ providedIn: \"root\" })\r\nexport class UserService {\r\n\r\n  url = environment.backend + environment.authentication;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  getAll() {\r\n    return this.http.get<User[]>(this.url + \"users\");\r\n  }\r\n\r\n  getById(id: string) {\r\n    return this.http.get<User>(this.url + \"users/\" + id);\r\n  }\r\n\r\n  changeUsername(id: string, newUsername: string, password: string) {\r\n    return this.http.post<{message: string}>(this.url + \"users/changeUsername/\" + id,\r\n      {\r\n        newUsername,\r\n        password\r\n      });\r\n  }\r\n\r\n  changePassword(id: string, password: string, newPassword: string) {\r\n    return this.http.post<{message: string}>(this.url + \"users/changePassword/\" + id,\r\n      {\r\n        password,\r\n        newPassword\r\n      });\r\n  }\r\n\r\n  deleteUser(id: string) {\r\n    return this.http.delete<{message: string}>(this.url + \"users/\" + id);\r\n  }\r\n\r\n  signUp(username: string, password: string, role: Role) {\r\n    return this.http.post<{message: string}>(this.url + \"signUp\",\r\n      {\r\n        username,\r\n        password,\r\n        role\r\n        }\r\n      );\r\n  }\r\n\r\n}\r\n","<div class=\"main\">\r\n  <div class=\"buttons\">\r\n    <button class=\"btn\"\r\n            [ngClass]=\"this.changeUsername ? 'btn-primary' : 'btn-outline-primary'\"\r\n            (click)=\"setChangeUsername()\">Nutzername ändern</button>\r\n    <button class=\"btn\"\r\n            [ngClass]=\"this.changePassword ? 'btn-primary' : 'btn-outline-primary'\"\r\n            (click)=\"setChangePassword()\">Passwort ändern</button>\r\n  </div>\r\n\r\n  <div class=\"card-view\">\r\n    <app-change-username *ngIf=\"changeUsername\" [userID]=\"userID\"></app-change-username>\r\n    <app-change-password *ngIf=\"changePassword\" [userID]=\"userID\"></app-change-password>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport {User} from \"@app/models\";\r\nimport {AuthenticationService} from \"@app/core\";\r\n\r\n@Component({\r\n  selector: \"app-account-management\",\r\n  templateUrl: \"./account-management.component.html\",\r\n  styleUrls: [\"./account-management.component.scss\"]\r\n})\r\nexport class AccountManagementComponent implements OnInit {\r\n\r\n  changeUsername = true;\r\n  changePassword = false;\r\n\r\n  private user: User;\r\n\r\n  constructor(private authenticationService: AuthenticationService) { }\r\n\r\n  get userID() {\r\n    return this.user.id;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n  }\r\n\r\n  setChangeUsername() {\r\n    this.changeUsername = true;\r\n    this.changePassword = false;\r\n  }\r\n\r\n  setChangePassword() {\r\n    this.changePassword = true;\r\n    this.changeUsername = false;\r\n  }\r\n\r\n}\r\n","<app-sign-up></app-sign-up>\r\n\r\n<div class=\"col-md-6 offset-md-3 mt-5\">\r\n  <div class=\"card\">\r\n    <h4 class=\"card-header\">User List</h4>\r\n    <div class=\"card-body\">\r\n      <table>\r\n        <tr>\r\n          <th class=\"text\">Username</th>\r\n          <th class=\"text\">Role</th>\r\n          <th class=\"text\">Löschen</th>\r\n          <th class=\"text\">Rolle ändern</th>\r\n        </tr>\r\n        <tr *ngFor=\"let user of users\">\r\n          <td class=\"text\">{{user.username}}</td>\r\n          <td class=\"text\">{{user.role}}</td>\r\n          <td class=\"button\">\r\n            <button class=\"btn btn-danger\" (click)=\"deleteUser(user.id)\">Löschen</button>\r\n          </td>\r\n          <td class=\"button\">\r\n            <button class=\"btn btn-outline-primary\" (click)=\"changeRole(user.id)\">Rolle ändern</button>\r\n          </td>\r\n        </tr>\r\n      </table>\r\n      <div class=\"form-group\">\r\n        <button style=\"float:right\" class=\"btn btn-primary\" (click)=\"getUserList()\">Liste neu laden</button>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"users === undefined\">\r\n      Keine User vorhanden\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n","import {Component, ComponentRef, OnInit, ViewChild} from \"@angular/core\";\r\nimport {Role, User} from \"@app/models\";\r\nimport {AuthenticationService, UserService} from \"@app/core\";\r\n\r\n@Component({\r\n  selector: \"app-admin\",\r\n  templateUrl: \"./admin.component.html\",\r\n  styleUrls: [\"./admin.component.scss\"]\r\n})\r\nexport class AdminComponent implements OnInit {\r\n\r\n  users: User[];\r\n\r\n  // @ViewChild(\"signUp\") signUp: ComponentRef<>;\r\n\r\n  constructor(private userService: UserService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getUserList();\r\n  }\r\n\r\n  getUserList() {\r\n    this.userService.getAll().subscribe(users => this.users = users);\r\n  }\r\n\r\n  changeRole(id: string) {\r\n    // TODO\r\n  }\r\n\r\n  deleteUser(id: string) {\r\n    const result = window.confirm(\"Sicher, dass Sie den User löschen möchten?\");\r\n    if (result) {\r\n      this.userService.deleteUser(id)\r\n        .subscribe(\r\n          (res) => {\r\n          window.alert(res.message);\r\n          this.getUserList();\r\n        },\r\n          err => window.alert(err));\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { ReactiveFormsModule } from \"@angular/forms\";\r\nimport { NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\n\r\nimport { SharedModule } from \"@app/shared/shared.module\";\r\n\r\nimport { JudgeMatComponent } from \"@app/feature/judge-mat/judge-mat.component\";\r\nimport { ListComponent } from \"@app/feature/list/list.component\";\r\nimport { ListMaterialComponent } from \"@app/feature/list-material/list-material.component\";\r\nimport { UiBaseComponent } from \"@app/feature/ui-base/ui-base.component\";\r\nimport { AccountManagementComponent } from \"./account-management/account-management.component\";\r\nimport { AdminComponent } from \"@app/feature/admin/admin.component\";\r\nimport { RadiolearnComponent } from \"./radiolearn/radiolearn.component\";\r\nimport { RadiolearnViewComponent } from \"./radiolearn-view/radiolearn-view.component\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    JudgeMatComponent,\r\n    ListComponent,\r\n    ListMaterialComponent,\r\n    UiBaseComponent,\r\n    AccountManagementComponent,\r\n    AdminComponent,\r\n    RadiolearnComponent,\r\n    RadiolearnViewComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    NgbModule,\r\n    FormsModule,\r\n    SharedModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  exports: [\r\n    JudgeMatComponent,\r\n    ListComponent,\r\n    ListMaterialComponent,\r\n    UiBaseComponent,\r\n    AccountManagementComponent,\r\n    AdminComponent,\r\n    RadiolearnComponent,\r\n    RadiolearnViewComponent\r\n  ]\r\n})\r\nexport class FeatureModule { }\r\n","<div class=\"main\">\r\n  <div class=\"header\">\r\n    <div class=\"buttons\">\r\n      <button id=\"back\" title=\"Go back to list\"\r\n              [routerLink]=\"['/', 'listMat']\"\r\n              class=\"btn btn-outline-secondary\">Zurück</button>\r\n      <button id=\"open-images\"\r\n              (click)=\"openImagePopout()\"\r\n              class=\"btn btn-outline-secondary\">Bilder anzeigen</button>\r\n      <button id=\"normal-button\"\r\n              (click)=\"makeNormal()\"\r\n              class=\"btn btn-outline-secondary\">Rest normal</button>\r\n      <button id=\"submit\" title=\"Änderungen speichern\"\r\n              (click)=\"submit()\"\r\n              class=\"btn btn-outline-primary\">Speichern</button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"content\" *ngIf=\"categories\">\r\n    <app-report class=\"report\" [report]=\"report\" [judgement]=\"judgement\"></app-report>\r\n    <app-options class=\"options\" (clickEvent)=\"onClick()\" [categories]=\"categories\"></app-options>\r\n  </div>\r\n</div>\r\n","import {Component, HostListener, OnDestroy, OnInit} from \"@angular/core\";\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\n\r\nimport * as M from \"@app/models/templateModel\";\r\nimport {Material, Role, User} from \"@app/models\";\r\nimport {\r\n  DataParserService,\r\n  PopoutService,\r\n  POPOUT_MODALS,\r\n  PopoutData,\r\n  BackendCallerService,\r\n  AuthenticationService\r\n} from \"@app/core\";\r\n\r\n@Component({\r\n  selector: \"app-judge-mat\",\r\n  templateUrl: \"./judge-mat.component.html\",\r\n  styleUrls: [\"./judge-mat.component.scss\"]\r\n})\r\nexport class JudgeMatComponent implements OnInit, OnDestroy {\r\n\r\n  material: Material;\r\n  categories: M.Category[];\r\n  report = \"\";\r\n  judgement = \"\";\r\n\r\n  private user: User;\r\n\r\n  constructor(private backendCaller: BackendCallerService,\r\n              private route: ActivatedRoute,\r\n              private router: Router,\r\n              private dataParser: DataParserService,\r\n              private popoutService: PopoutService,\r\n              private authenticationService: AuthenticationService) { }\r\n\r\n  @HostListener(\"window:beforeunload\", [\"$event\"])\r\n  onWindowClose(event: Event) {\r\n    this.popoutService.closePopoutModal();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n    this.getData();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.popoutService.closePopoutModal();\r\n  }\r\n\r\n  getData() {\r\n    this.route.paramMap.subscribe(ps => {\r\n      if (ps.has(\"id\")) {\r\n        const matID = ps.get(\"id\");\r\n        this.backendCaller.getMaterialById(matID).subscribe((material: Material) => {\r\n          if (material === undefined) {\r\n            window.alert(\"Der Eintrag mit dieser ID existiert nicht! \" +\r\n              \"Bitte zur Aufnahmenliste zurückkehren und eines der dort aufgeführten Aufnahmen auswählen.\");\r\n          } else {\r\n            this.material = material;\r\n            this.categories = this.dataParser.extractCategories(this.material.template.parts, false);\r\n            this.openImagePopout();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  updateText(): void {\r\n    [this.report, this.judgement] = this.dataParser.makeText(this.material.template.parts);\r\n  }\r\n\r\n  resetText(): void {\r\n    this.report = \"\";\r\n    this.judgement = \"\";\r\n  }\r\n\r\n  onClick() {\r\n    setTimeout(() => this.updateText(), 1);\r\n  }\r\n\r\n  makeNormal() {\r\n    this.dataParser.makeNormal(this.material.template.parts);\r\n    this.updateText();\r\n    console.log(POPOUT_MODALS[\"componentInstance\"]);\r\n  }\r\n\r\n  submit() {\r\n    this.backendCaller.updateMaterial(this.material).subscribe(res => {\r\n      window.alert(res.message);\r\n      this.router.navigateByUrl(\"/listMat\");\r\n    });\r\n  }\r\n\r\n  openImagePopout() {\r\n    const restricted = !(this.user.role === Role.Admin || this.user.role === Role.Moderator);\r\n    const modalData: PopoutData = {\r\n      scans: this.material.scans,\r\n      coordinates: this.material.coordinates,\r\n      restricted\r\n    };\r\n    this.popoutService.openPopoutModal(modalData);\r\n  }\r\n\r\n}\r\n","<div class=\"main\">\r\n\r\n  <h4>Aufnahme zum Befunden auswählen</h4>\r\n\r\n  <div class=\"row\">\r\n    <div ngbDropdown class=\"d-inline-block\">\r\n      <button class=\"btn btn-outline-primary\" style=\"margin-right: 10px;\" id=\"dropdownBasic1\" ngbDropdownToggle>Bereits bearbeitete Einträge anzeigen</button>\r\n      <div ngbDropdownMenu aria-labelledby=\"dropdownBasic1\">\r\n        <button ngbDropdownItem (click)=\"changeQuery(true)\">Ja</button>\r\n        <button ngbDropdownItem (click)=\"changeQuery(false)\">Nein</button>\r\n      </div>\r\n      <button class=\"btn btn-outline-secondary\" (click)=\"reload()\" id=\"reloadButton\">Aufnahmen neu Laden</button>\r\n      <button class=\"btn btn-outline-primary\" style=\"float: right;\"\r\n              id=\"uploadButton\" (click)=\"openUploadDialog()\">Aufnahmen hochladen</button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"tableDiv\" *ngIf=\"this.materials.length > 0; else noEntry\">\r\n    <table class=\"listMatTable\">\r\n      <tr>\r\n        <th class=\"body\">Frontalaufnahme</th>\r\n        <th class=\"body\">Lateralaufnahme</th>\r\n        <th class=\"body\">Voraufnahme</th>\r\n        <th class=\"meta\">Metadaten</th>\r\n      </tr>\r\n      <tr *ngFor=\"let material of this.materials\">\r\n        <td class=\"img\">\r\n          <img src=\"{{imageUrl}}{{material.scans.id}}/{{material.scans.mainScan.filename}}\"\r\n                             width=\"300px\"\r\n                             alt=\"Fehler beim Laden der Aufnahme\"\r\n          (click)=\"openEditor(material._id)\"/>\r\n          <span>{{material.scans.mainScan.filename}}</span>\r\n        </td>\r\n        <td class=\"img\">\r\n          <ng-container *ngIf=\"material.scans.lateralScan !== undefined; else noScan\">\r\n            <img src=\"{{imageUrl}}{{material.scans.id}}/{{material.scans.lateralScan.filename}}\"\r\n                               width=\"300px\"\r\n                               alt=\"Fehler beim Laden der Aufnahme\"\r\n                               (click)=\"openEditor(material._id)\"/>\r\n            <span>{{material.scans.lateralScan.filename}}</span>\r\n          </ng-container>\r\n        </td>\r\n        <td class=\"img\">\r\n          <ng-container *ngIf=\"material.scans.preScan !== undefined; else noScan\">\r\n\r\n            <img src=\"{{imageUrl}}{{material.scans.id}}/{{material.scans.preScan.filename}}\"\r\n                               width=\"300px\"\r\n                               alt=\"Fehler beim Laden der Aufnahme\"\r\n                               (click)=\"openEditor(material._id)\"/>\r\n            <span>{{material.scans.preScan.filename}}</span>\r\n          </ng-container>\r\n        </td>\r\n        <td class=\"meta\">\r\n          <table class=\"metatable\">\r\n            <tr>\r\n              <td class=\"metadata\">Modalität:</td>\r\n              <td class=\"metadata\">{{material.modality}}</td>\r\n            </tr>\r\n            <tr>\r\n              <td class=\"metadata\">Template:</td>\r\n              <td class=\"metadata\">{{material.template.name}}</td>\r\n            </tr>\r\n            <tr>\r\n              <td class=\"metadata\">Boxen vorhanden in:</td>\r\n              <td class=\"metadata\">{{checkBoxes(material.coordinates)}}</td>\r\n            </tr>\r\n          </table>\r\n              <button class=\"btn btn-outline-primary custom-button\"\r\n                        (click)=\"openEditor(material._id)\">Start Befundung</button>\r\n          <button class=\"btn btn-danger custom-button\" (click)=\"delete(material._id, material.scans.id)\">Entfernen</button>\r\n        </td>\r\n      </tr>\r\n\r\n    </table>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #noEntry>\r\n  <div style=\"padding: 10px;\">\r\n    Keine Einträge gefunden.\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #noScan><td class=\"text\">Keine Aufnahme vorhanden</td></ng-template>\r\n\r\n\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport {Router} from \"@angular/router\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\n\r\nimport {environment} from \"@env/environment\";\r\nimport {BoundingBox, Material} from \"@app/models\";\r\nimport {BackendCallerService, MatDialogService} from \"@app/core\";\r\nimport {UploadMaterialComponent, ConfirmDialogComponent, ConfirmDialogModel} from \"@app/shared\";\r\n\r\n@Component({\r\n  selector: \"app-display-material\",\r\n  templateUrl: \"./list-material.component.html\",\r\n  styleUrls: [\"./list-material.component.scss\"]\r\n})\r\nexport class ListMaterialComponent implements OnInit {\r\n\r\n  imageUrl = environment.backend + \"images/\";\r\n  materials: Material[] = [];\r\n  query: Record<string, unknown>;\r\n\r\n  constructor(private backendCaller: BackendCallerService,\r\n              private router: Router,\r\n              private dialogService: MatDialogService,\r\n              private dialog: MatDialog) { }\r\n\r\n  ngOnInit(): void {\r\n    this.query = {\r\n      judged: false\r\n    };\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    this.backendCaller.queryMaterials(this.query).subscribe((mats: Material[]) => {\r\n      this.materials = mats;\r\n    });\r\n  }\r\n\r\n  reload() {\r\n    this.getData();\r\n  }\r\n\r\n  changeQuery(newValue: boolean) {\r\n    this.query = {\r\n      judged: newValue\r\n    };\r\n    this.getData();\r\n  }\r\n\r\n  checkBoxes(coordinates: Record<string, BoundingBox[]>): string {\r\n    const res: string[] = [];\r\n    if (coordinates.main.length > 0) {\r\n      res.push(\"Hauptaufnahme\");\r\n    }\r\n    if (coordinates.lateral.length > 0) {\r\n      res.push(\"Lateralaufnahme\");\r\n    }\r\n    if (coordinates.pre.length > 0) {\r\n      res.push(\"Voraufnahme\");\r\n    }\r\n\r\n    if (res.length > 0) {\r\n      return res.join(\", \");\r\n    } else {\r\n      return \"Keiner Aufnahme\";\r\n    }\r\n\r\n  }\r\n\r\n  delete(objectID: string, scanID: string) {\r\n    const dialogData = new ConfirmDialogModel(\r\n      \"warning\",\r\n      \"Entfernen bestätigen\",\r\n      \"Möchten Sie diesen Eintrag wirklich entfernen?\");\r\n\r\n    const dialogConfig = this.dialogService.defaultConfig(\"400px\", dialogData);\r\n    dialogConfig.position = { top: \"50px\" };\r\n\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(dialogResult => {\r\n      if (dialogResult) {\r\n        this.backendCaller.deleteMaterial(objectID, scanID).subscribe(res => {\r\n          window.alert(\"Eintrag erfolgreich gelöscht.\");\r\n          this.getData();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  openEditor(matID: string) {\r\n    this.router.navigate([\"/\", \"mainMat\", matID]).then();\r\n  }\r\n\r\n  openUploadDialog() {\r\n    const dialogConfig = this.dialogService.defaultConfig(\"600px\");\r\n    const dialogRef = this.dialog.open(UploadMaterialComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(() => {\r\n      this.reload();\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"main\">\r\n\r\n  <div>\r\n    <h4>Schablone wählen</h4>\r\n    <table  class=\"liste\">\r\n      <tr *ngFor=\"let template of templates; let i = index\" class=\"list-row\">\r\n        <td class=\"text\"><ul><li><a style=\"text-decoration: none;\" [routerLink]=\"['/', 'main', template._id]\">{{template.name}}</a></li></ul></td>\r\n        <td class=\"text\">vom {{displayDate(template.timestamp)}}</td>\r\n        <td class=\"button\">\r\n          <button *ngIf=\"isMod\" class=\"btn btn-secondary ml-3 disabled\" [routerLink]=\"['/', 'edit', template.name]\">\r\n          Edit</button></td>\r\n        <td class=\"button\">\r\n          <button *ngIf=\"isMod\" class=\"btn btn-danger ml-3\" (click)=\"removeAlert(template._id, template.name)\">\r\n          Entfernen</button></td>\r\n      </tr>\r\n    </table>\r\n    <ng-container *ngIf=\"templates.length === 0\">\r\n      Es wurde noch nichts hochgeladen\r\n    </ng-container>\r\n  </div>\r\n\r\n  <div *ngIf=\"isMod\" class=\"buttons\">\r\n    <button class=\"btn btn-outline-primary\" (click)=\"openUploadDialog()\">Schablone hochladen</button>\r\n    <button class=\"btn btn-outline-primary disabled\">Neue Schablone erstellen</button>\r\n  </div>\r\n\r\n</div>\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { MatDialog } from \"@angular/material/dialog\";\r\nimport { ConfirmDialogComponent, ConfirmDialogModel } from \"@app/shared/confirm-dialog/confirm-dialog.component\";\r\n\r\nimport {BackendCallerService, MatDialogService, AuthenticationService} from \"@app/core\";\r\nimport {Template} from \"@app/models\";\r\nimport {UploadComponent} from \"@app/shared\";\r\nimport {Role, User} from \"@app/models\";\r\n\r\n\r\n@Component({\r\n  selector: \"app-list\",\r\n  templateUrl: \"./list.component.html\",\r\n  styleUrls: [\"./list.component.scss\"]\r\n})\r\nexport class ListComponent implements OnInit {\r\n\r\n  templates: Template[] = [];\r\n  isLoading: boolean;\r\n\r\n  private user: User;\r\n\r\n  constructor(private dialog: MatDialog,\r\n              private backendCaller: BackendCallerService,\r\n              private dialogService: MatDialogService,\r\n              private authenticationService: AuthenticationService\r\n  ) { }\r\n\r\n  get isMod() {\r\n    return this.user && (this.user.role === Role.Admin || this.user.role === Role.Moderator);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n    this.isLoading = true;\r\n    this.update();\r\n  }\r\n\r\n  update(): void {\r\n    this.backendCaller.getTemplateList().subscribe((templates) => {\r\n      this.templates = templates;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  removeAlert(id: string, name: string) {\r\n    const dialogData = new ConfirmDialogModel(\r\n      \"warning\",\r\n      \"Entfernen bestätigen\",\r\n      \"Möchten Sie die Schablone '\" + name + \"' wirklich entfernen?\");\r\n\r\n    const dialogConfig = this.dialogService.defaultConfig(\"400px\", dialogData);\r\n    dialogConfig.position = { top: \"50px\" };\r\n\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(dialogResult => {\r\n      if (dialogResult) {\r\n        this.remove(id);\r\n      }\r\n    });\r\n  }\r\n\r\n  remove(id: string): void {\r\n    this.backendCaller.deleteTemplate(id).subscribe(res => {\r\n      this.update();\r\n    });\r\n  }\r\n\r\n  displayDate(date: string | Date): string {\r\n    if (typeof(date) === \"string\") {\r\n      date = new Date(date);\r\n    }\r\n    return date.getDate() + \".\" + date.getMonth() + \".\" + date.getFullYear();\r\n  }\r\n\r\n  openUploadDialog() {\r\n    const dialogConfig = this.dialogService.defaultConfig(\"470px\");\r\n    const dialogRef = this.dialog.open(UploadComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(() => {\r\n      this.update();\r\n    });\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-radiolearn-view',\r\n  templateUrl: './radiolearn-view.component.html',\r\n  styleUrls: ['./radiolearn-view.component.css']\r\n})\r\nexport class RadiolearnViewComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>radiolearn-view works!</p>\r\n","import { Component, OnInit } from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-radiolearn\",\r\n  templateUrl: \"./radiolearn.component.html\",\r\n  styleUrls: [\"./radiolearn.component.css\"]\r\n})\r\nexport class RadiolearnComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>radiolearn works!</p>\r\n","<div class=\"main\">\r\n  <div class=\"header\">\r\n    <div class=\"inputArea\">\r\n      <label class=\"inputLabel\" for=\"input\">Eingabe:</label>\r\n      <input class=\"inputBox\" id=\"input\" name=\"Befund\" type=\"text\" [(ngModel)]=\"this.input\"\r\n             (input)=\"onInput($event)\" placeholder=\"Befund eingeben...\">\r\n    </div>\r\n    <div class=\"buttons\">\r\n      <a *ngIf=\"isAdmin\" class=\"btn btn-outline-secondary\" title=\"Download JSON\" (click)=generateDownloadJson(parts)\r\n         [href]=\"downJson\" download=\"befund.json\">Download JSON</a>\r\n      <button id=\"normal-button\" (click)=\"makeNormal()\"\r\n              class=\"btn btn-outline-secondary\">Rest normal</button>\r\n      <button id=\"reset-button\" (click)=\"reset()\"\r\n              class=\"btn btn-outline-secondary\">Zurücksetzen</button>\r\n      <button id=\"back\" title=\"Go back to list\" [routerLink]=\"['/', 'list']\"\r\n              class=\"btn btn-outline-secondary\">Zurück</button>\r\n    </div>\r\n\r\n    <div class=\"inputText\" id=\"inputText\" >\r\n      <ng-container *ngIf=\"foundKeywords.length === 0\">Detected keywords go here</ng-container>\r\n      <ng-container *ngFor=\"let keyword of foundKeywords\">\r\n        <span [ngStyle]=\"{'background-color': keyword.color}\">{{keyword.text}}</span>\r\n      <span>&nbsp;</span></ng-container>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"content\" *ngIf=\"categories\">\r\n    <app-report class=\"report\" [report]=\"report\" [judgement]=\"judgement\"></app-report>\r\n    <app-options class=\"options\" (clickEvent)=\"onClick()\" [categories]=\"categories\"></app-options>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from \"@angular/core\";\r\nimport {ActivatedRoute} from \"@angular/router\";\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {Location} from \"@angular/common\";\r\nimport {DomSanitizer, SafeUrl} from \"@angular/platform-browser\";\r\n\r\nimport {DataParserService, BackendCallerService, InputParserService, AuthenticationService} from \"@app/core\";\r\nimport {OptionsComponent} from \"@app/shared\";\r\nimport {Template, Category, TopLevel, User, Role, Variable, ColoredText} from \"@app/models\";\r\nimport {NgbDateStruct} from \"@ng-bootstrap/ng-bootstrap\";\r\n\r\n@Component({\r\n  selector: \"app-workspace\",\r\n  templateUrl: \"./ui-base.component.html\",\r\n  styleUrls: [\"./ui-base.component.scss\"],\r\n})\r\n\r\nexport class UiBaseComponent implements OnInit {\r\n\r\n  @ViewChild(OptionsComponent)\r\n  private optionsComponent: OptionsComponent;\r\n\r\n  parts: TopLevel[];\r\n  defaultParts: TopLevel[];\r\n\r\n  input = \"\";\r\n  foundKeywords: ColoredText[] = [];\r\n\r\n  categories: Category[];\r\n  report = \"\";\r\n  judgement = \"\";\r\n\r\n  downJson: SafeUrl;\r\n\r\n  user: User;\r\n\r\n  constructor(private http: HttpClient,\r\n              private route: ActivatedRoute,\r\n              private dataParser: DataParserService,\r\n              private _location: Location,\r\n              private inputParser: InputParserService,\r\n              private backendCaller: BackendCallerService,\r\n              private sanitizer: DomSanitizer,\r\n              private authenticationService: AuthenticationService) {\r\n  }\r\n\r\n  get isModerator() {\r\n    return this.user && (this.user.role === Role.Admin || this.user.role === Role.Moderator);\r\n  }\r\n\r\n  get isAdmin() {\r\n    return this.user && this.user.role === Role.Admin;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n    this.getData();\r\n  }\r\n\r\n  // gets parts from node server via id in url\r\n  getData() {\r\n    this.route.paramMap.subscribe(ps => {\r\n      if (ps.has(\"id\")) {\r\n        const templateID = ps.get(\"id\");\r\n        this.backendCaller.getTemplateById(templateID).subscribe((template: Template) => {\r\n          if (template === undefined) {\r\n            window.alert(\"Dieses Dictionary existiert nicht! \" +\r\n              \"Bitte auf List Seite zurückkehren und eines der dort aufgeführten Dictionaries auswählen.\");\r\n          } else {\r\n            this.parts = template.parts;\r\n            this.defaultParts = JSON.parse(JSON.stringify(this.parts));\r\n            this.categories = this.dataParser.extractCategories(this.parts, false);\r\n            this.inputParser.init(this.defaultParts);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // auxiliary function to get parsed json (mostly because of missing excel parser in node)\r\n  generateDownloadJson(jsonData) {\r\n    const json = JSON.stringify(jsonData);\r\n    this.downJson = this.sanitizer.bypassSecurityTrustUrl(\"data:text/json;charset=UTF-8,\" + encodeURIComponent(json));\r\n  }\r\n\r\n  updateText(): void {\r\n    [this.report, this.judgement] = this.dataParser.makeText(this.parts);\r\n  }\r\n\r\n  resetText(): void {\r\n    this.report = \"\";\r\n    this.judgement = \"\";\r\n  }\r\n\r\n  onClick() {\r\n    setTimeout(() => this.updateText(), 1);\r\n  }\r\n\r\n  onInput(ev) {\r\n    if(ev.inputType === \"deleteContentBackward\") {\r\n      this.reset();\r\n    }\r\n    if (this.input[this.input.length - 1] === \" \") {\r\n      this.input = this.inputParser.autocorrect(this.input);\r\n    }\r\n    this.inputParser.parseInput(this.input);\r\n    this.assignValues();\r\n    this.foundKeywords = this.inputParser.getColoredText(this.input);\r\n    setTimeout(() => this.updateText(), 5);\r\n  }\r\n\r\n  // Assigns all found keywords in inputParser to this.parts\r\n  assignValues() {\r\n    for (const key of this.inputParser.foundClickables) {\r\n      if (key.name === \"Rest normal\") {\r\n        this.makeNormal();\r\n      } else {\r\n        const foundVariables = this.inputParser.foundVariables.get(key.category + \" \" + key.name);\r\n        const cat = this.categories.find(c =>\r\n          c.name === key.category\r\n        );\r\n        const sel = cat.selectables.find(s =>\r\n          s.name === key.name || s.name === key.group\r\n        );\r\n        let variables: Variable[];\r\n        if (sel.kind === \"box\") {\r\n          sel.value = true;\r\n          variables = sel.variables;\r\n        } else {\r\n          sel.value = key.name;\r\n          const option = sel.options.find(o => o.name === key.name);\r\n          variables = option.variables;\r\n        }\r\n        // assign variable values\r\n        if (variables.length > 0 && foundVariables !== undefined) {\r\n          for (const varKey of foundVariables) {\r\n            const vari = variables.find(v => v.id === varKey.id);\r\n            if (vari.kind === \"oc\") {\r\n              vari.value = varKey.name;\r\n            } else if (vari.kind === \"mc\") {\r\n              const val = vari.values.find(v => v[0] === varKey.name);\r\n              val[1] = true;\r\n            } else if (varKey.value !== undefined) {\r\n              if (vari.kind === \"ratio\") {\r\n                vari.numerator = varKey.value[0] as number;\r\n                vari.denominator = varKey.value[1] as number;\r\n              } else if (vari.kind === \"text\") {\r\n                vari.value = varKey.value as string;\r\n              } else if (vari.kind === \"number\") {\r\n                vari.value = varKey.value as number;\r\n              } else {\r\n                vari.value = varKey.value as NgbDateStruct;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  makeNormal() {\r\n    this.dataParser.makeNormal(this.parts);\r\n    this.updateText();\r\n  }\r\n\r\n  // for when the radiologist finishes: empty parts and input\r\n  // Will not be necessary once the input is streamed\r\n  next() {\r\n    this.reset();\r\n    this.input = \"\";\r\n  }\r\n\r\n  reset() {\r\n    this.parts = JSON.parse(JSON.stringify(this.defaultParts));\r\n    this.categories = this.dataParser.extractCategories(this.parts, false);\r\n    setTimeout(() => this.optionsComponent.initRows(), 1);\r\n    setTimeout(() => this.resetText(), 1);\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from \"@angular/router\";\r\n\r\nimport { AuthenticationService } from \"@app/core/services/authentication.service\";\r\n\r\n@Injectable({ providedIn: \"root\" })\r\nexport class AuthGuard implements CanActivate {\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private authenticationService: AuthenticationService\r\n  ) { }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n    const user = this.authenticationService.userValue;\r\n    if (user) {\r\n      // check if route is restricted by role\r\n      if (route.data.roles && route.data.roles.indexOf(user.role) === -1) {\r\n        // role not authorised so redirect to home page\r\n        this.router.navigate([\"/\"]).then();\r\n        return false;\r\n      }\r\n\r\n      // authorised so return true\r\n      return true;\r\n    }\r\n\r\n    // not logged in so redirect to login page with the return url\r\n    this.router.navigate([\"/login\"], { queryParams: { returnUrl: state.url } }).then();\r\n    return false;\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from \"@angular/common/http\";\r\nimport { Observable, throwError } from \"rxjs\";\r\nimport { catchError } from \"rxjs/operators\";\r\n\r\nimport { AuthenticationService } from \"@app/core/services/authentication.service\";\r\n\r\n@Injectable()\r\nexport class ErrorInterceptor implements HttpInterceptor {\r\n  constructor(private authenticationService: AuthenticationService) { }\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    return next.handle(request).pipe(catchError(err => {\r\n      if ([401, 403].indexOf(err.status) !== -1) {\r\n        // auto logout if 401 Unauthorized or 403 Forbidden response returned from api\r\n        this.authenticationService.logout();\r\n      }\r\n\r\n      const error = err.error.message || err.statusText;\r\n      return throwError(error);\r\n    }));\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpRequest, HttpResponse, HttpHandler, HttpEvent, HttpInterceptor, HTTP_INTERCEPTORS } from \"@angular/common/http\";\r\nimport { Observable, of, throwError } from \"rxjs\";\r\nimport { delay, materialize, dematerialize } from \"rxjs/operators\";\r\n\r\nimport { Role } from \"@app/models\";\r\n\r\nconst users = [\r\n  { id: 1, username: \"admin\", password: \"admin\", role: Role.Admin },\r\n  { id: 2, username: \"student\", password: \"student\", role: Role.User },\r\n  { id: 3, username: \"arzt\", password: \"arzt\", role: Role.Moderator },\r\n];\r\n\r\n@Injectable()\r\nexport class FakeBackendInterceptor implements HttpInterceptor {\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    const { url, method, headers, body } = request;\r\n\r\n    return handleRoute();\r\n\r\n    function handleRoute() {\r\n      switch (true) {\r\n        case url.endsWith(\"/radio/auth/signIn\") && method === \"POST\":\r\n          return authenticate();\r\n        case url.endsWith(\"/users\") && method === \"GET\":\r\n          return getUsers();\r\n        case url.match(/\\/users\\/\\d+$/) && method === \"GET\":\r\n          return getUserById();\r\n        default:\r\n          // pass through any requests not handled above\r\n          return next.handle(request);\r\n      }\r\n\r\n    }\r\n\r\n    // route functions\r\n\r\n    function authenticate() {\r\n      const { username, password } = body;\r\n      const user = users.find(x => x.username === username && x.password === password);\r\n      if (!user) {\r\n        return error(\"Username or password is incorrect\");\r\n      }\r\n      return ok({\r\n        id: user.id,\r\n        username: user.username,\r\n        role: user.role,\r\n        token: `fake-jwt-token.${user.id}`\r\n      });\r\n    }\r\n\r\n    function getUsers() {\r\n      if (!isAdmin()) {\r\n        return unauthorized();\r\n      }\r\n      return ok(users);\r\n    }\r\n\r\n    function getUserById() {\r\n      if (!isLoggedIn()) {\r\n        return unauthorized();\r\n      }\r\n\r\n      // only admins can access other user records\r\n      if (!isAdmin() && currentUser().id !== idFromUrl()) {\r\nreturn unauthorized();\r\n}\r\n\r\n      const user = users.find(x => x.id === idFromUrl());\r\n      return ok(user);\r\n    }\r\n\r\n    // helper functions\r\n\r\n    function ok(body) {\r\n      return of(new HttpResponse({ status: 200, body }))\r\n        .pipe(delay(500)); // delay observable to simulate server api call\r\n    }\r\n\r\n    function unauthorized() {\r\n      return throwError({ status: 401, error: { message: \"unauthorized\" } })\r\n        .pipe(materialize(), delay(500), dematerialize()); // call materialize and dematerialize to ensure delay even if an error is thrown (https://github.com/Reactive-Extensions/RxJS/issues/648);\r\n    }\r\n\r\n    function error(message) {\r\n      return throwError({ status: 400, error: { message } })\r\n        .pipe(materialize(), delay(500), dematerialize());\r\n    }\r\n\r\n    function isLoggedIn() {\r\n      const authHeader = headers.get(\"Authorization\") || \"\";\r\n      return authHeader.startsWith(\"Bearer fake-jwt-token\");\r\n    }\r\n\r\n    function isAdmin() {\r\n      return isLoggedIn() && currentUser().role === Role.Admin;\r\n    }\r\n\r\n    function currentUser() {\r\n      if (!isLoggedIn()) {\r\nreturn;\r\n}\r\n      const id = parseInt(headers.get(\"Authorization\").split(\".\")[1]);\r\n      return users.find(x => x.id === id);\r\n    }\r\n\r\n    function idFromUrl() {\r\n      const urlParts = url.split(\"/\");\r\n      return parseInt(urlParts[urlParts.length - 1]);\r\n    }\r\n  }\r\n}\r\n\r\nexport const fakeBackendProvider = {\r\n  // use fake backend in place of Http service for backend-less development\r\n  provide: HTTP_INTERCEPTORS,\r\n  useClass: FakeBackendInterceptor,\r\n  multi: true\r\n};\r\n","import { NativeDateAdapter, MatDateFormats } from \"@angular/material/core\";\r\nimport {Injectable} from \"@angular/core\";\r\n\r\n@Injectable()\r\nexport class AppDateAdapter extends NativeDateAdapter {\r\n  format(date: Date, displayFormat: Object): string {\r\n    if (displayFormat === \"input\") {\r\n      let day: string = date.getDate().toString();\r\n      day = +day < 10 ? \"0\" + day : day;\r\n      let month: string = (date.getMonth() + 1).toString();\r\n      month = +month < 10 ? \"0\" + month : month;\r\n      const year = date.getFullYear();\r\n      return `${day}-${month}-${year}`;\r\n    }\r\n    return date.toDateString();\r\n  }\r\n}\r\n\r\nexport const APP_DATE_FORMATS: MatDateFormats = {\r\n  parse: {\r\n    dateInput: { month: \"short\", year: \"numeric\", day: \"numeric\" }\r\n  },\r\n  display: {\r\n    dateInput: \"input\",\r\n    monthYearLabel: { year: \"numeric\", month: \"numeric\" },\r\n    dateA11yLabel: { year: \"numeric\", month: \"long\", day: \"numeric\"\r\n    },\r\n    monthYearA11yLabel: { year: \"numeric\", month: \"long\" },\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from \"@angular/common/http\";\r\nimport { Observable } from \"rxjs\";\r\n\r\nimport { environment } from \"@env/environment\";\r\nimport { AuthenticationService } from \"@app/core/services/authentication.service\";\r\n\r\n@Injectable()\r\nexport class JwtInterceptor implements HttpInterceptor {\r\n  constructor(private authenticationService: AuthenticationService) { }\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    // add auth header with jwt if user is logged in and request is to api url\r\n    const user = this.authenticationService.userValue;\r\n    const isLoggedIn = user && user.accessToken;\r\n    const isApiUrl = request.url.startsWith(environment.backend);\r\n    if (isLoggedIn && isApiUrl) {\r\n      request = request.clone({\r\n        setHeaders: {\r\n          authorization: `${user.accessToken}`\r\n        }\r\n      });\r\n    }\r\n\r\n    return next.handle(request);\r\n  }\r\n}\r\n","import { FormGroup } from \"@angular/forms\";\r\n\r\n// custom validator to check that two fields match\r\nexport const mustMatch = (controlName: string, matchingControlName: string) => (formGroup: FormGroup) => {\r\n  const control = formGroup.controls[controlName];\r\n  const matchingControl = formGroup.controls[matchingControlName];\r\n\r\n  if (matchingControl.errors && !matchingControl.errors.mustMatch) {\r\n    // return if another validator has already found an error on the matchingControl\r\n    return;\r\n  }\r\n\r\n  // set error on matchingControl if validation fails\r\n  if (control.value !== matchingControl.value) {\r\n    matchingControl.setErrors({mustMatch: true});\r\n  } else {\r\n    matchingControl.setErrors(null);\r\n  }\r\n};\r\n","import { NgbDateStruct } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { assertNever, flatMap } from \"./util\";\r\n\r\nexport type Selectable = CheckBox | Group;\r\nexport type Clickable  = CheckBox | Option;\r\n\r\nexport interface Data {\r\n[name: string]: string[];\r\n}\r\n\r\nexport interface TextExtractor {\r\n  ofCheckbox(c: CheckBox): string | undefined;\r\n  ofOption(o: Option): string | undefined;\r\n  ofEnumeration(e: Enumeration): string | undefined;\r\n  ofBlock(e: Block): string | undefined;\r\n  ofConditional(c: Conditional): string | undefined;\r\n}\r\n\r\n// Selectable classes, lower than category\r\n\r\nexport interface CheckBox {\r\n  kind:           \"box\";\r\n  name:           string;\r\n  value:          boolean;\r\n  text:           string;\r\n  judgementText?: string;\r\n  conditionalId?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  enumeration?:   string;\r\n  data:           Data;\r\n}\r\n\r\nexport interface Group {\r\n  kind:    \"group\";\r\n  name:    string;\r\n  options: Option[];\r\n  value?:  string;\r\n  data:    Data;\r\n}\r\n\r\nexport interface Option {\r\n  kind:           \"option\";\r\n  name:           string;\r\n  text:           string;\r\n  conditionalId?: string;\r\n  judgementText?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  data:           Data;\r\n}\r\n\r\nexport type TopLevel = Category | Block | Enumeration | Conditional;\r\n\r\n// Main data management and display class\r\n\r\nexport interface Category {\r\n  kind: \"category\";\r\n  name: string;\r\n  optional?: boolean;\r\n  selectables: Selectable[];\r\n  data: Data;\r\n}\r\n\r\nexport interface Block {\r\n  kind: \"block\";\r\n  text?: string;\r\n  judgementText?: string;\r\n  data: Data;\r\n}\r\n\r\nexport interface Enumeration {\r\n  kind:           \"enumeration\";\r\n  text:           string;\r\n  judgementText?: string;\r\n  id:             string;\r\n  data:           Data;\r\n}\r\n\r\nexport interface Conditional {\r\n  kind:           \"conditional\";\r\n  precondition:   Literal[][];\r\n  normalText?:    string;\r\n  judgementText?: string;\r\n  data:           Data;\r\n}\r\n\r\nexport interface Literal {\r\n  id:      string;\r\n  negated: boolean;\r\n}\r\n\r\n// Variable types\r\n\r\nexport type Variable = VariableOC | VariableMC | VariableText | VariableNumber | VariableDate | VariableRatio;\r\n\r\nexport interface VariableCommon {\r\n  id:         string;\r\n  textBefore: string;\r\n  textAfter:  string;\r\n  data:       Data;\r\n}\r\n\r\nexport interface VariableOC extends VariableCommon {\r\n  kind:   \"oc\";\r\n  value?: string;\r\n  values: string[];\r\n}\r\n\r\nexport interface VariableMC extends VariableCommon {\r\n  kind:   \"mc\";\r\n  values: [string, boolean][];\r\n}\r\n\r\nexport interface VariableText extends VariableCommon {\r\n  kind:  \"text\";\r\n  value: string;\r\n}\r\n\r\nexport interface VariableNumber extends VariableCommon {\r\n  kind:  \"number\";\r\n  value: number;\r\n}\r\n\r\nexport interface VariableDate extends VariableCommon {\r\n  kind:  \"date\";\r\n  value: NgbDateStruct;\r\n}\r\n\r\nexport interface VariableRatio extends VariableCommon {\r\n  kind:           \"ratio\";\r\n  numerator:      number;\r\n  denominator:    number;\r\n  fractionDigits: number;\r\n}\r\n\r\nexport function resolve(varId: string, structure: TopLevel[]): Variable | undefined {\r\n  for (const tl of structure) {\r\n    switch (tl.kind) {\r\n      case \"block\": continue;\r\n      case \"enumeration\": continue;\r\n      case \"conditional\": continue;\r\n      case \"category\": {\r\n        const result = resolveCategory(varId, tl);\r\n        if (result) {\r\n          return result;\r\n        } else {\r\n          continue;\r\n        }\r\n      }\r\n      default: assertNever(tl);\r\n    }\r\n  }\r\n}\r\n\r\nexport function resolveCategory(varId: string, c: Category): Variable | undefined {\r\n  return flatMap(c.selectables, variablesOfSelectable).find(v => v.id === varId);\r\n}\r\n\r\nfunction variablesOfSelectable(s: Selectable): Variable[] {\r\n  switch (s.kind) {\r\n    case \"box\": return s.variables;\r\n    case \"group\": return flatMap(s.options, o => o.variables);\r\n    default: return assertNever(s);\r\n  }\r\n}\r\n","import * as M from \"@app/models/templateModel\";\r\nimport {KeyClickable, KeyVariable} from \"@app/models\";\r\nimport {getAllIndexOf} from \"@app/helpers/util\";\r\n\r\nexport const getClickableKeywords = (selectables: M.Selectable[], category: string): KeyClickable[] => {\r\n  const clickKey: KeyClickable[] = [];\r\n  for (const sel of selectables) {\r\n    if (sel.kind === \"box\") {\r\n      for (const synonym of sel.keys) {\r\n        clickKey.push({\r\n          name: sel.name,\r\n          synonym,\r\n          category,\r\n          position: -1,\r\n          nVariables: sel.variables.length\r\n        });\r\n      }\r\n    } else if (sel.kind === \"group\") {\r\n      for (const option of sel.options) {\r\n        for (const synonym of option.keys) {\r\n          clickKey.push({\r\n            name: option.name,\r\n            synonym,\r\n            category,\r\n            group: sel.name,\r\n            position: -1,\r\n            nVariables: option.variables.length\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return clickKey;\r\n};\r\n\r\n// Gets current list of possible variables and input-string.\r\n// Since not all variables have \"textAfter\", we must search for all possible split or end keywords to extract the\r\n// value strings\r\nexport const getSplitters = (varKeys: KeyVariable[], input: string): number[] => {\r\n  const splitWords: string[] = [];\r\n  let splitters: number[] = [];\r\n  for (const varKey of varKeys) {\r\n    if (varKey.textBefore.length > 0) {\r\n      splitWords.push(varKey.textBefore);\r\n    }\r\n    if (varKey.synonym !== undefined) {\r\n      splitWords.push(varKey.synonym);\r\n    }\r\n  }\r\n  for (const splitWord of splitWords) {\r\n    splitters = splitters.concat(getAllIndexOf(splitWord, input, true));\r\n  }\r\n  splitters = [...new Set(splitters)].sort();\r\n  return splitters;\r\n};\r\n\r\n// takes the value and kind of a variable and parses the string accordingly\r\n// text: nothing happens; number: converts to number; date: extracts day, month and year; ratio: extracts num. and den.\r\nexport const parseValue = (valueString: string, varKind: string) => {\r\n  if (varKind === \"text\") {\r\n    return valueString;\r\n  } else if (varKind === \"number\") {\r\n    if (!isNaN(+valueString)) {\r\n      return Number(valueString);\r\n    }\r\n  } else if (varKind === \"date\") {\r\n    const dateString = valueString\r\n      .match(/(0?[1-9]|[12]\\d|30|31)[^\\w\\d\\r\\n:](0?[1-9]|1[0-2])[^\\w\\d\\r\\n:](\\d{4}|\\d{2})/);\r\n    if (dateString !== null) {\r\n      const date = dateString[0].split(/[.-\\/]+/g);\r\n      return {year: date[2], month: date[1], day: date[0]};\r\n    }\r\n  } else if (varKind === \"ratio\") {\r\n    const ratioString = valueString.match(/\\d* .* \\d*/);\r\n    if (ratioString !== null) {\r\n      const ratioNumbers = ratioString[0].split(/[\\s:\\/]+/);\r\n      return [Number(ratioNumbers[0]), Number(ratioNumbers[1])];\r\n    }\r\n  }\r\n  return undefined;\r\n};\r\n\r\n// takes list of variable keywords and counts number of uniquely appearing variable IDs\r\nexport const countUniqueVariableKeywords = (variableKeywords: KeyVariable[]): number => {\r\n  const foundIDs: string[] = [];\r\n  let result = 0;\r\n  for (const varKey of variableKeywords) {\r\n    if (!foundIDs.includes(varKey.id)) {\r\n      result++;\r\n      foundIDs.push(varKey.id);\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\n// only display the most recent selected option variables\r\nexport const filterUniqueOptions = (variableKeywords: KeyVariable[]): KeyVariable[] => {\r\n  const result: KeyVariable[] = [];\r\n  const foundIDs: string[] = [];\r\n  for (let i = variableKeywords.length - 1; i >= 0; i--) {\r\n    if (variableKeywords[i].kind === \"oc\") {\r\n      if (!foundIDs.includes(variableKeywords[i].id)) {\r\n        foundIDs.push(variableKeywords[i].id);\r\n        result.push(variableKeywords[i]);\r\n      }\r\n    } else {\r\n      result.push(variableKeywords[i]);\r\n    }\r\n  }\r\n  return result.reverse();\r\n};\r\n\r\n// Takes list of variables and generates Keyword Variables list\r\nexport const getVariableKeywords = (variables: M.Variable[], category: string, clickable: string): KeyVariable[] => {\r\n  const varKeys: KeyVariable[] = [];\r\n  for (const variable of variables) {\r\n    if (variable.kind === \"oc\" || variable.kind === \"mc\") {\r\n      for (let i = 0; i < variable.values.length; i++) {\r\n        let name: string;\r\n        if (variable.kind === \"mc\") {\r\n          name = variable.values[i][0];\r\n        } else {\r\n          name = variable.values[i];\r\n        }\r\n        for (const key of variable.keys[i]) {\r\n          varKeys.push({\r\n            category,\r\n            selectable: clickable,\r\n            id: variable.id,\r\n            kind: variable.kind,\r\n            name,\r\n            synonym: key,\r\n            textBefore: variable.textBefore,\r\n            textAfter: variable.textAfter,\r\n            position: -1,\r\n            positionEnd: -1\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      varKeys.push({\r\n        category,\r\n        selectable: clickable,\r\n        id: variable.id,\r\n        kind: variable.kind,\r\n        textBefore: variable.textBefore,\r\n        textAfter: variable.textAfter,\r\n        position: -1,\r\n        positionEnd: -1\r\n      });\r\n    }\r\n  }\r\n\r\n  return varKeys;\r\n};\r\n","export function assertNever(n: never): never {\r\n  throw new Error(JSON.stringify(n) + \" should never be a value\");\r\n}\r\n\r\nexport function flatMap<X, Y>(xs: X[], f: (x: X) => Y[]): Y[] {\r\n  let ret: Y[] = [];\r\n\r\n  for (const x of xs) {\r\n    ret = ret.concat(f(x));\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nexport function displayableQuotient(numerator: number, denominator: number, fractionDigits: number = 2): string {\r\n  const res = numerator / denominator ;\r\n  if (isFinite(res)) {\r\n    return res.toFixed(fractionDigits);\r\n  } else {\r\n    return \"   \";\r\n  }\r\n}\r\n\r\nexport function levenshtein(a: string, b: string): number {\r\n  const an = a ? a.length : 0;\r\n  const bn = b ? b.length : 0;\r\n  if (an === 0) {\r\n    return bn;\r\n  }\r\n  if (bn === 0) {\r\n    return an;\r\n  }\r\n  const matrix = new Array<number[]>(bn + 1);\r\n  for (let i = 0; i <= bn; ++i) {\r\n    const row = matrix[i] = new Array<number>(an + 1);\r\n    row[0] = i;\r\n  }\r\n  const firstRow = matrix[0];\r\n  for (let j = 1; j <= an; ++j) {\r\n    firstRow[j] = j;\r\n  }\r\n  for (let i = 1; i <= bn; ++i) {\r\n    for (let j = 1; j <= an; ++j) {\r\n      if (b.charAt(i - 1) === a.charAt(j - 1)) {\r\n        matrix[i][j] = matrix[i - 1][j - 1];\r\n      } else {\r\n        matrix[i][j] = Math.min(\r\n          matrix[i - 1][j - 1], // substitution\r\n          matrix[i][j - 1], // insertion\r\n          matrix[i - 1][j] // deletion\r\n        ) + 1;\r\n      }\r\n    }\r\n  }\r\n  return matrix[bn][an];\r\n}\r\n\r\nexport function getAllIndexOf(searchStr: string, inputStr: string, caseSensitive: boolean): number[] {\r\n  // searches for all occurrences of a searchString within an inputString and returns all start indexes as an array\r\n  if (searchStr.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  if (!caseSensitive) {\r\n    inputStr = inputStr.toLowerCase();\r\n    searchStr = searchStr.toLowerCase();\r\n  }\r\n\r\n  let startIndex = 0;\r\n  let index: number;\r\n  const indexes: number[] = [];\r\n\r\n  while ((index = inputStr.indexOf(searchStr, startIndex)) > -1) {\r\n    indexes.push(index);\r\n    startIndex = index + searchStr.length;\r\n  }\r\n\r\n  return indexes;\r\n}\r\n\r\nexport function splitStringFromIndexes(input: string, indexes: number[]): string[] {\r\n  const splitText: string[] = [];\r\n  indexes.sort();\r\n  for (let i = 0; i < indexes.length; i++) {\r\n    if (i === indexes.length) {\r\n      splitText.push(input.substring(indexes[i], input.length));\r\n    } else {\r\n      splitText.push(input.substring(indexes[i], indexes[i + 1]));\r\n    }\r\n  }\r\n  return splitText;\r\n}\r\n\r\nexport function getDateFormatted(date: Date, addTime: boolean): string {\r\n  let result: string;\r\n  const day: string = (\"0\" + date.getDate()).slice(-2);\r\n  const month: string = (\"0\" + (date.getMonth() + 1)).slice(-2);\r\n  result = day + \".\" + month + \".\" + date.getFullYear();\r\n  if (addTime) {\r\n    const hour: string = (\"0\" + date.getHours()).slice(-2);\r\n    const minutes: string = (\"0\" + date.getMinutes()).slice(-2);\r\n    result += \", \" + hour + \":\" + minutes;\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function arrayBufferToBase64(buffer) {\r\n  let binary = \"\";\r\n  const bytes = new Uint8Array(buffer);\r\n  console.log(bytes);\r\n  const len = bytes.byteLength;\r\n  for (let i = 0; i < len; i++) {\r\n    binary += String.fromCharCode(bytes[i]);\r\n  }\r\n  return window.btoa(binary);\r\n}\r\n\r\nexport function getBase64Image(img) {\r\n  const canvas = document.createElement(\"canvas\");\r\n  canvas.width = img.width;\r\n  canvas.height = img.height;\r\n\r\n  const ctx = canvas.getContext(\"2d\");\r\n  ctx.drawImage(img, 0, 0);\r\n\r\n  const dataURL = canvas.toDataURL(\"image/png\");\r\n\r\n  return dataURL.replace(/^data:image\\/(png|jpg);base64,/, \"\");\r\n}\r\n\r\nexport function getFileExtension(filename: string) {\r\n  return filename.split(\".\").pop().toLowerCase();\r\n}\r\n\r\nexport function getImageDimensions(imgUrl): [number, number] {\r\n\r\n  let width: number;\r\n  let height: number;\r\n  let img = new Image();\r\n\r\n  img.src = imgUrl;\r\n  img.onload = (event) => {\r\n    let loadedImage = event.currentTarget as HTMLImageElement;\r\n    width = loadedImage.width;\r\n    height = loadedImage.height;\r\n  }\r\n\r\n  console.log(\"UTIL HERE\");\r\n  console.log(width, height);\r\n  return [width, height];\r\n}\r\n\r\nexport function getNextHighestValue(array, testValue): number {\r\n  for (const value of array) {\r\n    if (value > testValue) {\r\n      return value;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n","import * as M from \"./templateModel\";\r\n\r\nexport function normalExtractor(): M.TextExtractor {\r\n  return new class {\r\n    ofCheckbox(c: M.CheckBox): string | undefined { return c.text; }\r\n    ofOption(o: M.Option): string | undefined { return o.text; }\r\n    ofEnumeration(e: M.Enumeration): string | undefined { return e.text; }\r\n    ofBlock(b: M.Block): string | undefined { return b.text; }\r\n    ofConditional(c: M.Conditional): string | undefined { return c.normalText; }\r\n  };\r\n}\r\n\r\nexport function judgementExtractor(): M.TextExtractor {\r\n  return new class {\r\n    ofCheckbox(c: M.CheckBox): string | undefined { return c.judgementText; }\r\n    ofOption(o: M.Option): string | undefined { return o.judgementText; }\r\n    ofEnumeration(e: M.Enumeration): string | undefined { return e.judgementText; }\r\n    ofBlock(b: M.Block): string | undefined { return b.judgementText; }\r\n    ofConditional(c: M.Conditional): string | undefined { return c.judgementText; }\r\n  };\r\n}\r\n\r\nexport function makeText(parts: M.TopLevel[], extractor: M.TextExtractor, suppressed: string[]): string {\r\n let result = parts.map(c => {\r\n    if (c.kind === \"category\") {\r\n      return getTexts(c.selectables, suppressed, extractor)\r\n        .map(t => expandVariablesInString(t, parts, true)).join(\"\");\r\n    } else if (c.kind === \"block\") {\r\n      return extractor.ofBlock(c) || \"\";\r\n    } else if (c.kind === \"enumeration\") {\r\n      return makeEnumeration(c, parts, extractor);\r\n    } else if (c.kind === \"conditional\") {\r\n      if (checkConditional(c, parts)) {\r\n        const data = extractor.ofConditional(c);\r\n        if (data) {\r\n          return expandVariablesInString(data, parts, true);\r\n        } else {\r\n          return \"\";\r\n        }\r\n      }\r\n    } else {\r\n      throw new Error(\"unknown top level kind\");\r\n    }\r\n  }).join(\"\");\r\n  const blocks = parts.filter(x => x.kind === \"block\");\r\n  for (const b of blocks) {\r\n    const regEx = new RegExp((b as M.Block).text + \"(\\\\n|$)\");\r\n    result = result.replace(regEx, \"\\n\");\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function getSuppressedConditionalIds(data: M.TopLevel[]): string[][] {\r\n  const suppressedNormal: string[] = [];\r\n  const suppressedJudgement: string[] = [];\r\n\r\n  for (const topLevel of data) {\r\n    if (topLevel.kind === \"conditional\") {\r\n      if (checkConditional(topLevel, data)) {\r\n        for (const anded of topLevel.precondition) {\r\n          for (const literal of anded) {\r\n            if (!literal.negated) {\r\n              if (topLevel.normalText) {\r\n                suppressedNormal.push(literal.id);\r\n              }\r\n              if (topLevel.judgementText) {\r\n                suppressedJudgement.push(literal.id);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return [suppressedNormal, suppressedJudgement];\r\n}\r\n\r\nexport function checkConditional(c: M.Conditional, data: M.TopLevel[]): boolean {\r\n  outer:\r\n  for (const anded of c.precondition) {\r\n    for (const literal of anded) {\r\n      if (isClicked(literal.id, data) === literal.negated) {\r\n        continue outer;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function isClicked(clickableId: string, data: M.TopLevel[]): boolean {\r\n  for (const category of data.filter(p => p.kind === \"category\").map(c => c as M.Category)) {\r\n    for (const selectable of category.selectables) {\r\n      if (selectable.kind === \"box\") {\r\n        if (selectable.value && selectable.conditionalId === clickableId) {\r\n          return true;\r\n        }\r\n      } else {\r\n        for (const option of selectable.options) {\r\n          if (option.conditionalId === clickableId && selectable.value === option.name) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n\r\nexport function getTexts(ss: M.Selectable[], suppressed: string[], textExtractor: M.TextExtractor): string[] {\r\n  const ret: string[] = [];\r\n\r\n  for (const s of ss) {\r\n    if (s.kind === \"box\" && s.value && !s.enumeration && (!s.conditionalId || suppressed.indexOf(s.conditionalId) === -1)) {\r\n      const result = textExtractor.ofCheckbox(s);\r\n      if (result) {\r\n        ret.push(result);\r\n      }\r\n    } else if (s.kind === \"group\") {\r\n      for (const o of s.options) {\r\n        if (s.value === o.name && (!o.conditionalId || suppressed.indexOf(o.conditionalId) === -1)) {\r\n          const result = textExtractor.ofOption(o);\r\n          if (result) {\r\n            ret.push(result);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\nexport function expandVariablesInString(s: string, data: M.TopLevel[], addFullStop: boolean): string {\r\n  const today = new Date();\r\n  const yesterday = new Date();\r\n  yesterday.setDate(today.getDate() - 1);\r\n  const tomorrow = new Date();\r\n  tomorrow.setDate(today.getDate() + 1);\r\n\r\n  const lookup: (string) => string = (name) => {\r\n    if (name === \"%Gestern%\") {\r\n      return makeDateString(yesterday);\r\n    } else if (name === \"%Heute%\") {\r\n      return makeDateString(today);\r\n    } else if (name === \"%Morgen%\") {\r\n      return makeDateString(tomorrow);\r\n    }\r\n    const vars = allVariables(data);\r\n    const matching = vars.find(v => \"%\" + v.id + \"%\" === name);\r\n    if (matching) {\r\n      if (textOfVariable(matching)) {\r\n        return textOfVariable(matching);\r\n      } else {\r\n        return \"---\";\r\n      }\r\n    } else {\r\n      return \"---\";\r\n    }\r\n  };\r\n  s = s.replace(/%[^%]+%/g, lookup);\r\n  const brackets = s.match(/(\\[]*?[^\\]]*?])/g);\r\n  if (brackets != null) {\r\n    for (const t of brackets) {\r\n      if (t.includes(\"---\")) {\r\n        s = s.replace(t, \"\");\r\n      }\r\n    }\r\n  }\r\n  s = s.replace(/(---)/g, \"\"); // \"Fehlzeichen\" weg\r\n  s = s.replace(/\\s\\s+/g, \" \"); // doppelt oder mehr Leerzeichen weg\r\n  s = s.replace(/\\[|\\]/g, \"\"); // Klammern weg\r\n  s = s.trim();\r\n  if (addFullStop) {\r\n    s = s.replace(/(\\s*\\.?\\s*$)/, \". \"); // Punkt am Ende einfügen, falls keiner da ist\r\n  }\r\n  return s;\r\n}\r\n\r\nexport function makeDateString(d: Date): string {\r\n  return d.toLocaleDateString(\"de-DE\", { year: \"numeric\", month: \"numeric\", day: \"numeric\" });\r\n}\r\n\r\nexport function allVariables(data: M.TopLevel[]): M.Variable[] {\r\n  let vars: M.Variable[] = [];\r\n\r\n  for (const c of data) {\r\n    if (c.kind === \"category\") {\r\n      for (const sel of c.selectables) {\r\n        if (sel.kind === \"box\" && sel.value) {\r\n          vars = vars.concat(sel.variables);\r\n        } else if (sel.kind === \"group\") {\r\n          for (const o of sel.options) {\r\n            if (sel.value === o.name) {\r\n              vars = vars.concat(o.variables);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return vars;\r\n}\r\n\r\nexport function textOfVariable(v: M.Variable): string | undefined {\r\n  if (v.kind === \"oc\") {\r\n    return v.value;\r\n  } else if (v.kind === \"mc\") {\r\n    return v.values.filter(val => val[1]).map(val => val[0]).join(\", \");\r\n  } else if (v.kind === \"text\") {\r\n    return v.value;\r\n  } else if (v.kind === \"number\") {\r\n    if (v.value !== 0) {\r\n      return \"\" + v.value;\r\n    } else {\r\n    return \"\";\r\n    }\r\n  } else if (v.kind === \"date\") {\r\n    return v.value.day + \".\" + v.value.month + \".\" + v.value.year;\r\n  } else if (v.kind === \"ratio\") {\r\n    return (v.numerator / v.denominator).toLocaleString(\"de-DE\", { maximumFractionDigits: v.fractionDigits });\r\n  }\r\n\r\n  return assertUnreachable(v);\r\n}\r\n\r\nexport function makeNormalCategory(c: M.Category): void {\r\n  if (hasSelection(c)) { return; }\r\n\r\n  for (const entry of c.selectables) {\r\n    if (entry.kind === \"box\") {\r\n      if (entry.normal) {\r\n        entry.value = true;\r\n      }\r\n    } else if (entry.kind === \"group\") {\r\n      for (const o of entry.options) {\r\n        if (o.normal) {\r\n          entry.value = o.name;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function hasSelection(c: M.Category): boolean {\r\n  for (const entry of c.selectables) {\r\n    if (entry.kind === \"box\" && entry.value) {\r\n      return true;\r\n    } else if (entry.kind === \"group\" && entry.value) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n\r\nexport function makeEnumeration(e: M.Enumeration, data: M.TopLevel[], textExtractor: M.TextExtractor): string {\r\n  const items: string[] = getRelevantEnumerationItems(e.id, data, textExtractor);\r\n  if (items.length === 0) {\r\n    return \"\";\r\n  } else if (items.length === 1) {\r\n    return textExtractor.ofEnumeration(e) + items[0] + \". \";\r\n  } else if (items.length === 2) {\r\n    return textExtractor.ofEnumeration(e) + items[0] + \" und \" + items[1] + \". \";\r\n  } else if (items.length > 2) {\r\n    return textExtractor.ofEnumeration(e) + items.slice(0, items.length - 1).join(\", \") + \" und \" + items[items.length - 1] + \" \";\r\n  }\r\n}\r\n\r\nexport function getRelevantEnumerationItems(id: string, data: M.TopLevel[], textExtractor: M.TextExtractor): string[] {\r\n  const items: string[] = [];\r\n\r\n  for (const p of data) {\r\n    if (p.kind === \"category\") {\r\n      for (const s of p.selectables) {\r\n        if (s.kind === \"box\") {\r\n          if (s.value && s.enumeration === id) {\r\n            const result = textExtractor.ofCheckbox(s);\r\n            if (result) {\r\n              items.push(expandVariablesInString(result, data, false));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return items;\r\n}\r\n\r\nexport function assertUnreachable(x: never): never {\r\n  throw new Error(\"should not be reachable: \" + x);\r\n}\r\n","export enum Role {\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  User = \"user\",\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  ExternalUser = \"externaluser\",\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  Moderator = \"moderator\",\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  Admin = \"admin\"\r\n}\r\n","/*\r\n * Type Definitions\r\n */\r\nexport type Taker = (text: string) => TakeResult | undefined;\r\n\r\nexport interface TakeResult {\r\n  lengthTaken: number;\r\n  setter: () => void;\r\n}\r\n\r\n/*\r\n * basic takers\r\n */\r\n\r\nexport function text(text: string): Taker {\r\n  return (input: string): TakeResult | undefined  => {\r\n    const sub = input.substr(0, text.length)\r\n    if (sub === text) {\r\n      return {\r\n        lengthTaken: sub.length,\r\n        setter: () => {}\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nexport function regex(r: RegExp): Taker {\r\n  return (input: string): TakeResult | undefined  => {\r\n    const match = r.exec(input)\r\n    if (match) {\r\n      return {\r\n        lengthTaken: match[0].length,\r\n        setter: () => {}\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const dummy:   Taker = (s: string) => { console.log(\"there are still dummy takers\"); return undefined; }\r\nexport const fail:    Taker = (s: string) => { return undefined; }\r\nexport const success: Taker = (s: string) => { return { lengthTaken: 0, setter: () => { } }; }\r\nexport const decimal: Taker = regex(/\\d+([.,]\\d+)?/)\r\n\r\n/*\r\n * combinators\r\n */\r\n\r\nexport function compound(takers: Taker[]): Taker {\r\n  return (s: string) => {\r\n    const results: TakeResult[] = [];\r\n\r\n    let ss = s;\r\n    for (let t of takers) {\r\n      const result = t(ss);\r\n      if (result) {\r\n        results.push(result);\r\n        ss = ss.substr(result.lengthTaken);\r\n      } else {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    return {\r\n      lengthTaken: results.reduce((a, b) => a + b.lengthTaken, 0),\r\n      setter: () => { results.forEach(r => r.setter()) }\r\n    };\r\n  }\r\n}\r\n\r\nexport function or(takers: Taker[]): Taker {\r\n  return (s: string) => {\r\n    for (let taker of takers) {\r\n      const result = taker(s);\r\n      if (result) {\r\n        return result;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function optional(t: Taker): Taker {\r\n  return or([t, success]);\r\n}\r\n\r\nexport function addSetter(t: Taker, f: (oldText: string) => void) {\r\n  return s => {\r\n    const result = t(s);\r\n    if (result) {\r\n      return {\r\n        lengthTaken: result.lengthTaken,\r\n        setter: () => { result.setter(); f(s.substring(0, result.lengthTaken)); }\r\n      };\r\n    }\r\n\r\n    return result;\r\n  };\r\n}\r\n\r\n\r\nexport function logOnFail(t: Taker, msg: string): Taker {\r\n  return s => {\r\n    const result = t(s);\r\n    if (result) {\r\n      return result;\r\n    } else {\r\n      console.log(msg);\r\n    }\r\n  };\r\n}\r\n\r\nexport function logOnSuccess(t: Taker, msg: string): Taker {\r\n  return s => {\r\n    const result = t(s);\r\n    if (result) {\r\n      console.log(msg);\r\n      return result;\r\n    }\r\n  };\r\n}\r\n\r\n\r\nexport function log(t: Taker, msgSuc: string, msgFail: string): Taker {\r\n  return logOnSuccess(logOnFail(t, msgFail), msgSuc);\r\n}\r\n","import {NgbDateStruct} from \"@ng-bootstrap/ng-bootstrap\";\r\nimport * as M from \"../helpers/old_model\";\r\n\r\nexport interface TextExtractor {\r\n  ofCheckbox(c: CheckBox): string | undefined;\r\n  ofOption(o: Option): string | undefined;\r\n  ofEnumeration(e: Enumeration): string | undefined;\r\n  ofBlock(e: Block): string | undefined;\r\n  ofConditional(c: Conditional): string | undefined;\r\n}\r\n\r\nexport interface Template {\r\n  _id: string;\r\n  name: string;\r\n  timestamp: Date;\r\n  parts: TopLevel[];\r\n}\r\n\r\nexport type TopLevel = Category | Block | Enumeration | Conditional;\r\n\r\n// Main data management and display class\r\n\r\nexport interface Category {\r\n  kind: \"category\";\r\n  name: string;\r\n  optional?: boolean;\r\n  selectables: Selectable[];\r\n}\r\n\r\nexport interface Block {\r\n  kind: \"block\";\r\n  text?: string;\r\n  judgementText?: string;\r\n}\r\n\r\nexport interface Enumeration {\r\n  kind:           \"enumeration\";\r\n  text:           string;\r\n  judgementText?: string;\r\n  id:             string;\r\n}\r\n\r\nexport interface Conditional {\r\n  kind:           \"conditional\";\r\n  precondition:   Literal[][];\r\n  normalText?:    string;\r\n  judgementText?: string;\r\n}\r\n\r\nexport interface Literal {\r\n  id:      string;\r\n  negated: boolean;\r\n}\r\n\r\n// Selectable classes, lower than category\r\n\r\nexport type Selectable = CheckBox | Group;\r\nexport type Clickable  = CheckBox | Option;\r\n\r\nexport interface CheckBox {\r\n  kind:           \"box\";\r\n  name:           string;\r\n  value:          boolean;\r\n  text:           string;\r\n  conditionalId?: string;\r\n  judgementText?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  enumeration?:   string;\r\n  keys:           string[];\r\n}\r\n\r\nexport interface Group {\r\n  kind:    \"group\";\r\n  name:    string;\r\n  options: Option[];\r\n  value?:  string;\r\n}\r\n\r\nexport interface Option {\r\n  kind:           \"option\";\r\n  name:           string;\r\n  text:           string;\r\n  conditionalId?: string;\r\n  judgementText?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  keys:           string[];\r\n}\r\n\r\n// Variable types\r\n\r\nexport type Variable = VariableOC | VariableMC | VariableText | VariableNumber | VariableDate | VariableRatio;\r\n\r\nexport interface VariableCommon {\r\n  id:         string;\r\n  textBefore: string;\r\n  textAfter:  string;\r\n  // TODO: Refactor because only OC and MC need keys (aka synonyms)\r\n  keys?:      string[][];\r\n}\r\n\r\nexport interface VariableOC extends VariableCommon {\r\n  kind:   \"oc\";\r\n  value?: string;\r\n  values: string[];\r\n}\r\n\r\nexport interface VariableMC extends VariableCommon {\r\n  kind:   \"mc\";\r\n  values: [string, boolean][];\r\n}\r\n\r\nexport interface VariableText extends VariableCommon {\r\n  kind:  \"text\";\r\n  value: string;\r\n}\r\n\r\nexport interface VariableNumber extends VariableCommon {\r\n  kind:  \"number\";\r\n  value: number;\r\n}\r\n\r\nexport interface VariableDate extends VariableCommon {\r\n  kind:  \"date\";\r\n  value: NgbDateStruct;\r\n}\r\n\r\nexport interface VariableRatio extends VariableCommon {\r\n  kind:           \"ratio\";\r\n  numerator:      number;\r\n  denominator:    number;\r\n  fractionDigits: number;\r\n}\r\n\r\nexport function convertModel(oldModel: M.TopLevel[]) {\r\n  const newParts: TopLevel[] = [];\r\n  for (const part of oldModel) {\r\n    if (part.kind === \"category\") {\r\n      newParts.push(convertCategory(part));\r\n    } else if(part.kind === \"block\") {\r\n      newParts.push(convertBlock(part));\r\n    } else if(part.kind === \"enumeration\") {\r\n      newParts.push(convertEnum(part));\r\n    } else if(part.kind === \"conditional\") {\r\n      newParts.push(convertCond(part));\r\n    }\r\n  }\r\n  return newParts;\r\n}\r\n\r\nexport function convertSelectables(oldSels: M.Selectable[]): Selectable[] {\r\n  const newSels: Selectable[] = [];\r\n  for (const oldSel of oldSels) {\r\n    let newSel: Selectable;\r\n    if (oldSel.kind === \"box\") {\r\n      newSel = convertCheckBox(oldSel);\r\n    } else if (oldSel.kind === \"group\") {\r\n      newSel = convertGroup(oldSel);\r\n    }\r\n    newSels.push(newSel);\r\n  }\r\n  return newSels;\r\n}\r\n\r\nexport function convertCheckBox(oldBox: M.CheckBox): CheckBox {\r\n  const newVariables: Variable[] = convertVariables(oldBox.variables);\r\n  const keywords: string[] = splitKeywords(oldBox.data[\"bau\"][0], \";\");\r\n  return {\r\n    kind: oldBox.kind,\r\n    name: oldBox.name,\r\n    value: oldBox.value,\r\n    text: oldBox.text,\r\n    judgementText: oldBox.judgementText,\r\n    enumeration: oldBox.enumeration,\r\n    normal: oldBox.normal,\r\n    variables: newVariables,\r\n    keys: keywords\r\n  };\r\n}\r\n\r\nexport function convertGroup(oldGroup: M.Group): Group {\r\n  const newOpts: Option[] = [];\r\n  for (const oldOpt of oldGroup.options) {\r\n    newOpts.push(convertOption(oldOpt));\r\n  }\r\n  return {\r\n    kind: oldGroup.kind,\r\n    name: oldGroup.name,\r\n    options: newOpts,\r\n    value: oldGroup.value\r\n  };\r\n}\r\n\r\nexport function convertOption(oldOpt: M.Option): Option {\r\n  const newVariables: Variable[] = convertVariables(oldOpt.variables);\r\n  const keys: string[] = splitKeywords(oldOpt.data[\"bau\"][0], \";\");\r\n  return {\r\n    kind: oldOpt.kind,\r\n    name: oldOpt.name,\r\n    text: oldOpt.text,\r\n    judgementText: oldOpt.judgementText,\r\n    normal: oldOpt.normal,\r\n    variables: newVariables,\r\n    keys: keys\r\n  };\r\n}\r\n\r\nexport function convertBlock(oldBlock: M.Block): Block {\r\n  return {\r\n    kind: oldBlock.kind,\r\n    text: oldBlock.text,\r\n    judgementText: oldBlock.judgementText\r\n  };\r\n}\r\n\r\nexport function convertEnum(oldEnum: M.Enumeration): Enumeration {\r\n  return {\r\n    kind: oldEnum.kind,\r\n    text: oldEnum.text,\r\n    judgementText: oldEnum.judgementText,\r\n    id: oldEnum.id\r\n  };\r\n}\r\n\r\nexport function convertCond(oldCond: M.Conditional): Conditional {\r\n  return {\r\n    kind: oldCond.kind,\r\n    precondition: oldCond.precondition,\r\n    normalText: oldCond.normalText,\r\n    judgementText: oldCond. judgementText\r\n  };\r\n}\r\n\r\nexport function convertCategory(oldCat: M.Category): Category {\r\n  const newSels = convertSelectables(oldCat.selectables);\r\n  return {\r\n    kind: oldCat.kind,\r\n    name: oldCat.name,\r\n    optional: oldCat.optional,\r\n    selectables: newSels\r\n  };\r\n}\r\n\r\nexport function convertVariables(oldVars: M.Variable[]): Variable[] {\r\n  const newVars: Variable[] = [];\r\n  for (const variable of oldVars) {\r\n    newVars.push(convertVariable(variable));\r\n  }\r\n  return newVars;\r\n}\r\n\r\nexport function convertVariable(oldVar: M.Variable): Variable {\r\n  let newVar: Variable;\r\n\r\n  if (oldVar.kind === \"oc\") {\r\n    const keys: string[][] = splitKeywordsArray(oldVar.data[\"syn\"][0], \"/\", \";\");\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: keys,\r\n      value: oldVar.value,\r\n      values: oldVar.values\r\n    };\r\n  } else if (oldVar.kind === \"mc\") {\r\n    const keys: string[][] = splitKeywordsArray(oldVar.data[\"syn\"][0], \";\", \",\");\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: keys,\r\n      values: oldVar.values\r\n    };\r\n  } else if (oldVar.kind === \"text\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      value: oldVar.value\r\n    };\r\n  } else if (oldVar.kind === \"number\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      value: oldVar.value\r\n    };\r\n  } else if (oldVar.kind === \"date\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      value: oldVar.value\r\n    };\r\n  } else if (oldVar.kind === \"ratio\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      numerator: oldVar.numerator,\r\n      denominator: oldVar.denominator,\r\n      fractionDigits: oldVar.fractionDigits\r\n    };\r\n  }\r\n\r\n  return newVar;\r\n}\r\n\r\nexport function splitKeywords(keywords: string, splitter: string): string[] {\r\n  if (keywords) {\r\n    return keywords.split(splitter);\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function splitKeywordsArray(keys: string, optionSplitter: string, synonymSplitter: string): string[][] {\r\n  const result: string[][] = [];\r\n  const variableSplit: string[] = splitKeywords(keys, optionSplitter);\r\n  if (variableSplit) {\r\n    for (const varSynonyms of variableSplit) {\r\n      const synSplit: string[] = splitKeywords(varSynonyms, synonymSplitter);\r\n      synSplit.map(key => key.trim());\r\n      result.push(synSplit);\r\n    }\r\n  } else {\r\n    return null;\r\n  }\r\n  return result;\r\n}\r\n","import {Role} from \"./role\";\r\n\r\nexport class User {\r\n  id: string;\r\n  username: string;\r\n  role: Role;\r\n  accessToken?: string;\r\n}\r\n","<div class=\"col-md-6\">\r\n  <div class=\"card\">\r\n    <h4 class=\"card-header\">Passwort ändern</h4>\r\n    <div class=\"card-body\">\r\n      <form [formGroup]=\"changeForm\" (ngSubmit)=\"onSubmit()\">\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Altes Passwort</label>\r\n          <input id=\"password\" type=\"password\" formControlName=\"password\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && f.password.errors }\"/>\r\n          <div *ngIf=\"submitted && f.password.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"f.password.errors.required\">Altes Passwort ist erforderlich</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"newPassword\">Neues Passwort</label>\r\n          <input id=\"newPassword\" type=\"password\" formControlName=\"newPassword\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && f.newPassword.errors }\"/>\r\n          <div *ngIf=\"submitted && f.newPassword.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"f.newPassword.errors.required\">Neues Passwort ist erforderlich</div>\r\n            <div *ngIf=\"f.newPassword.errors.minlength\">Neues Passwort muss mindestens 6 Zeichen lang sein</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"confirmPass\">Neues Passwort bestätigen</label>\r\n          <input id=\"confirmPass\" type=\"password\" formControlName=\"confirmPass\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && f.confirmPass.errors }\"/>\r\n          <div *ngIf=\"submitted && f.confirmPass.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"f.confirmPass.errors.required\">Neues Passwort bestätigen ist erforderlich</div>\r\n            <div *ngIf=\"f.confirmPass.errors.mustMatch\">Passwörter stimmen nicht überein</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <button style=\"float:right\" class=\"btn btn-primary\">Abschicken</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div *ngIf=\"error\" class=\"card-footer\">\r\n      <div class=\"alert alert-danger mt-3\">{{error}}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, Input, OnInit} from \"@angular/core\";\r\nimport {FormBuilder, FormGroup, Validators} from \"@angular/forms\";\r\nimport {UserService} from \"@app/core\";\r\nimport {mustMatch} from \"@app/helpers\";\r\n\r\n@Component({\r\n  selector: \"app-change-password\",\r\n  templateUrl: \"./change-password.component.html\",\r\n  styleUrls: [\"./change-password.component.css\"]\r\n})\r\nexport class ChangePasswordComponent implements OnInit {\r\n\r\n  @Input() userID: string;\r\n  changeForm: FormGroup;\r\n  submitted = false;\r\n  error = \"\";\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              private userService: UserService) { }\r\n\r\n  get f() {\r\n    return this.changeForm.controls;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.changeForm = this.formBuilder.group({\r\n      password: [\"\", Validators.required],\r\n      newPassword: [\"\", [Validators.required, Validators.minLength(6)]],\r\n      confirmPass: [\"\", Validators.required]\r\n    },{\r\n      validator: mustMatch(\"newPassword\", \"confirmPass\")\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.submitted = true;\r\n    if (this.changeForm.invalid) {\r\n      return;\r\n    } else {\r\n      this.userService.changePassword(this.userID,\r\n        this.f[\"password\"].value,\r\n        this.f[\"newPassword\"].value)\r\n        .subscribe(\r\n          res => {\r\n            window.alert(res.message);\r\n            this.error = \"\";\r\n            this.changeForm.reset();\r\n            this.submitted = false;\r\n          },\r\n          err => {\r\n            this.error = err;\r\n          }\r\n        );\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"col-md-6\">\r\n  <div class=\"card\">\r\n    <h4 class=\"card-header\">Nutzername ändern</h4>\r\n    <div class=\"card-body\">\r\n      <form [formGroup]=\"changeForm\" (ngSubmit)=\"onSubmit()\">\r\n        <div class=\"form-group\">\r\n          <label for=\"newUsername\">Neuer Nutzername</label>\r\n          <input id=\"newUsername\" type=\"text\" formControlName=\"newUsername\" class=\"form-control\"\r\n                 [ngClass]=\"{'is-invalid': submitted && f.newUsername.errors }\"/>\r\n          <div *ngIf=\"submitted && f.newUsername.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"f.newUsername.errors.required\">Nutzername ist erforderlich</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Passwort</label>\r\n          <input id=\"password\" type=\"password\" formControlName=\"password\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && f.password.errors }\"/>\r\n          <div *ngIf=\"submitted && f.password.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"f.password.errors.required\">Passwort ist erforderlich</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <button style=\"float:right\" class=\"btn btn-primary\">Abschicken</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div *ngIf=\"error\" class=\"card-footer\">\r\n      <div class=\"alert alert-danger mt-3\">{{error}}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, Input, OnInit} from \"@angular/core\";\r\nimport {FormBuilder, FormGroup, Validators} from \"@angular/forms\";\r\nimport {UserService} from \"@app/core\";\r\n\r\n@Component({\r\n  selector: \"app-change-username\",\r\n  templateUrl: \"./change-username.component.html\",\r\n  styleUrls: [\"./change-username.component.css\"]\r\n})\r\nexport class ChangeUsernameComponent implements OnInit {\r\n\r\n  @Input() userID: string;\r\n  changeForm: FormGroup;\r\n  submitted = false;\r\n  error = \"\";\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              private userService: UserService) { }\r\n\r\n  get f() {\r\n    return this.changeForm.controls;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.changeForm = this.formBuilder.group({\r\n      newUsername: [\"\", Validators.required],\r\n      password: [\"\", Validators.required]\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.submitted = true;\r\n    if (this.changeForm.invalid) {\r\n      return;\r\n    } else {\r\n      this.userService.changeUsername(this.userID,\r\n        this.f[\"newUsername\"].value,\r\n        this.f[\"password\"].value)\r\n        .subscribe(\r\n          res => {\r\n            window.alert(res.message);\r\n            this.error = \"\";\r\n            this.changeForm.reset();\r\n            this.submitted = false;\r\n          },\r\n          err => {\r\n            this.error = err;\r\n          }\r\n        );\r\n    }\r\n  }\r\n\r\n}\r\n","<h5 mat-dialog-title>\r\n  {{title}}\r\n</h5>\r\n<mat-divider></mat-divider>\r\n\r\n<div mat-dialog-content class=\"content\">\r\n  <p>{{message}}</p>\r\n</div>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<div mat-dialog-actions class=\"buttons\" *ngIf=\"type === 'confirm'\">\r\n  <button class=\"btn btn-primary\" (click)=\"onConfirm()\">Bestätigen</button>\r\n  <button class=\"btn btn-outline-secondary cancelButton\" (click)=\"onDismiss()\">Abbrechen</button>\r\n</div>\r\n\r\n<div mat-dialog-actions class=\"buttons\" *ngIf=\"type === 'warning'\">\r\n  <button class=\"btn btn-danger\" (click)=\"onConfirm()\">Bestätigen</button>\r\n  <button class=\"btn btn-outline-secondary cancelButton\" (click)=\"onDismiss()\">Abbrechen</button>\r\n</div>\r\n","import {Component, Inject, OnInit} from \"@angular/core\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\n\r\n@Component({\r\n  selector: \"app-confirm-dialog\",\r\n  templateUrl: \"./confirm-dialog.component.html\",\r\n  styleUrls: [\"./confirm-dialog.component.scss\"]\r\n})\r\nexport class ConfirmDialogComponent implements OnInit {\r\n\r\n  title: string;\r\n  message: string;\r\n  type: string;\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<ConfirmDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: ConfirmDialogModel) { }\r\n\r\n  ngOnInit(): void {\r\n    this.type = this.data.type;\r\n    this.title = this.data.title;\r\n    this.message = this.data.message;\r\n  }\r\n\r\n  onConfirm(): void {\r\n    this.dialogRef.close(true);\r\n  }\r\n\r\n  onDismiss(): void {\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n}\r\n\r\nexport class ConfirmDialogModel {\r\n\r\n  constructor(\r\n    public type: string,\r\n    public title: string,\r\n    public message: string) { }\r\n\r\n}\r\n","<div style=\"background: hsl(202, 73%, 96%); margin: 5px; border-radius: 5px; border: 1px solid hsl(200, 70%, 80%);\r\n            grid-column-gap: 5px; grid-template-columns: 220px 1000px 600px;\r\n            display: grid; align-content: center\">\r\n  <div style=\"display: block; margin: 20px;\">\r\n    <button class=\"btn\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"{'btn-warning': (this.displayBoxes && this.coordinates.main.length > 0\r\n            && this.currentMode !== 'main'),\r\n            'btn-primary': this.currentMode === 'main',\r\n            'btn-outline-primary': this.currentMode !== 'main'}\"\r\n            (click)=\"this.changeMode('main')\">Hauptaufnahme</button>\r\n    <button class=\"btn\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"{'btn-warning': (this.displayBoxes && this.coordinates.lateral.length > 0\r\n            && this.currentMode !== 'lateral'),\r\n            'btn-primary': this.currentMode === 'lateral',\r\n            'btn-outline-primary': this.currentMode !== 'lateral'}\"\r\n            (click)=\"this.changeMode('lateral')\"\r\n            [disabled]=\"this.scans.lateralScan === undefined\">Lateralaufnahme</button>\r\n    <button class=\"btn btn-outline-primary\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"{'btn-warning': (this.displayBoxes && this.coordinates.pre.length > 0\r\n            && this.currentMode !== 'pre'),\r\n            'btn-primary': this.currentMode === 'pre',\r\n            'btn-outline-primary': this.currentMode !== 'pre'}\"\r\n            (click)=\"this.changeMode('pre')\"\r\n            [disabled]=\"this.scans.preScan === undefined\">Voraufnahme</button>\r\n    <button class=\"btn\"\r\n            [ngClass]=\"this.displayBoxes? 'btn-success': 'btn-outline-success'\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"toggleBoxes()\">Boxen anzeigen</button>\r\n    <button class=\"btn\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"this.enableZoom? 'btn-success': 'btn-outline-success'\"\r\n            (click)=\"toggleZoom()\">Toggle Zoom</button>\r\n    <button *ngIf=\"isAllowed\" class=\"btn\"\r\n            [ngClass]=\"this.enableDelete? 'btn-success': 'btn-outline-success'\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"toggleDelete()\">Löschen aktivieren</button>\r\n    <button *ngIf=\"isAllowed\" class=\"btn\"\r\n            [ngClass]=\"this.enableEdit? 'btn-success': 'btn-outline-success'\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"toggleEditor()\">Editor aktivieren</button>\r\n    <button *ngIf=\"isAllowed && this.enableEdit\" class=\"btn btn-outline-success\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"saveNewBox()\">Box Speichern</button>\r\n  </div>\r\n\r\n  <div style=\"position: relative; margin: 5px;\" [ngStyle]=\"{'width.px': currentWidth, 'height.px': currentHeight}\">\r\n    <img #sourceImage\r\n      style=\"position: absolute; left: 0; top: 0; z-index: 0\"\r\n         height=\"{{currentHeight}}\" width=\"{{currentWidth}}\"\r\n         src=\"{{currentScanUrl}}\"\r\n         id=\"sourceImage\" class=\"image\" alt=\"Fehler beim Laden der Aufnahme\"/>\r\n    <canvas #drawLayer style=\"position: absolute; left: 0; top: 0; z-index: 1\" id=\"drawCanvas\"\r\n            width=\"{{currentWidth+50}}\" height=\"{{currentHeight+50}}\"></canvas>\r\n    <canvas #labelLayer style=\"position: absolute; left: 0; top: 0; z-index: 1\" id=\"labelCanvas\"\r\n            width=\"{{currentWidth+50}}\" height=\"{{currentHeight+50}}\"></canvas>\r\n    <div #lensContainer *ngIf=\"enableZoom\">\r\n      <div style=\"position: absolute; border: 1px solid #d4d4d4;\"\r\n           [ngStyle]=\"{'width.px': lensSize, 'height.px': lensSize}\" id=\"lens\" ></div>\r\n      <div style=\"position: absolute; left: 0; top: 0; z-index: 2\" id=\"zoomCanvas\"\r\n           [ngStyle]=\"{'width.px': currentWidth, 'height.px': currentHeight}\"></div>\r\n    </div>\r\n    <canvas *ngIf=\"enableDelete\" #deleteLayer style=\"position: absolute; left: 0; top: 0; z-index: 3\" id=\"deleteCanvas\"\r\n            width=\"{{currentWidth}}\" height=\"{{currentHeight}}\"></canvas>\r\n    <canvas *ngIf=\"enableEdit\" #editLayer style=\"position: absolute; left: 0; top: 0; z-index: 3\" id=\"editCanvas\"\r\n            width=\"{{currentWidth}}\" height=\"{{currentHeight}}\"></canvas>\r\n  </div>\r\n\r\n  <div #zoomDiv style=\"margin: 20px; width: 600px; height: 600px; border: 1px solid #d4d4d4;\"\r\n    id=\"zoom\"></div>\r\n\r\n</div>\r\n\r\n<ng-template #labelDialog>\r\n  <h4 style=\"margin-bottom: 5px\" matDialogTitle>Label-Dialog</h4>\r\n  <mat-divider></mat-divider>\r\n  <mat-dialog-content style=\"margin: 10px 0\">\r\n    <div style=\"margin: 0\">Neues Label eingeben:</div>\r\n    <input style=\"margin: 0\" matInput type=\"text\" id=\"labelInput\" [(ngModel)]=\"newLabel\">\r\n  </mat-dialog-content>\r\n  <mat-divider></mat-divider>\r\n  <mat-dialog-actions style=\"float: right\">\r\n    <button class=\"btn btn-primary\" (click)=\"save()\">Speichern</button>\r\n    <button style=\"margin-left:3px\" class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n  </mat-dialog-actions>\r\n</ng-template>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  Inject,\r\n  ViewChild,\r\n  ElementRef,\r\n  AfterViewInit,\r\n  TemplateRef,\r\n  HostListener\r\n} from \"@angular/core\";\r\nimport {POPOUT_MODAL_DATA, PopoutData} from \"@app/core/services/popout.tokens\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {switchMap, takeUntil} from \"rxjs/operators\";\r\nimport {MatDialogService} from \"@app/core/services/mat-dialog.service\";\r\nimport {MatDialog, MatDialogRef} from \"@angular/material/dialog\";\r\n\r\nimport {environment} from \"@env/environment\";\r\nimport {BoundingBox, Image} from \"@app/models\";\r\n\r\nconst BOX_LINE_WIDTH = 5;\r\nconst DISPLAY_BOX_COLOR = \"blue\";\r\nconst EDIT_BOX_COLOR = \"green\";\r\nconst TEXT_COLOR = \"#98FF98\";\r\n\r\nconst MAX_IMAGE_HEIGHT = 900;\r\n\r\n@Component({\r\n  selector: \"app-image-display\",\r\n  templateUrl: \"./image-display.component.html\",\r\n  styleUrls: [\"./image-display.component.scss\"]\r\n})\r\nexport class ImageDisplayComponent implements OnInit, AfterViewInit {\r\n\r\n  serverUrl = environment.backend;\r\n  scans: {\r\n    id: string;\r\n    mainScan: Image;\r\n    lateralScan?: Image;\r\n    preScan?: Image;\r\n  };\r\n  coordinates: {\r\n    main: BoundingBox[];\r\n    lateral: BoundingBox[];\r\n    pre: BoundingBox[];\r\n  };\r\n  currentMode: string;\r\n  currentScanUrl: string;\r\n\r\n  currentScaleFactor = 1.0;\r\n  currentWidth: number;\r\n  currentHeight: number;\r\n\r\n  displayBoxes: boolean;\r\n  enableEdit: boolean;\r\n  enableDelete: boolean;\r\n  enableZoom: boolean;\r\n\r\n  startX = 0;\r\n  startY = 0;\r\n  width = 0;\r\n  height = 0;\r\n  newLabel = \"\";\r\n\r\n  lensSize = 300;\r\n\r\n  @HostListener(\"mousewheel\", [\"$event\"])\r\n  scroll(event: WheelEvent) {\r\n    console.log(\"Entered mouse wheel\");\r\n    if(this.enableZoom) {\r\n      const wheelDelta = Math.max(-1, Math.min(1, (event.deltaY || -event.detail)));\r\n      if (wheelDelta > 0) {\r\n        this.lensSize += 20;\r\n      } else {\r\n        this.lensSize -= 20;\r\n      }\r\n      this.imageZoom();\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"drawLayer\", {static: false }) drawLayer: ElementRef;\r\n  private drawLayerElement;\r\n  private drawContext: CanvasRenderingContext2D;\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"labelLayer\", {static: false }) labelLayer: ElementRef;\r\n  private labelLayerElement;\r\n  private labelContext: CanvasRenderingContext2D;\r\n\r\n  private deleteLayerElement;\r\n  private deleteContext: CanvasRenderingContext2D;\r\n  @ViewChild(\"deleteLayer\", {static: false }) set deleteLayer(layer: ElementRef) {\r\n    if (this.enableDelete) {\r\n      this.deleteLayerElement = layer.nativeElement;\r\n      this.deleteContext = this.deleteLayerElement.getContext(\"2d\");\r\n      this.addDeleteListeners();\r\n    }\r\n  };\r\n\r\n  private editLayerElement;\r\n  private editContext: CanvasRenderingContext2D;\r\n  @ViewChild(\"editLayer\", {static: false }) set editLayer(layer: ElementRef) {\r\n    if (this.enableEdit) {\r\n      this.editLayerElement = layer.nativeElement;\r\n      this.editContext = this.editLayerElement.getContext(\"2d\");\r\n      this.rectangleDrawing();\r\n    }\r\n  };\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"labelDialog\") labelDialog: TemplateRef<any>;\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  dialogRef: MatDialogRef<any>;\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"sourceImage\") sourceImage: ElementRef;\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"zoomDiv\") zoomDiv: ElementRef;\r\n  private zoomLayerElement;\r\n  private lensElement;\r\n  @ViewChild(\"lensContainer\") set zoom(container: ElementRef) {\r\n    if (this.enableZoom) {\r\n      const containerElement = container.nativeElement;\r\n      this.zoomLayerElement = containerElement.children[1];\r\n      this.lensElement = containerElement.children[0];\r\n      this.imageZoom();\r\n    }\r\n  }\r\n\r\n  private restricted = true;\r\n\r\n  constructor(@Inject(POPOUT_MODAL_DATA) public data: PopoutData,\r\n              private dialogService: MatDialogService,\r\n              private dialog: MatDialog) { }\r\n\r\n  ngOnInit(): void {\r\n    this.scans = this.data.scans;\r\n    this.coordinates = this.data.coordinates;\r\n\r\n    if (this.data.restricted !== undefined) {\r\n      this.restricted = this.data.restricted;\r\n    }\r\n    this.displayBoxes = false;\r\n    this.enableEdit = false;\r\n    this.enableDelete = false;\r\n\r\n    this.initMain();\r\n  }\r\n\r\n  get isAllowed() {\r\n    return !this.restricted;\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.drawLayerElement = this.drawLayer.nativeElement;\r\n    this.drawContext = this.drawLayerElement.getContext(\"2d\");\r\n    this.labelLayerElement = this.labelLayer.nativeElement;\r\n    this.labelContext = this.labelLayerElement.getContext(\"2d\");\r\n  }\r\n\r\n  initMain() {\r\n    this.currentMode = \"main\";\r\n    this.setCurrentImage();\r\n    this.setCurrentDimensions();\r\n  }\r\n\r\n  setCanvasProperties(context, lineWidth, lineCap, strokeStyle) {\r\n    context.lineWidth = lineWidth;\r\n    context.lineCap = lineCap;\r\n    context.strokeStyle = strokeStyle;\r\n  }\r\n\r\n  clearCanvas() {\r\n    this.drawContext.clearRect(0, 0, this.drawLayerElement.width, this.drawLayerElement.height);\r\n    this.labelContext.clearRect(0, 0, this.labelLayerElement.width, this.labelLayerElement.height);\r\n  }\r\n\r\n  setCurrentImage() {\r\n    const filename = this.scans[this.currentMode + \"Scan\"].filename;\r\n    this.currentScanUrl = this.serverUrl + \"images/\" + this.scans.id + \"/\" + filename;\r\n  }\r\n\r\n  setCurrentDimensions() {\r\n    const img = new Image();\r\n    img.src = this.currentScanUrl;\r\n    img.onload = (event) => {\r\n      const loadedImage = event.currentTarget as HTMLImageElement;\r\n      if (loadedImage.height <= MAX_IMAGE_HEIGHT) {\r\n        this.currentScaleFactor = 1.0;\r\n        this.currentHeight = loadedImage.height;\r\n        this.currentWidth = loadedImage.width;\r\n      } else {\r\n        this.currentScaleFactor = MAX_IMAGE_HEIGHT / loadedImage.height;\r\n        this.currentHeight = MAX_IMAGE_HEIGHT;\r\n        this.currentWidth = loadedImage.width * this.currentScaleFactor;\r\n      }\r\n    };\r\n  }\r\n\r\n  changeMode(mode: string) {\r\n    this.currentMode = mode;\r\n    this.enableDelete = false;\r\n    this.setCurrentImage();\r\n    this.setCurrentDimensions();\r\n    if (this.displayBoxes) {\r\n      this.drawBoxes();\r\n    }\r\n    this.toggleZoom();\r\n  }\r\n\r\n  toggleBoxes() {\r\n    this.displayBoxes = !this.displayBoxes;\r\n    this.clearCanvas();\r\n    if (this.enableDelete) {\r\n      this.enableDelete = false;\r\n    }\r\n    if (this.displayBoxes) {\r\n      this.drawBoxes();\r\n    }\r\n  }\r\n\r\n  toggleDelete() {\r\n    if (!this.displayBoxes) {\r\n      this.toggleBoxes();\r\n    }\r\n    this.enableDelete = !this.enableDelete;\r\n  }\r\n\r\n  toggleEditor() {\r\n    this.enableEdit = !this.enableEdit;\r\n  }\r\n\r\n  toggleZoom() {\r\n    this.enableZoom = !this.enableZoom;\r\n    if (this.enableDelete) {\r\n      this.toggleDelete();\r\n    }\r\n    if (this.enableEdit) {\r\n      this.toggleEditor();\r\n    }\r\n  }\r\n\r\n  drawBoxes() {\r\n    this.clearCanvas();\r\n    const coordinates = this.coordinates[this.currentMode];\r\n    for (const bbox of coordinates) {\r\n      this.drawRect(this.drawContext, bbox, DISPLAY_BOX_COLOR);\r\n      this.addLabel(bbox);\r\n    }\r\n  }\r\n\r\n  addDeleteListeners() {\r\n    const coordinates = this.coordinates[this.currentMode];\r\n    const rect = this.drawLayerElement.getBoundingClientRect();\r\n    const parent = this;\r\n    for (const bbox of coordinates) {\r\n      console.log(bbox);\r\n      this.deleteLayerElement.addEventListener(\"mousemove\", (e) => {\r\n        const x = bbox.left * parent.currentScaleFactor;\r\n        const y = bbox.top * parent.currentScaleFactor;\r\n        const w = bbox.width * parent.currentScaleFactor;\r\n        const h = bbox.height * parent.currentScaleFactor;\r\n        if (\r\n          x <= e.clientX - rect.left &&\r\n          e.clientX - rect.left <= x + w &&\r\n          y <= e.clientY - rect.top &&\r\n          e.clientY - rect.top <= y + h\r\n        ) {\r\n          parent.drawRect(this.deleteContext, bbox, \"red\");\r\n        } else {\r\n          parent.drawRect(this.deleteContext, bbox, \"blue\");\r\n        }\r\n      });\r\n      this.deleteLayerElement.addEventListener(\"click\", (e) => {\r\n        const x = bbox.left * parent.currentScaleFactor;\r\n        const y = bbox.top * parent.currentScaleFactor;\r\n        const w = bbox.width * parent.currentScaleFactor;\r\n        const h = bbox.height * parent.currentScaleFactor;\r\n        if (\r\n          x <= e.clientX - rect.left &&\r\n          e.clientX - rect.left <= x + w &&\r\n          y <= e.clientY - rect.top &&\r\n          e.clientY - rect.top <= y + h\r\n        ) {\r\n          console.log(\"It works!\");\r\n          parent.removeAlert(bbox);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  removeAlert(bbox: BoundingBox) {\r\n    const result = parent.confirm(\"Soll diese Box (Label: \" + bbox.label + \") wirklich gelöscht werden?\");\r\n    if (result) {\r\n      const idx = this.coordinates[this.currentMode].indexOf(bbox);\r\n      this.coordinates[this.currentMode].splice(idx, 1);\r\n      this.drawBoxes();\r\n      this.enableDelete = false;\r\n    }\r\n  }\r\n\r\n  drawRect(context: CanvasRenderingContext2D, bbox: BoundingBox, color: string) {\r\n    this.setCanvasProperties(context, BOX_LINE_WIDTH, \"square\", color);\r\n    context.beginPath();\r\n    context.rect(\r\n      bbox.left * this.currentScaleFactor,\r\n      bbox.top * this.currentScaleFactor,\r\n      bbox.width * this.currentScaleFactor,\r\n      bbox.height * this.currentScaleFactor);\r\n    context.stroke();\r\n  }\r\n\r\n  addLabel(bbox: BoundingBox) {\r\n    this.labelContext.font = \"bold 18pt Arial\";\r\n    this.labelContext.fillStyle = TEXT_COLOR;\r\n    this.labelContext.strokeStyle = \"black\";\r\n    this.labelContext.lineWidth = 1;\r\n    this.labelContext.fillText(\r\n      bbox.label,\r\n      this.currentScaleFactor * bbox.left,\r\n      this.currentScaleFactor * bbox.top + this.currentScaleFactor * bbox.height\r\n      + BOX_LINE_WIDTH + 20);\r\n    this.labelContext.strokeText(\r\n      bbox.label,\r\n      this.currentScaleFactor * bbox.left,\r\n      this.currentScaleFactor * bbox.top + this.currentScaleFactor * bbox.height\r\n      + BOX_LINE_WIDTH + 20);\r\n  }\r\n\r\n  rectangleDrawing() {\r\n    let rect = this.editLayerElement.getBoundingClientRect();\r\n    fromEvent(this.editLayerElement, \"mousedown\")\r\n      .pipe(\r\n        switchMap((e: MouseEvent) => {\r\n          rect = this.editLayerElement.getBoundingClientRect();\r\n          this.startX = e.clientX - rect.left;\r\n          this.startY = e.clientY - rect.top;\r\n          return fromEvent(this.editLayerElement, \"mousemove\").pipe(\r\n            takeUntil(fromEvent(this.editLayerElement, \"mouseup\")),\r\n            takeUntil(fromEvent(this.editLayerElement, \"mouseleave\"))\r\n          );\r\n        })\r\n      ).subscribe((event: MouseEvent) => {\r\n      const x = event.clientX - rect.left;\r\n      const y = event.clientY - rect.top;\r\n      this.width = x - this.startX;\r\n      this.height = y - this.startY;\r\n\r\n      this.setCanvasProperties(this.editContext, BOX_LINE_WIDTH, \"square\", EDIT_BOX_COLOR);\r\n      this.editContext.beginPath();\r\n      this.editContext.clearRect(0, 0, this.editLayerElement.width, this.editLayerElement.height);\r\n      this.editContext.rect(this.startX, this.startY, this.width, this.height);\r\n      this.editContext.stroke();\r\n    });\r\n  }\r\n\r\n  saveNewBox() {\r\n    if (!(this.width === 0 || this.height === 0)) {\r\n      const dialogConfig = this.dialogService.defaultConfig(\"470px\");\r\n      this.dialogRef = this.dialog.open(this.labelDialog, dialogConfig);\r\n      this.dialogRef.afterClosed().subscribe((val: boolean) => {\r\n        if (val && this.newLabel.length > 0) {\r\n          this.fixNegativeCoordinates();\r\n          this.coordinates[this.currentMode].push({\r\n            left: this.startX / this.currentScaleFactor,\r\n            top: this.startY / this.currentScaleFactor,\r\n            height: this.height / this.currentScaleFactor,\r\n            width: this.width / this.currentScaleFactor,\r\n            label: this.newLabel,\r\n          });\r\n          this.editContext.clearRect(0, 0, this.editLayerElement.width, this.editLayerElement.height);\r\n          this.newLabel = \"\";\r\n          this.width = 0;\r\n          this.height = 0;\r\n          if (this.displayBoxes) {\r\n            this.drawBoxes();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  close() {\r\n    this.newLabel = \"\";\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n  save() {\r\n    this.dialogRef.close(true);\r\n  }\r\n\r\n  private imageZoom() {\r\n    const img = this.sourceImage.nativeElement as HTMLImageElement;\r\n    const result = this.zoomDiv.nativeElement as HTMLDivElement;\r\n    // calculate ratio between result div and lens\r\n    const cx = result.offsetWidth / this.lensElement.offsetWidth;\r\n    const cy = result.offsetHeight / this.lensElement.offsetHeight;\r\n    // Set background properties for the result div\r\n    result.style.backgroundImage = \"url('\" + img.src + \"')\";\r\n    result.style.backgroundSize = (img.width * cx) + \"px \" + (img.height * cy) + \"px\";\r\n    // Execute a function when someone moves the cursor over the image or the lens\r\n    this.lensElement.removeEventListener(\"mousemove\", moveLens);\r\n    this.zoomLayerElement.removeEventListener(\"mousemove\", moveLens);\r\n    this.lensElement.addEventListener(\"mousemove\", moveLens);\r\n    this.zoomLayerElement.addEventListener(\"mousemove\", moveLens);\r\n\r\n    const parent = this;\r\n    // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\r\n    function moveLens(e) {\r\n      let x;\r\n      let y;\r\n      // Prevent any other actions that may occur when moving over the image\r\n      e.preventDefault();\r\n      // Get the cursor's x and y positions:\r\n      const pos = getCursorPos(e);\r\n      // Calculate the position of the lens:\r\n      x = pos.x - (parent.lensElement.offsetWidth / 2);\r\n      y = pos.y - (parent.lensElement.offsetHeight / 2);\r\n      // Prevent the lens from being positioned outside the image:\r\n      if (x > img.width - parent.lensElement.offsetWidth) {\r\n        x = img.width - parent.lensElement.offsetWidth;\r\n      }\r\n      if (x < 0) {\r\n        x = 0;\r\n      }\r\n      if (y > img.height - parent.lensElement.offsetHeight) {\r\n        y = img.height - parent.lensElement.offsetHeight;\r\n      }\r\n      if (y < 0) {\r\n        y = 0;\r\n      }\r\n      // Set the position of the lens:\r\n      parent.lensElement.style.left = x + \"px\";\r\n      parent.lensElement.style.top = y + \"px\";\r\n      // Display what the lens \"sees\":\r\n      result.style.backgroundPosition = \"-\" + (x * cx) + \"px -\" + (y * cy) + \"px\";\r\n    }\r\n    // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\r\n    function getCursorPos(e) {\r\n      let x: number;\r\n      let y: number;\r\n      // Get the x and y positions of the image\r\n      const a = img.getBoundingClientRect();\r\n      // Calculate the cursor's x and y coordinates, relative to the image:\r\n      x = e.pageX - a.left;\r\n      y = e.pageY - a.top;\r\n      // Consider any page scrolling\r\n      x = x - window.pageXOffset;\r\n      y = y - window.pageYOffset;\r\n      return {x, y};\r\n    }\r\n  }\r\n\r\n  private fixNegativeCoordinates() {\r\n    // in case the box is drawn from bottom right to top left: adjust negative width and height\r\n    if (this.width < 0) {\r\n      this.width = - this.width;\r\n      this.startX = this.startX - this.width;\r\n    }\r\n    if (this.height < 0) {\r\n      this.height = - this.height;\r\n      this.startY = this.startY - this.height;\r\n    }\r\n  }\r\n}\r\n","<div mat-dialog-title>\r\n<h5>{{data['parentText']}}</h5>\r\n</div>\r\n<mat-divider></mat-divider>\r\n<mat-dialog-content [formGroup]=\"form\">\r\n  {{data['textBefore']}}\r\n    <mat-form-field *ngIf=\"data.kind === 'text'\">\r\n      <input matInput type=\"text\" formControlName=\"text\" placeholder=\"{{data['value']}}\">\r\n    </mat-form-field>\r\n    <mat-form-field *ngIf=\"data.kind === 'number'\">\r\n      <input matInput type=\"number\" formControlName=\"number\" placeholder=\"{{data['value']}}\">\r\n    </mat-form-field>\r\n    <mat-form-field *ngIf=\"data.kind === 'date'\">\r\n      <input matInput type=\"text\" ngbDatepicker #d=\"ngbDatepicker\" container=\"body\"\r\n             (click)=\"d.toggle()\" formControlName=\"date\" placeholder=\"{{data['value']}}\" readonly/>\r\n    </mat-form-field>\r\n    <ng-container *ngIf=\"data.kind === 'ratio'\">\r\n      <mat-form-field>\r\n        <input #numerator matInput type=\"number\" formControlName=\"numerator\"/>\r\n      </mat-form-field> /\r\n      <mat-form-field>\r\n        <input #denominator matInput type=\"number\" formControlName=\"denominator\"/>\r\n      </mat-form-field>\r\n      = {{displayQuotient(numerator.value, denominator.value)}}\r\n    </ng-container>\r\n  {{data['textAfter']}}\r\n\r\n</mat-dialog-content>\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-actions class=\"buttons\">\r\n  <button class=\"btn btn-primary\" (click)=\"save()\">Speichern</button>\r\n  <button class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n</mat-dialog-actions>\r\n","import { Component, OnInit, Inject } from \"@angular/core\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\n\r\nimport {displayableQuotient} from \"@app/helpers\";\r\n\r\n@Component({\r\n  selector: \"app-modal\",\r\n  templateUrl: \"./inputModal.component.html\",\r\n  styleUrls: [\"./inputModal.component.scss\"]\r\n})\r\nexport class InputModalComponent implements OnInit {\r\n\r\n  form: FormGroup;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<InputModalComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.fb.group({\r\n      text: \"\",\r\n      number: null,\r\n      date: null,\r\n      numerator: null,\r\n      denominator: null\r\n    });\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n  checkForm(): boolean {\r\n    const value = this.form.value;\r\n    return !!(value.text || value.number || value.date || (value.numerator && value.denominator));\r\n  }\r\n\r\n  save() {\r\n    if(this.checkForm()) {\r\n      this.dialogRef.close(this.form.value);\r\n    } else {\r\n      this.dialogRef.close(false);\r\n    }\r\n  }\r\n\r\n  displayQuotient(numerator, denominator) {\r\n    return displayableQuotient(numerator as number,\r\n      denominator as number, this.data[\"fractionDigits\"]);\r\n  }\r\n\r\n}\r\n","<table>\r\n  <tbody>\r\n    <tr *ngFor=\"let row of rows\">\r\n      <td class=\"category\"\r\n          [style.width.%]=\"10\"\r\n          [ngStyle]=\"{'color': row.optional ? 'grey' : 'black'}\">{{row.name}}</td>\r\n      <ng-container *ngFor=\"let sel of row.selectables\" class=\"col-3\">\r\n        <ng-container *ngIf=\"sel.kind === 'box'\">\r\n          <td class=\"box\">\r\n            <input type=\"checkbox\" [(ngModel)]=\"sel.value\"\r\n                   (click)=\"update(sel)\" id=\"{{row.name}} {{sel.name}} box\"/>\r\n          </td>\r\n          <td class=\"title\" [style.width.%]=\"width\">\r\n            <label [ngClass]=\"{'selected': sel.value}\"\r\n                   for=\"{{row.name}} {{sel.name}} box\">\r\n              {{sel.name}}\r\n            </label>\r\n          </td>\r\n          <app-variables *ngIf=\"sel.variables.length > 0\"\r\n                         (clickEvent)=\"updateFromVariable(sel)\"\r\n                         [variables]=\"sel.variables\"\r\n                         [parentText]=\"sel.name\"\r\n                         [parentActive]=\"sel.value\"></app-variables>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"sel.kind === 'group'\">\r\n          <ng-container *ngFor=\"let option of sel.options\">\r\n            <td class=\"radio box\">\r\n              <input type=\"radio\"\r\n                     id=\"{{row.name}} {{sel.name + option.name}} box\"\r\n                     (click)=\"update(sel, option.name)\"\r\n                     [name]=\"sel.name\"\r\n                     [value]=\"option.name\"\r\n                     [(ngModel)]=\"sel.value\"/>\r\n            </td>\r\n            <td class=\"title\" [style.width.%]=\"width\">\r\n              <label for=\"{{row.name}} {{sel.name + option.name}} box\"\r\n                     [ngClass]=\"{'selected': (option.name === sel.value)}\">\r\n                {{option.name}}\r\n              </label>\r\n            </td>\r\n            <app-variables *ngIf=\"option.variables.length > 0\"\r\n                           (clickEvent)=\"updateFromVariable(option, sel)\"\r\n                           [variables]=\"option.variables\"\r\n                           [parentText]=\"option.name\"\r\n                           [parentActive]=\"option.name === sel.value\"></app-variables>\r\n          </ng-container>\r\n        </ng-container>\r\n      </ng-container>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n","import {Component, Input, OnInit, Output, EventEmitter} from \"@angular/core\";\r\n\r\nimport {DataParserService} from \"@app/core\";\r\n\r\nimport * as M from \"@app/models/templateModel\";\r\n\r\n@Component({\r\n  selector: \"app-options\",\r\n  templateUrl: \"./options.component.html\",\r\n  styleUrls: [\"./options.component.scss\"]\r\n})\r\nexport class OptionsComponent implements OnInit {\r\n\r\n  @Input() categories: M.Category[];\r\n\r\n  // TODO Make these configurable\r\n\r\n  minRowLength = 1;\r\n  maxRowLength: number;\r\n  width: number;\r\n  rows: M.Category[];\r\n\r\n  @Output() clickEvent = new EventEmitter<any>();\r\n\r\n  constructor(private dataParser: DataParserService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.setMinRowLength(this.categories);\r\n    this.maxRowLength = 6;\r\n    this.determineWidth();\r\n    this.initRows();\r\n  }\r\n\r\n  initRows() {\r\n    if (this.minRowLength > this.maxRowLength) {\r\n      window.alert(\"Die gewählte Reihenlänge von \" + this.maxRowLength +\r\n        \" ist kleiner als die kleinstmögliche Länge von \" + this.minRowLength +\r\n        \". Die Reihenlänge wird auf \" + this.minRowLength + \" gesetzt.\");\r\n      this.maxRowLength = this.minRowLength;\r\n    }\r\n    this.rows = this.dataParser.extractRows(this.categories, this.maxRowLength);\r\n  }\r\n\r\n  setMinRowLength(cats: M.Category[]) {\r\n    let minRowLength = 1;\r\n    for (const cat of cats) {\r\n      for (const sel of cat.selectables) {\r\n        if (sel.kind === \"group\") {\r\n          if (sel.options.length > minRowLength) {\r\n            minRowLength = sel.options.length;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.minRowLength = minRowLength;\r\n  }\r\n\r\n  update(sel: M.Selectable, option?: string) {\r\n    if (sel.kind === \"group\") {\r\n      if (sel.value === option) {\r\n        sel.value = null;\r\n      }\r\n    }\r\n    this.clickEvent.emit();\r\n  }\r\n\r\n  updateFromVariable(parent: M.Clickable, group?: M.Group) {\r\n    if (parent.kind === \"box\") {\r\n      parent.value = true;\r\n    } else {\r\n      if (group === undefined) {\r\n        Error(\"Something went wrong here\");\r\n      } else {\r\n        group.value = parent.name;\r\n      }\r\n    }\r\n    this.clickEvent.emit();\r\n  }\r\n\r\n  private determineWidth() {\r\n    this.width = 88 / this.maxRowLength;\r\n  }\r\n}\r\n","import {Component, OnInit, Input} from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-report\",\r\n  templateUrl: \"./report.component.html\",\r\n  styleUrls: [\"./report.component.scss\"]\r\n})\r\nexport class ReportComponent implements OnInit {\r\n\r\n  @Input() report: string;\r\n  @Input() judgement: string;\r\n\r\n  disclaimer: string;\r\n\r\n  constructor() { }\r\n\r\n  // TODO: make download button\r\n  // TODO: Send change event to layout so changes in report are reflected in data structure\r\n\r\n  ngOnInit() {\r\n    this.disclaimer = \"Dieser Bericht wurde mit Hilfe eines sprachgesteuerten Browsertools aus Textbausteinen erstellt.\";\r\n  }\r\n\r\n  copyText(inputElement: HTMLTextAreaElement) {\r\n    inputElement.select();\r\n    document.execCommand(\"copy\");\r\n    inputElement.setSelectionRange(0, 0);\r\n  }\r\n\r\n  copyAll() {\r\n    let fullText: string;\r\n    fullText = this.report + \"\\n\\n\" + this.disclaimer + \"\\n\\n\\n\" + this.judgement + \"\\n\\n\" + this.disclaimer;\r\n    const selBox = document.createElement(\"textarea\");\r\n    selBox.value = fullText;\r\n    document.body.append(selBox);\r\n    selBox.focus();\r\n    selBox.select();\r\n    document.execCommand(\"copy\");\r\n    document.body.removeChild(selBox);\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"button\">\r\n  <button id=\"copy-button\" (click)=\"copyAll()\" class=\"btn btn-outline-secondary\">Kopieren</button>\r\n</div>\r\n\r\n<div class=\"report-text\">\r\n  <label for=\"report\"></label>\r\n  <textarea placeholder=\"Wenn Sie hier etwas eingeben, wird es bei der Berichtserstellung überschrieben\"\r\n            id=\"report\" class=\"w-100\" [(ngModel)]=\"report\" #textContent ></textarea>\r\n</div>\r\n\r\n<div class=\"judgement-text\">\r\n    <label for=\"judgement\"></label>\r\n\t\t<textarea placeholder=\"Wenn Sie hier etwas eingeben, wird es bei der Beurteilungsgenerierung überschrieben\"\r\n              id=\"judgement\" class=\"w-100\" [(ngModel)]=\"judgement\"></textarea>\r\n</div>\r\n\r\n\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { MatDialogModule } from \"@angular/material/dialog\";\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { MatDividerModule } from \"@angular/material/divider\";\r\nimport { MatInputModule } from \"@angular/material/input\";\r\nimport { MatRadioModule } from \"@angular/material/radio\";\r\nimport { MatTooltipModule } from \"@angular/material/tooltip\";\r\nimport { MatProgressBarModule } from \"@angular/material/progress-bar\";\r\nimport { NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport {MatCheckboxModule} from \"@angular/material/checkbox\";\r\n\r\nimport { ConfirmDialogComponent } from \"@app/shared/confirm-dialog/confirm-dialog.component\";\r\nimport { InputModalComponent } from \"@app/shared/inputModal/inputModal.component\";\r\nimport { OptionsComponent } from \"@app/shared/options/options.component\";\r\nimport { ReportComponent } from \"@app/shared/report/report.component\";\r\nimport { UploadComponent } from \"@app/shared/upload/upload.component\";\r\nimport { UploadMaterialComponent } from \"@app/shared/upload-material/upload-material.component\";\r\nimport { VariablesComponent } from \"@app/shared/variables/variables.component\";\r\nimport { ImageDisplayComponent } from \"@app/shared/image-display/image-display.component\";\r\nimport { SignUpComponent } from \"./sign-up/sign-up.component\";\r\nimport { ChangePasswordComponent } from \"./change-password/change-password.component\";\r\nimport { ChangeUsernameComponent } from \"./change-username/change-username.component\";\r\n\r\n\r\n@NgModule({\r\n    declarations: [\r\n      ConfirmDialogComponent,\r\n      InputModalComponent,\r\n      OptionsComponent,\r\n      ReportComponent,\r\n      UploadComponent,\r\n      UploadMaterialComponent,\r\n      VariablesComponent,\r\n      ImageDisplayComponent,\r\n      SignUpComponent,\r\n      ChangePasswordComponent,\r\n      ChangeUsernameComponent\r\n    ],\r\n    imports: [\r\n      CommonModule,\r\n      FormsModule,\r\n      ReactiveFormsModule,\r\n      MatDialogModule,\r\n      MatDividerModule,\r\n      MatInputModule,\r\n      MatTooltipModule,\r\n      MatRadioModule,\r\n      MatProgressBarModule,\r\n      NgbModule,\r\n      MatCheckboxModule\r\n    ],\r\n    exports: [\r\n        ConfirmDialogComponent,\r\n        InputModalComponent,\r\n        OptionsComponent,\r\n        ReportComponent,\r\n        UploadComponent,\r\n        UploadMaterialComponent,\r\n        VariablesComponent,\r\n        ImageDisplayComponent,\r\n        SignUpComponent,\r\n        ChangeUsernameComponent,\r\n        ChangePasswordComponent\r\n    ]\r\n})\r\nexport class SharedModule { }\r\n","<div class=\"col-md-6 offset-md-3 mt-5\">\r\n  <div class=\"card\">\r\n    <h4 class=\"card-header\">User Registrieren</h4>\r\n    <div class=\"card-body\">\r\n      <form [formGroup]=\"signUpForm\" (ngSubmit)=\"onSubmit()\">\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">Nutzername</label>\r\n          <input id=\"username\" type=\"text\" formControlName=\"username\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && sc.username.errors }\"/>\r\n          <div *ngIf=\"submitted && sc.username.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"sc.username.errors.required\">Nutzername ist erforderlich</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Passwort</label>\r\n          <input id=\"password\" type=\"password\" formControlName=\"password\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && sc.password.errors }\"/>\r\n          <div *ngIf=\"submitted && sc.password.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"sc.password.errors.required\">Passwort ist erforderlich</div>\r\n            <div *ngIf=\"sc.password.errors.minlength\">Password muss mindestens 6 Zeichen lang sein</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"confirmPass\">Passwort bestätigen</label>\r\n          <input id=\"confirmPass\" type=\"password\" formControlName=\"confirmPass\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && sc.confirmPass.errors }\"/>\r\n          <div *ngIf=\"submitted && sc.confirmPass.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"sc.confirmPass.errors.required\">Passwort bestätigen ist erforderlich</div>\r\n            <div *ngIf=\"sc.confirmPass.errors.mustMatch\">Passwörter stimmen nicht überein</div>\r\n          </div>\r\n        </div>\r\n       <div class=\"form-group\">\r\n          <label for=\"role\">Rolle wählen</label>\r\n          <select class=\"form-select\" id=\"role\" formControlName=\"role\">\r\n            <option *ngFor=\"let role of roles\">{{role}}</option>\r\n          </select>\r\n          <div *ngIf=\"submitted && sc.role.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"sc.role.errors.required\">Bitte Rolle auswählen</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <button style=\"float:right\" class=\"btn btn-primary\">Registrieren</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div *ngIf=\"error\" class=\"card-footer\">\r\n      <div class=\"alert alert-danger mt-3\">{{error}}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport {FormBuilder, FormGroup, Validators} from \"@angular/forms\";\r\nimport {Role} from \"@app/models\";\r\nimport {UserService} from \"@app/core\";\r\nimport {mustMatch} from \"@app/helpers\";\r\n\r\n@Component({\r\n  selector: \"app-sign-up\",\r\n  templateUrl: \"./sign-up.component.html\",\r\n  styleUrls: [\"./sign-up.component.css\"]\r\n})\r\nexport class SignUpComponent implements OnInit {\r\n\r\n  signUpForm: FormGroup;\r\n  submitted = false;\r\n  error = \"\";\r\n\r\n  roles = [Role.User, Role.Moderator, Role.Admin];\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              private userService: UserService) { }\r\n\r\n  // convenience getter for easy access to form fields\r\n  get sc() {\r\n    return this.signUpForm.controls;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.signUpForm = this.formBuilder.group({\r\n      username: [\"\", [Validators.required]],\r\n      password: [\"\", [Validators.required, Validators.minLength(6)]],\r\n      confirmPass: [\"\", [Validators.required]],\r\n      role: [Role.User, [Validators.required]]\r\n    }, {\r\n      validator: mustMatch(\"password\", \"confirmPass\")\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.submitted = true;\r\n    if (this.signUpForm.invalid) {\r\n      return;\r\n    } else {\r\n      this.userService.signUp(this.sc[\"username\"].value, this.sc[\"password\"].value, this.sc[\"role\"].value)\r\n        .subscribe(\r\n          res => {\r\n            window.alert(res.message);\r\n            this.error = \"\";\r\n            this.signUpForm.reset();\r\n            this.submitted = false;\r\n          },\r\n          err => {\r\n            this.error = err;\r\n          }\r\n        );\r\n    }\r\n  }\r\n\r\n}\r\n","<div mat-dialog-title class=\"header\">\r\n  <h4>Aufnahmen hochladen</h4>\r\n</div>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-content class=\"uploadForm\" [formGroup]=\"uploadForm\" (ngSubmit)=\"submit()\">\r\n    <table class=\"files\">\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"identifier\">Identifier: </label></td>\r\n        <td class=\"button\"><input #identifierInput (change)=\"updateIdentifier(identifierInput.value)\"\r\n                                  matTooltip=\"String-Pattern für Bildzuordnung eingeben.\r\n        Variable Ziffern mit * kennzeichnen.\"\r\n          type=\"text\" id=\"identifier\"></td>\r\n        <td><mat-checkbox style=\"font-size: 120%; margin-left: 20px\"\r\n                          (click)=\"setIgnoreFlags(identifierInput.value)\"\r\n                          matTooltip=\"Ohne Dateienkontrolle hochladen\">ID ignorieren</mat-checkbox></td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"mainScans\">Frontalaufnahme(n): </label></td>\r\n        <td class=\"button\">\r\n          <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"fileInput1.click()\">Datei(en) auswählen</button>\r\n          <input hidden class=\"mr-3\" type=\"file\" multiple=\"multiple\" id=\"mainScans\" #fileInput1\r\n                 (change)=\"onFileSelect($event, 'mainScans')\"/></td>\r\n        <td class=\"button\">\r\n          <select class=\"dropdown\" id=\"mainImageFiles\" name=\"mainImageFiles\"\r\n                  [ngStyle]=\"{'background-color': (mainFlags.includes(false)) ? 'red' : 'white'}\"\r\n                  [disabled]=\"this.uploadForm.get('mainScans').value.length === 0\">\r\n            <option>Dateien</option>\r\n            <ng-container *ngFor=\"let file of this.uploadForm.get('mainScans').value; index as i\">\r\n              <option disabled [ngStyle]=\"{'background-color': (mainFlags[i] ? 'white' : 'red')}\">{{file.name}}</option>\r\n            </ng-container>\r\n          </select>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"lateralScans\">Lateralaufnahme(n): </label></td>\r\n        <td class=\"button\">\r\n          <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"fileInput2.click()\">Datei(en) auswählen</button>\r\n          <input hidden type=\"file\" multiple=\"multiple\" id=\"lateralScans\" #fileInput2\r\n                 (change)=\"onFileSelect($event,'lateralScans')\"/></td>\r\n        <td class=\"button\">\r\n          <select class=\"dropdown\" id=\"lateralImageFiles\" name=\"lateralImageFiles\"\r\n                  [ngStyle]=\"{'background-color': (lateralRedFlags.includes(false)) ? 'red' :\r\n                            (lateralYellowFlags.includes(false)) ? 'yellow' : 'white'}\"\r\n                  [disabled]=\"this.uploadForm.get('lateralScans').value.length === 0\">\r\n            <option>Dateien</option>\r\n            <ng-container *ngFor=\"let file of this.uploadForm.get('lateralScans').value; index as i\">\r\n              <option disabled [ngStyle]=\"{'background-color': !lateralRedFlags[i] ? 'red':\r\n                                              !lateralYellowFlags[i] ? 'yellow' : 'white'}\">\r\n                {{file.name}}</option>\r\n            </ng-container>\r\n          </select>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"preImageFile\">Voraufnahme(n): </label></td>\r\n        <td class=\"button\">\r\n          <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"fileInput3.click()\">Datei(en) auswählen</button>\r\n          <input hidden type=\"file\" multiple=\"multiple\" id=\"preImageFile\" #fileInput3\r\n                 (change)=\"onFileSelect($event,'preScans')\"/>\r\n        </td>\r\n        <td class=\"button\">\r\n          <select class=\"dropdown\" id=\"preImageFiles\" name=\"preImageFiles\"\r\n                  [ngStyle]=\"{'background-color': (preRedFlags.includes(false)) ? 'red' :\r\n                            (preYellowFlags.includes(false)) ? 'yellow' : 'white'}\"\r\n                  [disabled]=\"this.uploadForm.get('preScans').value.length === 0\">\r\n            <option>Dateien</option>\r\n            <ng-container *ngFor=\"let file of this.uploadForm.get('preScans').value; index as i\">\r\n              <option disabled [ngStyle]=\"{'background-color': !preRedFlags[i] ? 'red':\r\n                                              !preYellowFlags[i] ? 'yellow' : 'white'}\">\r\n                {{file.name}}</option>\r\n            </ng-container>\r\n          </select>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n\r\n    <mat-divider></mat-divider>\r\n\r\n  <div class=\"templateSelect\">\r\n    <h5>Schablone auswählen:</h5>\r\n    <mat-radio-group class=\"verticalRadioGroup\" formControlName=\"template\">\r\n      <ng-container *ngFor=\"let template of templates\">\r\n        <mat-radio-button style=\"font-size: 120%\" value=\"{{stringify(template)}}\">\r\n          {{template.name}}\r\n        </mat-radio-button>\r\n      </ng-container>\r\n    </mat-radio-group>\r\n  </div>\r\n\r\n  <ng-container *ngIf=\"uploading\">\r\n    <mat-progress-bar mode=\"determinate\" value=\"{{progress}}\"></mat-progress-bar>\r\n    <div class=\"alert\" *ngFor=\"let message of messages\">{{message}}</div>\r\n  </ng-container>\r\n\r\n</mat-dialog-content>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-actions class=\"buttons\">\r\n  <button type=\"submit\" id=\"submitButton\" class=\"btn btn-primary\"\r\n          [disabled]=\"uploadForm.invalid\"\r\n          (click)=\"submit()\">Hochladen</button>\r\n  <button id=\"cancelButton\" class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n</mat-dialog-actions>\r\n\r\n\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport {FormControl, FormGroup, Validators} from \"@angular/forms\";\r\nimport {nanoid} from \"nanoid\";\r\nimport {MatDialogRef} from \"@angular/material/dialog\";\r\n\r\nimport * as M from \"@app/models/templateModel\";\r\nimport {BackendCallerService, FilesSortingService} from \"@app/core\";\r\n\r\n@Component({\r\n  selector: \"app-upload-material\",\r\n  templateUrl: \"./upload-material.component.html\",\r\n  styleUrls: [\"./upload-material.component.scss\"]\r\n})\r\nexport class UploadMaterialComponent implements OnInit {\r\n\r\n  uploadForm: FormGroup;\r\n  templates: M.Template[];\r\n\r\n  mainFlags: boolean[] = [];\r\n  lateralRedFlags: boolean[] = [];\r\n  lateralYellowFlags: boolean[] = [];\r\n  preRedFlags: boolean[] = [];\r\n  preYellowFlags: boolean[] = [];\r\n\r\n  ignoreFlags = false;\r\n\r\n  supportedFileTypes = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\r\n  progress = 0;\r\n  uploading = false;\r\n  messages: string[] = [];\r\n\r\n  constructor(private backendCaller: BackendCallerService,\r\n              private dialogRef: MatDialogRef<UploadMaterialComponent>,\r\n              private filesSorter: FilesSortingService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initForm();\r\n    this.updateTemplateList();\r\n  }\r\n\r\n  initForm() {\r\n    this.uploadForm = new FormGroup({\r\n      mainScans: new FormControl([], {validators: [Validators.required]}),\r\n      lateralScans: new FormControl([]),\r\n      preScans: new FormControl([]),\r\n      template: new FormControl(null, {validators: [Validators.required]})\r\n    });\r\n  }\r\n\r\n  updateTemplateList(): void {\r\n    this.backendCaller.getTemplateList().subscribe((templates) => {\r\n      this.templates = templates;\r\n    });\r\n  }\r\n\r\n  stringify(dict) {\r\n    return JSON.stringify(dict);\r\n  }\r\n\r\n  updateIdentifier(id: string) {\r\n    if (!this.ignoreFlags) {\r\n      this.filesSorter.setIdentifier(id);\r\n      this.flagFiles();\r\n    }\r\n  }\r\n\r\n  setIgnoreFlags(id: string) {\r\n    this.ignoreFlags = !this.ignoreFlags;\r\n    if (this.ignoreFlags) {\r\n      this.filesSorter.setIdentifier(\"\");\r\n    } else {\r\n      this.filesSorter.setIdentifier(id);\r\n    }\r\n    this.flagFiles();\r\n  }\r\n\r\n  onFileSelect(event, scanType: string) {\r\n    if (event.target.files.length > 0) {\r\n      const files = event.target.files;\r\n      if (this.fileFilter(files)) {\r\n        this.uploadForm.get(scanType).setValue(Array.from(files));\r\n        this.flagFiles();\r\n      }\r\n    }\r\n  }\r\n\r\n  fileFilter(files: File[]): boolean {\r\n    for (const file of files) {\r\n      if (!(this.supportedFileTypes.includes(file.type))) {\r\n        window.alert(\"Die Datei \" + file.name + \" besitzt ein nicht unterstütztes Dateiformat. \" +\r\n          \"Bitte nur PNG oder JPEG hochladen.\");\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  flagFiles(): void {\r\n    const mainFiles: File[] = this.uploadForm.get(\"mainScans\").value;\r\n    const lateralFiles: File[] = this.uploadForm.get(\"lateralScans\").value;\r\n    const preFiles: File[] = this.uploadForm.get(\"preScans\").value;\r\n\r\n    this.mainFlags = this.filesSorter.identifierSearch(mainFiles);\r\n    this.lateralRedFlags = this.filesSorter.identifierSearch(lateralFiles);\r\n    this.preRedFlags = this.filesSorter.identifierSearch(preFiles);\r\n\r\n    this.lateralYellowFlags = this.filesSorter.fileMatchSearch(mainFiles, lateralFiles);\r\n    this.preYellowFlags = this.filesSorter.fileMatchSearch(mainFiles, preFiles);\r\n  }\r\n\r\n  submit(): void {\r\n    this.uploading = true;\r\n    let choice = true;\r\n    if (this.mainFlags.includes(false) || this.lateralYellowFlags.includes(false) || this.lateralRedFlags.includes(false)\r\n    || this.preYellowFlags.includes(false) || this.preRedFlags.includes(false)) {\r\n      choice = window.confirm(\"Eine oder mehre Dateien konnten nicht korrekt zugeordnet werden. \" +\r\n        \"Diese werden beim Upload ignoriert. Sind Sie sicher, dass Sie fortfahren möchten?\");\r\n    }\r\n\r\n    if (choice) {\r\n      const mainScans = this.uploadForm.get(\"mainScans\").value;\r\n      const lateralScans = this.uploadForm.get(\"lateralScans\").value;\r\n      const preScans = this.uploadForm.get(\"preScans\").value;\r\n\r\n      const fileTuples: [File, File, File][] = this.filesSorter.getFileTuples(mainScans, lateralScans, preScans);\r\n\r\n      for (const fileTuple of fileTuples) {\r\n        const formData = new FormData();\r\n        formData.append(\"template\", this.uploadForm.get(\"template\").value);\r\n        // TODO: Add choice for this later\r\n        formData.append(\"modality\", \"xray\");\r\n        formData.append(\"id\", nanoid());\r\n        formData.append(\"mainScan\", fileTuple[0]);\r\n        formData.append(\"lateralScan\", fileTuple[1]);\r\n        formData.append(\"preScan\", fileTuple[2]);\r\n\r\n        this.backendCaller.addMaterial(formData).subscribe( result => {\r\n          this.progress += 100/(fileTuples.length);\r\n          if (result.success === false) {\r\n            this.messages.push(fileTuple[0].name + \": \" + result.message);\r\n          }\r\n        });\r\n      }\r\n      setTimeout(() => this.close(), 2000);\r\n    } else {\r\n      this.uploading = false;\r\n    }\r\n\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","<div mat-dialog-title class=\"header\">\r\n    <h5>Schablone hochladen</h5>\r\n</div>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-content [formGroup]=\"uploadForm\">\r\n  <div>\r\n    <table class=\"files\">\r\n      <tr>\r\n        <td><label class=\"mr-3\" for=\"NameOfFile\">Name: </label></td>\r\n        <td><input class=\"mr-3 inputField\" type=\"text\" name=\"name\" id=\"NameOfFile\" formControlName=\"name\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td><label class=\"mr-3\" for=\"filename\">Datei: </label></td>\r\n        <td><input readonly\r\n                   [value]=\"(currentFile === null || currentFile === undefined) ? null : currentFile.name\"\r\n                   class=\"mr-3 inputField\" type=\"text\" id=\"filename\"></td>\r\n        <td>\r\n          <button class=\"btn btn-outline-primary\" (click)=\"inputField.click()\" id=\"UploadButton\">Durchsuchen...</button>\r\n          <input hidden #inputField class=\"mr-3\"\r\n                 type=\"file\" id=\"uploadFile\" formControlName=\"filename\"\r\n                 (change)=\"onFileSelect($event)\">\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td></td>\r\n        <td><span *ngIf=\"this.showWarning\" class=\"alert-warning\">Dateityp nicht unterstützt.</span></td>\r\n      </tr>\r\n    </table>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-actions class=\"buttons\">\r\n  <button id=\"submitButton\" class=\"btn btn-primary\" (click)=\"upload()\">Hochladen</button>\r\n  <button id=\"cancelButton\" class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n</mat-dialog-actions>\r\n","import {Component, OnInit} from \"@angular/core\";\r\nimport {MatDialogRef} from \"@angular/material/dialog\";\r\nimport {FormControl, FormGroup, Validators} from \"@angular/forms\";\r\n\r\nimport {BackendCallerService} from \"@app/core\";\r\nimport {getFileExtension} from \"@app/helpers\";\r\n\r\n@Component({\r\n  selector: \"app-upload\",\r\n  templateUrl: \"./upload.component.html\",\r\n  styleUrls: [\"./upload.component.scss\"]\r\n})\r\nexport class UploadComponent implements OnInit {\r\n  currentFile: File;\r\n  showWarning = false;\r\n  uploadForm: FormGroup;\r\n\r\n  constructor(private dialogRef: MatDialogRef<UploadComponent>,\r\n              private backendCaller: BackendCallerService) { }\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n  }\r\n\r\n  initForm() {\r\n    this.uploadForm = new FormGroup({\r\n      name: new FormControl(null, {\r\n        validators: [Validators.required, Validators.minLength(3)]\r\n      }),\r\n      file: new FormControl(null, {validators: [Validators.required]}),\r\n      filename: new FormControl(null, {validators: [Validators.required]})\r\n    });\r\n  }\r\n\r\n  onFileSelect(event) {\r\n    if (event.target.files.length > 0) {\r\n      this.currentFile = event.target.files[0];\r\n      this.checkFileExtension(this.currentFile);\r\n      this.uploadForm.get(\"file\").setValue(this.currentFile);\r\n    }\r\n  }\r\n\r\n  checkFileExtension(file: File) {\r\n    this.showWarning = false;\r\n    const extension = getFileExtension(file.name);\r\n    if (!(extension === \"xlsx\" || extension === \"json\")) {\r\n      this.showWarning = true;\r\n    }\r\n  }\r\n\r\n  upload() {\r\n    const extension = getFileExtension(this.uploadForm.value.file.name);\r\n    const postData = new FormData();\r\n    postData.append(\"name\", this.uploadForm.value.name);\r\n    postData.append(\"file\", this.uploadForm.value.file);\r\n    if (extension === \"xlsx\") {\r\n      // this.templateManager.addExcel(postData);\r\n    } else if (extension === \"json\") {\r\n      this.backendCaller.addTemplateFromJSON(postData).subscribe((res) => {\r\n        window.alert(res.message);\r\n        this.uploadForm.reset();\r\n        this.currentFile = null;\r\n        this.close();\r\n      });\r\n    } else {\r\n      window.alert(\"Nicht unterstützter Dateityp! Datei muss .xlsx oder .json sein.\");\r\n      this.uploadForm.reset();\r\n      this.currentFile = null;\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  /*\r\n  upload(): void {\r\n    this.timesService.addTimeStamp(new Date());\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL((document.getElementById(\"uploadFile\") as HTMLInputElement).files[0]);\r\n    reader.onload = () => {\r\n      const dat = new Date();\r\n      const base64 = (reader.result as string).replace(/^.*?base64,/, \"\");\r\n      const data = { name: this.name + \" \" + dat.getDate() + \" \" + this.months[dat.getMonth()] + \" \" + dat.getFullYear() , data: base64 };\r\n      this.http.post(environment.urlRootScala + \"upload\", data, { \"observe\": \"response\" } ).subscribe((result) => {\r\n        window.alert(\"Upload Erfolgreich\");\r\n        this.router.navigate([\"list\"]);\r\n\r\n      }, (error) => {\r\n        if (error instanceof ErrorEvent) {\r\n          window.alert(\"an unknown error has occurred\");\r\n        } else {\r\n          window.alert(\"parsing failure: \" + (error as any).error);\r\n        }\r\n      });\r\n    };\r\n    reader.onerror = (error) => {\r\n      window.alert(\"The following error occurred:\\n\" + error);\r\n    };\r\n  }\r\n*/\r\n}\r\n","<table class=\"variables\">\r\n  <ng-container *ngFor=\"let variable of this.variables\">\r\n    <tr>\r\n      <td *ngIf=\"variable.kind === 'oc'\">\r\n          {{variable.textBefore}}\r\n\t        (<ng-container *ngFor=\"let val of variable.values; let last=last\">\r\n\t\t        <input type=\"radio\" id=\"{{variable.id}}+{{val}}\"  name=\"{{variable.id}}\"\r\n                   [value]=\"val\" [(ngModel)]=\"variable.value\"\r\n                   (click)=\"clicked(variable, val)\"/>\r\n            <label for=\"{{variable.id}}+{{val}}\"\r\n                   [ngClass]=\"{'selected': (val === variable.value && parentActive)}\">{{val}}</label>\r\n            <ng-container *ngIf=\"!last\">/</ng-container>\r\n\t        </ng-container>) {{variable.textAfter}}\r\n      </td>\r\n\r\n      <td *ngIf=\"variable.kind === 'mc'\">\r\n        {{variable.textBefore}}\r\n\t        [<ng-container *ngFor=\"let val of variable.values; let last=last\">\r\n\t\t        <input type=\"checkbox\" id=\"{{variable.id}}+{{val[0]}}\" name=\"{{variable.id}}\"\r\n                   [value]=\"val[0]\" [(ngModel)]=\"val[1]\" (click)=\"clicked(variable)\"/>\r\n            <label for=\"{{variable.id}}+{{val[0]}}\"\r\n                   [ngClass]=\"{'selected': (val[1] && parentActive)}\">{{val[0]}}</label>\r\n            <ng-container *ngIf=\"!last\">/</ng-container>\r\n\t        </ng-container>] {{variable.textAfter}}\r\n      </td>\r\n\r\n      <td *ngIf=\"variable.kind === 'text' || variable.kind === 'number'\r\n      || variable.kind === 'date' || variable.kind === 'ratio'\">\r\n        {{variable.textBefore}}\r\n        <button class=\"modal-button\"\r\n                [ngClass]=\"{'selected': parentActive}\"\r\n                id=\"{{variable.id}} btn\" (click)=\"submit(variable)\">{{parseButtonText(variable)}}</button>\r\n        {{variable.textAfter}}\r\n      </td>\r\n    </tr>\r\n  </ng-container>\r\n</table>\r\n","import {Component, Input, OnInit, Output, EventEmitter} from \"@angular/core\";\r\nimport {Variable} from \"@app/models\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {NgbDateStruct} from \"@ng-bootstrap/ng-bootstrap\";\r\nimport {displayableQuotient} from \"@app/helpers\";\r\nimport {MatDialogService} from \"@app/core\";\r\n\r\nimport {InputModalComponent} from \"@app/shared\";\r\n\r\n@Component({\r\n  selector: \"app-variables\",\r\n  templateUrl: \"./variables.component.html\",\r\n  styleUrls: [\"./variables.component.scss\"]\r\n})\r\nexport class VariablesComponent implements OnInit {\r\n\r\n  @Input() variables: Variable[];\r\n  @Input() parentText: string;\r\n  @Input() parentActive: boolean;\r\n\r\n  @Output() clickEvent = new EventEmitter<any>();\r\n\r\n  hasButtonBeenClickedOnce: Map<string, boolean> = new Map();\r\n\r\n  constructor(private dialog: MatDialog,\r\n              private dialogService: MatDialogService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initButtonClickedMap();\r\n  }\r\n\r\n  initButtonClickedMap() {\r\n    for (const variable of this.variables) {\r\n      if (variable.kind === \"text\" || variable.kind === \"number\" ||\r\n        variable.kind === \"date\" || variable.kind === \"ratio\") {\r\n        this.hasButtonBeenClickedOnce[variable.id] = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  parseButtonText(variable: Variable) {\r\n    const base = \".....\";\r\n    if (!this.parentActive) {\r\n      return base;\r\n    } else if (variable.kind === \"text\") {\r\n      return variable.value !== \"\" ? variable.value : base;\r\n    } else if (variable.kind === \"number\") {\r\n      return variable.value !== 0 ? variable.value : base;\r\n    } else if (variable.kind === \"date\") {\r\n      return (variable.value.day !== undefined &&\r\n        variable.value.month !== undefined &&\r\n        variable.value.year !== undefined) ?\r\n      variable.value.day + \".\" + variable.value.month + \".\" + variable.value.year : base;\r\n    } else if (variable.kind === \"ratio\") {\r\n      return (variable.numerator !== 0 && variable.denominator !== 0) ? displayableQuotient(variable.numerator,\r\n        variable.denominator, variable.fractionDigits) : base;\r\n    }\r\n  }\r\n\r\n  clicked(variable: Variable, value?: string) {\r\n    if (variable.kind === \"oc\") {\r\n      if (variable.value === value) {\r\n        variable.value = null;\r\n      }\r\n    }\r\n    this.clickEvent.emit();\r\n  }\r\n\r\n  async submit(variable: Variable) {\r\n    const response = await this.modalInput(variable);\r\n    if (response) {\r\n      this.hasButtonBeenClickedOnce[variable.id] = true;\r\n      this.clickEvent.emit();\r\n    }\r\n  }\r\n\r\n  modalInput(variable: Variable) {\r\n    const dialogConfig = this.dialogService.defaultConfig();\r\n\r\n    dialogConfig.data = {\r\n      kind: variable.kind,\r\n      textBefore: variable.textBefore,\r\n      textAfter: variable.textAfter,\r\n      parentText: this.parentText,\r\n    };\r\n    if (variable.kind === \"ratio\") {\r\n      dialogConfig.data[\"denominator\"] = variable.denominator;\r\n      dialogConfig.data[\"numerator\"] = variable.numerator;\r\n      dialogConfig.data[\"fractionDigits\"] = variable.fractionDigits;\r\n    } else if (variable.kind === \"text\" || variable.kind === \"number\") {\r\n      dialogConfig.data[\"value\"] = variable.value;\r\n    } else if (variable.kind === \"date\") {\r\n      dialogConfig.data[\"value\"] = variable.value.year.toString() + \"-\" +\r\n        variable.value.month.toString() + \"-\" + variable.value.day.toString();\r\n    }\r\n\r\n    const dialogRef = this.dialog.open(InputModalComponent, dialogConfig);\r\n\r\n    return dialogRef.afterClosed()\r\n      .toPromise()\r\n      .then(response => {\r\n        if (!response) {\r\n          return Promise.resolve(false);\r\n        } else {\r\n          this.assignValues(variable, response);\r\n          return Promise.resolve(true);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  assignValues(variable: Variable, input): void {\r\n    // TODO: check if response is valid\r\n    if (variable.kind === \"text\") {\r\n        variable.value = input.text;\r\n    } else if (variable.kind === \"date\") {\r\n      variable.value = (input.date as NgbDateStruct);\r\n    } else if (variable.kind === \"number\") {\r\n      variable.value = input.number as number;\r\n    } else if (variable.kind === \"ratio\") {\r\n      variable.numerator = input.numerator as number;\r\n      variable.denominator = input.denominator as number;\r\n    }\r\n  }\r\n\r\n\r\n\r\n}\r\n","<nav class=\"navbar navbar-expand-lg navbar-light bg-light\"  *ngIf=\"displayNavbar\">\r\n  <a class=\"navbar-brand\" href=\"#\">{{title}}  <fa-icon class=\"ml-1\" [icon]=\"faUser\"></fa-icon></a>\r\n  <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\"\r\n          aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n    <span class=\"navbar-toggler-icon\"></span>\r\n  </button>\r\n\r\n  <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n    <ul class=\"navbar-nav mr-auto\">\r\n      <li class=\"nav-item\" routerLinkActive='active'>\r\n        <a class=\"nav-link\" routerLink='/list'>Schablonen</a>\r\n      </li>\r\n      <li class=\"nav-item\" routerLinkActive='active'>\r\n        <a class=\"nav-link\" routerLink='/listMat' *ngIf=\"(isMod)\">Aufnahmen befunden</a>\r\n      </li>\r\n      <li class=\"nav-item\" routerLinkActive='active'>\r\n        <a class=\"nav-link\" routerLink='/radiolearn'>Radiolearn</a>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"navbar-nav ms-auto\">\r\n      <li class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/admin\" *ngIf=\"(isAdmin)\">Admin</a>\r\n      </li>\r\n      <li class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/manageAccount\">Account Management</a>\r\n      </li>\r\n      <li class=\"nav-item\">\r\n        <a class=\"nav-link\" style=\"cursor: pointer;\" (click)=\"logout()\">Logout</a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n\r\n</nav>\r\n","import {Component, DoCheck, OnInit} from \"@angular/core\";\r\nimport { faLaptopMedical } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport { DisplayService, AuthenticationService } from \"@app/core\";\r\nimport {Role, User} from \"@app/models\";\r\n\r\n@Component({\r\n  selector: \"app-header\",\r\n  templateUrl: \"./header.component.html\",\r\n  styleUrls: [\"./header.component.scss\"]\r\n})\r\nexport class HeaderComponent implements OnInit, DoCheck {\r\n\r\n\r\n  displayNavbar: boolean;\r\n  title = \"RadioSpeech\";\r\n  faUser: any;\r\n\r\n  private user: User;\r\n\r\n  constructor(private displayService: DisplayService,\r\n              private authenticationService: AuthenticationService) {}\r\n\r\n  get isMod() {\r\n    return this.user && (this.user.role === Role.Admin || this.user.role === Role.Moderator);\r\n  }\r\n\r\n  get isAdmin() {\r\n    return this.user && this.user.role === Role.Admin;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n    this.displayNavbar = true;\r\n    this.faUser = faLaptopMedical;\r\n  }\r\n\r\n  ngDoCheck(): void {\r\n    this.displayService.update();\r\n    this.displayNavbar = this.displayService.displayHeader;\r\n    this.title = this.displayService.title;\r\n  }\r\n\r\n  logout() {\r\n    this.authenticationService.logout();\r\n  }\r\n\r\n}\r\n","<div class=\"col-md-6 offset-md-3 mt-5\">\r\n  <div class=\"card\">\r\n    <h4 class=\"card-header\">RadioSpeech - Login</h4>\r\n    <div class=\"card-body\">\r\n      <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">Nutzername</label>\r\n          <input id=\"username\" type=\"text\" formControlName=\"username\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && fc.username.errors }\" />\r\n          <div *ngIf=\"submitted && fc.username.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"fc.username.errors.required\">Nutzername ist erforderlich</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Passwort</label>\r\n          <input id=\"password\" type=\"password\" formControlName=\"password\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && fc.password.errors }\" />\r\n          <div *ngIf=\"submitted && fc.password.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"fc.password.errors.required\">Passwort ist erforderlich</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <button style=\"float:right\" [disabled]=\"loading\" class=\"btn btn-primary\">\r\n            <span *ngIf=\"loading\" class=\"spinner-border spinner-border-sm mr-1\"></span>\r\n            Login\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div *ngIf=\"error\" class=\"card-footer\">\r\n      <div class=\"alert alert-danger mt-3\">{{error}}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { Router, ActivatedRoute } from \"@angular/router\";\r\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\nimport { first } from \"rxjs/operators\";\r\n\r\nimport {AuthenticationService} from \"@app/core/services/authentication.service\";\r\n\r\n@Component({\r\n  selector: \"app-login\",\r\n  templateUrl: \"./login.component.html\",\r\n  styleUrls: [\"./login.component.scss\"]\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  loginForm: FormGroup;\r\n  loading = false;\r\n  submitted = false;\r\n  error = \"\";\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              private route: ActivatedRoute,\r\n              private router: Router,\r\n              private authenticationService: AuthenticationService\r\n  ) {\r\n    if (this.authenticationService.userValue) {\r\n      this.router.navigate([\"/\"]);\r\n    }\r\n  }\r\n\r\n  // convenience getter for easy access to form fields\r\n  get fc() {\r\n    return this.loginForm.controls;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loginForm = this.formBuilder.group({\r\n      username: [\"\", Validators.required],\r\n      password: [\"\", Validators.required]\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.submitted = true;\r\n\r\n    // stop here if form is invalid\r\n    if (this.loginForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    this.authenticationService.login(this.fc.username.value, this.fc.password.value)\r\n      .pipe(first())\r\n      .subscribe({\r\n        next: () => {\r\n          // get return url from query parameters or default to home page\r\n          const returnUrl = this.route.snapshot.queryParams[\"returnUrl\"] || \"/\";\r\n          this.router.navigateByUrl(returnUrl);\r\n        },\r\n        error: error => {\r\n          this.error = error;\r\n          this.loading = false;\r\n        }\r\n      });\r\n  }\r\n\r\n}\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { ReactiveFormsModule } from \"@angular/forms\";\r\nimport { FontAwesomeModule } from \"@fortawesome/angular-fontawesome\";\r\nimport { RouterModule } from \"@angular/router\";\r\n\r\nimport { HeaderComponent } from \"@app/view/header/header.component\";\r\nimport { LoginComponent } from \"@app/view/login/login.component\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HeaderComponent,\r\n    LoginComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    FontAwesomeModule,\r\n    RouterModule\r\n  ],\r\n  exports: [\r\n    HeaderComponent,\r\n    LoginComponent\r\n  ]\r\n})\r\nexport class ViewModule { }\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  backend: \"http://localhost:8000/\",\r\n  authentication: \"radio/auth/\",\r\n  database: \"radio/database/\",\r\n  template: \"template/\",\r\n  material: \"material/\"\r\n};\r\n\r\n/*\r\n * In development mode, for easier debugging, you can ignore zone related error\r\n * stack frames such as `zone.run`/`zoneDelegate.invokeTask` by importing the\r\n * below file. Don't forget to comment it out in production mode\r\n * because it will have a performance impact when errors are thrown\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from \"@angular/core\";\r\nimport { platformBrowserDynamic } from \"@angular/platform-browser-dynamic\";\r\n\r\nimport { AppModule } from \"@app/app.module\";\r\nimport { environment } from \"@env/environment\";\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n"]}