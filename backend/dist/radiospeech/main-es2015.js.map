{"version":3,"file":"main-es2015.js","mappings":"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","sources":["./$_lazy_route_resources|lazy|groupOptions: {}|namespace object","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/core/index.ts","./src/app/core/services/authentication.service.ts","./src/app/core/services/backend-caller.service.ts","./src/app/core/services/dataParser.service.ts","./src/app/core/services/display.service.ts","./src/app/core/services/files-sorting.service.ts","./src/app/core/services/input-parser.service.ts","./src/app/core/services/mat-dialog.service.ts","./src/app/core/services/popout.service.ts","./src/app/core/services/popout.tokens.ts","./src/app/core/services/user.service.ts","./src/app/feature/account-management/account-management.component.ts","./src/app/feature/account-management/account-management.component.html","./src/app/feature/feature.module.ts","./src/app/feature/index.ts","./src/app/feature/judge-mat/judge-mat.component.ts","./src/app/feature/judge-mat/judge-mat.component.html","./src/app/feature/list-material/list-material.component.ts","./src/app/feature/list-material/list-material.component.html","./src/app/feature/list/list.component.ts","./src/app/feature/list/list.component.html","./src/app/feature/ui-base/ui-base.component.ts","./src/app/feature/ui-base/ui-base.component.html","./src/app/helpers/auth.guard.ts","./src/app/helpers/error.interceptor.ts","./src/app/helpers/fake-backend.ts","./src/app/helpers/format-datepicker.ts","./src/app/helpers/index.ts","./src/app/helpers/jwt.interceptor.ts","./src/app/helpers/old_model.ts","./src/app/helpers/util.ts","./src/app/models/generator.ts","./src/app/models/index.ts","./src/app/models/keyword.ts","./src/app/models/materialModel.ts","./src/app/models/role.ts","./src/app/models/takers.ts","./src/app/models/templateModel.ts","./src/app/models/user.ts","./src/app/shared/confirm-dialog/confirm-dialog.component.ts","./src/app/shared/confirm-dialog/confirm-dialog.component.html","./src/app/shared/image-display/image-display.component.ts","./src/app/shared/image-display/image-display.component.html","./src/app/shared/index.ts","./src/app/shared/inputModal/inputModal.component.ts","./src/app/shared/inputModal/inputModal.component.html","./src/app/shared/options/options.component.ts","./src/app/shared/options/options.component.html","./src/app/shared/report/report.component.ts","./src/app/shared/report/report.component.html","./src/app/shared/shared.module.ts","./src/app/shared/upload-material/upload-material.component.ts","./src/app/shared/upload-material/upload-material.component.html","./src/app/shared/upload/upload.component.ts","./src/app/shared/upload/upload.component.html","./src/app/shared/variables/variables.component.ts","./src/app/shared/variables/variables.component.html","./src/app/view/admin/admin.component.ts","./src/app/view/admin/admin.component.html","./src/app/view/header/header.component.ts","./src/app/view/header/header.component.html","./src/app/view/index.ts","./src/app/view/login/login.component.ts","./src/app/view/login/login.component.html","./src/app/view/view.module.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98255;\nmodule.exports = webpackEmptyAsyncContext;","import { NgModule } from \"@angular/core\";\r\nimport { Routes, RouterModule } from \"@angular/router\";\r\n\r\nimport { LoginComponent, AdminComponent } from \"@app/view\";\r\nimport { ListComponent, UiBaseComponent, ListMaterialComponent, JudgeMatComponent } from \"@app/feature\";\r\nimport { AuthGuard } from \"@app/helpers\";\r\nimport { Role } from \"@app/models\";\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"login\",\r\n    component: LoginComponent\r\n  },\r\n  {\r\n    path: \"list\",\r\n    component: ListComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.User, Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"main/:id\",\r\n    component: UiBaseComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.User, Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"listMat\",\r\n    component: ListMaterialComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"mainMat/:id\",\r\n    component: JudgeMatComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"radiolearn\",\r\n    component: ListMaterialComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.User, Role.Moderator, Role.Admin] }\r\n  },\r\n  {\r\n    path: \"admin\",\r\n    component: AdminComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { roles: [Role.Admin] }\r\n  },\r\n  {path: \"**\", redirectTo: \"/list\"}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\n\r\nexport class AppRoutingModule { }\r\n","import {Component} from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-root\",\r\n  templateUrl: \"./app.component.html\",\r\n  styleUrls: [\"./app.component.scss\"]\r\n})\r\n\r\nexport class AppComponent {\r\n\r\n  constructor() {\r\n  }\r\n\r\n}\r\n\r\n","<app-header></app-header>\r\n<router-outlet></router-outlet>\r\n","import { BrowserModule } from \"@angular/platform-browser\";\r\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { HTTP_INTERCEPTORS, HttpClientModule } from \"@angular/common/http\";\r\n\r\nimport { DateAdapter, MAT_DATE_FORMATS } from \"@angular/material/core\";\r\nimport { AppComponent } from \"./app.component\";\r\nimport { FeatureModule } from \"@app/feature/feature.module\";\r\nimport { ViewModule } from \"@app/view/view.module\";\r\nimport { SharedModule } from \"@app/shared/shared.module\";\r\nimport { AppRoutingModule } from \"./app-routing.module\";\r\nimport { JwtInterceptor, ErrorInterceptor, APP_DATE_FORMATS, AppDateAdapter } from \"@app/helpers\";\r\nimport { PopoutService } from \"@app/core\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n  ],\r\n    imports: [\r\n      BrowserModule,\r\n      BrowserAnimationsModule,\r\n      HttpClientModule,\r\n      AppRoutingModule,\r\n      FeatureModule,\r\n      SharedModule,\r\n      ViewModule,\r\n    ],\r\n  providers: [PopoutService,\r\n    { provide: DateAdapter, useClass: AppDateAdapter },\r\n    { provide: MAT_DATE_FORMATS, useValue: APP_DATE_FORMATS },\r\n    { provide: HTTP_INTERCEPTORS, useClass: JwtInterceptor, multi: true },\r\n    { provide: HTTP_INTERCEPTORS, useClass: ErrorInterceptor, multi: true }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","export * from \"./services/authentication.service\";\r\nexport * from \"./services/backend-caller.service\";\r\nexport * from \"./services/dataParser.service\";\r\nexport * from \"./services/display.service\";\r\nexport * from \"./services/files-sorting.service\";\r\nexport * from \"./services/input-parser.service\";\r\nexport * from \"./services/mat-dialog.service\";\r\nexport * from \"./services/popout.service\";\r\nexport * from \"./services/popout.tokens\";\r\nexport * from \"./services/user.service\";\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Router } from \"@angular/router\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { BehaviorSubject, Observable } from \"rxjs\";\r\nimport { map } from \"rxjs/operators\";\r\n\r\nimport { environment } from \"@env/environment\";\r\nimport { User } from \"@app/models\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class AuthenticationService {\r\n  public user: Observable<User>;\r\n  private userSubject: BehaviorSubject<User>;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private http: HttpClient\r\n  ) {\r\n    this.userSubject = new BehaviorSubject<User>(JSON.parse(localStorage.getItem(\"user\")));\r\n    this.user = this.userSubject.asObservable();\r\n  }\r\n\r\n  public get userValue(): User {\r\n    return this.userSubject.value;\r\n  }\r\n\r\n  login(username: string, password: string) {\r\n    return this.http.post<any>(environment.backend + environment.authentication + \"signIn\", { username, password })\r\n      .pipe(map(user => {\r\n        // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n        this.userSubject.next(user);\r\n        return user;\r\n      }));\r\n  }\r\n\r\n  logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem(\"user\");\r\n    this.userSubject.next(null);\r\n    this.router.navigate([\"/login\"]).then();\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport * as M from \"../../models/templateModel\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { environment } from \"../../../environments/environment\";\r\nimport {Observable} from \"rxjs\";\r\nimport {Template} from \"../../models/templateModel\";\r\nimport {Material} from \"../../models/materialModel\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\n\r\n// -----------------------------------\r\n// This class administrates the list of templates and executes all api calls\r\n// -----------------------------------\r\n\r\nexport class BackendCallerService {\r\n\r\n  templateUrl = environment.backend + environment.database + environment.template;\r\n  materialUrl = environment.backend + environment.database + environment.material;\r\n\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  getTemplateById(id: string): Observable<Template> {\r\n      return this.http.get<Template>(this.templateUrl + id);\r\n  }\r\n\r\n  // TEMPLATE API\r\n\r\n  addTemplate(template: M.Template): Observable<{ message: string; templateId: string }> {\r\n    return this.http.post<{ message: string; templateId: string }>(\r\n      this.templateUrl,\r\n      template\r\n    );\r\n  }\r\n\r\n  addTemplateFromJSON(jsonData: FormData): Observable<{message: string; templateId: string }> {\r\n    return this.http.post<{message: string, templateId: string }>(\r\n      this.templateUrl + \"json/\",\r\n      jsonData\r\n    );\r\n  }\r\n\r\n  /*\r\naddTemplateFromExcel(postData: FormData) {\r\n  this.http\r\n    .post<{ message: string; templateId: string }>(\r\n      this.activeUrl + \"excel\",\r\n      postData\r\n    )\r\n    .subscribe((res) => {\r\n      let str = \"\";\r\n      if (res.templateId === \"false\") {\r\n        str =\r\n          \"Fehler beim Hochladen der Excel Datei. Die Tabelle wurde nicht korrekt befüllt. \\n Folgender Fehler ist aufgetreten: \\n\\n\";\r\n      }\r\n      window.alert(str + res.message);\r\n    });\r\n}*/\r\n\r\n  deleteTemplate(id: string): Observable<Object> {\r\n    return this.http.delete(this.templateUrl + id);\r\n  }\r\n\r\n  updateTemplate(template: M.Template) {\r\n    return this.http\r\n      .put(this.templateUrl + template._id, {\r\n        parts: template.parts,\r\n        name: template.name,\r\n      });\r\n  }\r\n\r\n  getTemplateList(): Observable<Template[]> {\r\n    return this.http.get<Template[]>(this.templateUrl);\r\n  }\r\n\r\n  // MATERIAL API\r\n\r\n  addMaterial(formData: FormData): Observable<{ success: boolean; message: string }> {\r\n    return this.http.post<{ success: boolean; message: string }>(\r\n      this.materialUrl,\r\n      formData\r\n    );\r\n  }\r\n\r\n  getMaterialById(id: string): Observable<Material> {\r\n    return this.http.get<Material>(this.materialUrl + id);\r\n  }\r\n\r\n  deleteMaterial(objectID: string, scanID: string): Observable<{ message: string }> {\r\n    return this.http.post<{message: string}>(this.materialUrl + \"delete/\",\r\n      {objectID, scanID});\r\n  }\r\n\r\n  getMaterials(): Observable<Material[]> {\r\n    return this.http.get<Material[]>(\r\n      this.materialUrl + \"sample/\"\r\n    );\r\n  }\r\n\r\n  queryMaterials(query: Record<string, unknown>): Observable<Material[]> {\r\n    return this.http.post<Material[]>(\r\n      this.materialUrl + \"query/\",\r\n      query\r\n    );\r\n  }\r\n\r\n  updateMaterial(material: Material) {\r\n    return this.http.put<{message: string}>(this.materialUrl + material._id, {\r\n      template: material.template,\r\n      coordinates: material.coordinates,\r\n      judged: true\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\n","import { Injectable } from \"@angular/core\";\r\nimport * as O from \"../../helpers/old_model\";\r\nimport * as G from \"../../models/generator\";\r\nimport * as M from \"../../models/templateModel\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\n\r\nexport class DataParserService {\r\n\r\n  constructor() {}\r\n\r\n  convertModel(parts: O.TopLevel[], parseOptional: boolean): M.TopLevel[] {\r\n    const newParts: M.TopLevel[] = [];\r\n    for (const part of parts) {\r\n      if (part.kind === \"block\") {\r\n        newParts.push(M.convertBlock(part));\r\n      } else if (part.kind === \"enumeration\") {\r\n        newParts.push(M.convertEnum(part));\r\n      } else if (part.kind === \"category\") {\r\n        let newPart = M.convertCategory(part);\r\n        if (parseOptional) {\r\n          newPart = this.parseOptionalCategory(newPart);\r\n        }\r\n        newParts.push(newPart);\r\n      }\r\n    }\r\n    return newParts;\r\n  }\r\n\r\n  extractCategories(parts: M.TopLevel[], parseOptional: boolean): M.Category[] {\r\n    const res: M.Category[] = [];\r\n    for (const el of parts) {\r\n      if (el.kind === \"category\") {\r\n        if (parseOptional) {\r\n          const parsedCat = this.parseOptionalCategory(el);\r\n          res.push(parsedCat);\r\n        } else {\r\n          res.push(el);\r\n        }\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  parseOptionalCategory(cat: M.Category): M.Category {\r\n    const parsedName = this.parseCategoryTitle(cat.name);\r\n    return {\r\n      kind: cat.kind,\r\n      name: parsedName[0],\r\n      optional: parsedName[1],\r\n      selectables: cat.selectables\r\n    };\r\n  }\r\n\r\n  parseCategoryTitle(catName: string): [string, boolean] {\r\n    if (catName.includes(\"<\", 0)) {\r\n      return [catName.substring(1, catName.length), true];\r\n    } else {\r\n      return [catName, false];\r\n    }\r\n  }\r\n\r\n  // Takes list of categories to transform them into list of rows without groups, only singular buttons\r\n  extractRows(categories: M.Category[], maxRowLength: number): M.Category[] {\r\n    let rows: M.Category[] = [];\r\n\r\n    for (const category of categories) {\r\n      const splits = this.getSplits(category, maxRowLength);\r\n      const split_cats = this.splitCategory(category, splits);\r\n      rows = rows.concat(split_cats);\r\n    }\r\n\r\n    return rows;\r\n  }\r\n\r\n  splitCategory(category: M.Category, splits: number[]) {\r\n    // let n_categories = Math.ceil(category.selectables.length / splitLength);\r\n    const res: M.Category[] = [];\r\n\r\n    let pos = 0;\r\n    for (const split of splits) {\r\n      let name: string;\r\n      if (pos === 0) {\r\n        name = category.name;\r\n      } else {\r\n        name = \"\";\r\n      }\r\n      let temp_sels: M.Selectable[] = [];\r\n      temp_sels = category.selectables.slice(pos, pos + split);\r\n      res.push({\r\n        kind: \"category\",\r\n        name: name,\r\n        optional: category.optional,\r\n        selectables: temp_sels\r\n      });\r\n      pos += split;\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  getSplits(category: M.Category, maxRowLength: number): number[] {\r\n    // Variation of getRowLengths: returns the number of selectables per row instead of number of options\r\n    const rowSplits = [];\r\n    let currentSplit = 0;\r\n    let rowCounter = 0;\r\n    for (const sel of category.selectables) {\r\n      if (rowCounter >= maxRowLength) {\r\n        rowSplits.push(currentSplit);\r\n        currentSplit = 0;\r\n        rowCounter = 0;\r\n      }\r\n\r\n      if (sel.kind === \"box\") {\r\n        rowCounter += 1;\r\n        currentSplit += 1;\r\n      } else if (sel.kind === \"group\") {\r\n        if (rowCounter + sel.options.length > maxRowLength) {\r\n          rowSplits.push(currentSplit);\r\n          rowCounter = sel.options.length;\r\n          currentSplit = 1;\r\n        } else {\r\n          rowCounter += sel.options.length;\r\n          currentSplit += 1;\r\n        }\r\n      }\r\n\r\n      if (category.selectables.indexOf(sel) === (category.selectables.length - 1) && currentSplit !== 0) {\r\n        rowSplits.push(currentSplit);\r\n      }\r\n    }\r\n    return rowSplits;\r\n  }\r\n\r\n  // extracts group identifiers and corresponding values for ngModel application\r\n  extractGroups(categories: M.Category[]): Map<string, string> {\r\n    const groupValues: Map<string, string> = new Map();\r\n    for (const category of categories) {\r\n      for (const sel of category.selectables) {\r\n        if (sel.kind === \"group\") {\r\n          console.log(sel.name, sel.value);\r\n          groupValues.set(sel.name, sel.value);\r\n        }\r\n      }\r\n    }\r\n    return groupValues;\r\n  }\r\n\r\n  makeText(parts: M.TopLevel[]) {\r\n    const [suppressedNormal, suppressedJudgement] = G.getSuppressedConditionalIds(parts);\r\n    const normalExtractor: M.TextExtractor = G.normalExtractor();\r\n    const judgementExtractor: M.TextExtractor = G.judgementExtractor();\r\n\r\n    const report = G.makeText(parts, normalExtractor, suppressedNormal);\r\n    const judgement = G.makeText(parts, judgementExtractor, suppressedJudgement);\r\n\r\n    return [report, judgement];\r\n  }\r\n\r\n  makeNormal(parts: M.TopLevel[]) {\r\n    for (const p of parts) {\r\n      if (p.kind === \"category\") {\r\n        G.makeNormalCategory(p);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport {Router} from \"@angular/router\";\r\n\r\nconst NAVBAR_HEADER_TOGGLE_1 = \"main\";\r\nconst NAVBAR_HEADER_TOGGLE_2 = \"login\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class DisplayService {\r\n\r\n  // TODO: Do something with layouts so all possible layouts are contained in a list, perhaps dropdown menu\r\n\r\n  public displayHeader: boolean;\r\n\r\n  constructor(private router: Router) {\r\n    this.displayHeader = true;\r\n  }\r\n\r\n  public updateDisplay() {\r\n    this.displayHeader = !(this.router.url.includes(NAVBAR_HEADER_TOGGLE_1) ||\r\n      this.router.url.includes(NAVBAR_HEADER_TOGGLE_2));\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class FilesSortingService {\r\n\r\n  identifier: RegExp;\r\n\r\n  constructor() {\r\n    this.identifier = new RegExp(\"thisShouldNotMatchAnything\");\r\n  }\r\n\r\n  setIdentifier(id: string) {\r\n    // TODO: Currently only string + n integers possible, make more options available\r\n    const nIntegers = (id.split(\"*\").length - 1);\r\n    const preString = id.split(\"*\").join(\"\");\r\n    this.identifier = new RegExp(\"^\" + preString + \"\\\\d{\" + nIntegers + \"}\" + \"\\\\D\");\r\n  }\r\n\r\n  // searches for the identifier in filenames and returns boolean value based on if a match is found or not\r\n  identifierSearch(files: File[]): boolean[]  {\r\n    return files.map((file: File) => this.identifier.test(file.name));\r\n  }\r\n\r\n  fileMatchSearch(baseFiles: File[], checkFiles: File[]): boolean[] {\r\n    return checkFiles.map((file: File) => baseFiles.some((baseFile: File) => {\r\n      const match = baseFile.name.match(this.identifier);\r\n      if (match !== undefined) {\r\n        const id = match[0];\r\n        return file.name.includes(id);\r\n      } else {\r\n        return false;\r\n      }\r\n    }));\r\n  }\r\n\r\n  getFileTuples(baseFiles: File[], checkFiles1?: File[], checkFiles2?: File[]): [File, File, File][] {\r\n    if (checkFiles1 === undefined) {\r\n      checkFiles1 = [];\r\n    }\r\n    if (checkFiles2 === undefined) {\r\n      checkFiles2 = [];\r\n    }\r\n    const result: [File, File, File][] = [];\r\n\r\n    for (const baseFile of baseFiles) {\r\n      const match = baseFile.name.match(this.identifier);\r\n      if (match !== undefined) {\r\n        const id = match[0];\r\n        const checkFile1 = checkFiles1.find(file => file.name.includes(id));\r\n        const checkFile2 = checkFiles2.find(file => file.name.includes(id));\r\n        result.push([baseFile, checkFile1, checkFile2]);\r\n        // TODO: Maybe add removal of already pushed files\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { levenshtein } from \"../../helpers/util\";\r\nimport { getAllIndexOf } from \"../../helpers/util\";\r\n\r\nimport * as M from \"../../models/templateModel\";\r\nimport {KeyVariable, KeySelectable} from \"../../models/keyword\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class InputParserService {\r\n\r\n  selectableKeywords: KeySelectable[] = [];\r\n  variableKeywords: KeyVariable[] = [];\r\n  varKeyDictionary: Map<string, KeyVariable[]>;\r\n\r\n  lastKeyword: KeySelectable;  // input buffer for last spoken keyword\r\n\r\n  foundKeywords: KeySelectable[] = [];\r\n  foundVariables: Map<string, KeyVariable[]> = new Map<string, KeyVariable[]>();\r\n\r\n  primaryDictionary: Set<string>;\r\n\r\n  constructor() {}\r\n\r\n  init(rootEl: M.TopLevel[]): void {\r\n    this.varKeyDictionary = new Map<string, KeyVariable[]>();\r\n    this.initializeKeywords(rootEl);\r\n    this.initializeDictionary();\r\n  }\r\n\r\n  autocorrect(inputString: string): string {\r\n    const possibleWords: string[] = Array.from(this.primaryDictionary);\r\n    const inputSplit = inputString.split(\" \");\r\n    inputSplit.forEach((word, idx) => {\r\n      const distances: number[] = possibleWords.map((possibleWord) =>\r\n        levenshtein(word.toLowerCase(), possibleWord.toLocaleLowerCase()));\r\n      if (!distances.includes(0)) {\r\n        if (word.length >= 3 && word.length < 8) {\r\n          if (distances.includes(1)) {\r\n            const replacement = distances.indexOf(1);\r\n            inputSplit[idx] = possibleWords[replacement];\r\n          }\r\n        } else if (word.length >= 8) {\r\n          if (distances.includes(1)) {\r\n            const replacement = distances.indexOf(1);\r\n            inputSplit[idx] = possibleWords[replacement];\r\n          } else if (distances.includes(2)) {\r\n            const replacement = distances.indexOf(2);\r\n            inputSplit[idx] = possibleWords[replacement];\r\n          }\r\n        }\r\n      }\r\n    });\r\n    return inputSplit.join(\" \");\r\n  }\r\n\r\n  // Takes list of Selectables from a category and converts their variables into Keywords and adds them to the varKeyDict\r\n  extractVariableKeywords(selectables: M.Selectable[], category: string): void {\r\n    let varKeys: KeyVariable[];\r\n    let id: string;\r\n    for (const sel of selectables) {\r\n      if (sel.kind === \"box\") {\r\n        id = category + sel.name;\r\n        varKeys = this.getVariableKeywords(sel.variables, category, sel.name);\r\n        if (varKeys.length > 0) {\r\n          this.varKeyDictionary.set(id, varKeys);\r\n        }\r\n      } else if (sel.kind === \"group\") {\r\n        for (const option of sel.options) {\r\n          id = category + option.name;\r\n          varKeys = this.getVariableKeywords(option.variables, category, option.name);\r\n          if (varKeys.length > 0) {\r\n            this.varKeyDictionary.set(id, varKeys);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Takes list of variables and generates Keyword Variables list\r\n  getVariableKeywords(variables: M.Variable[], category: string, selectable: string): KeyVariable[] {\r\n    const varKeys: KeyVariable[] = [];\r\n    for (const variable of variables) {\r\n      if (variable.kind === \"oc\" || variable.kind === \"mc\") {\r\n        for (let i = 0; i < variable.values.length; i++) {\r\n          let name: string;\r\n          if (variable.kind === \"mc\") {\r\n            name = variable.values[i][0];\r\n          } else {\r\n            name = variable.values[i];\r\n          }\r\n          for (const key of variable.keys[i]) {\r\n            varKeys.push({\r\n              category,\r\n              selectable,\r\n              id: variable.id,\r\n              kind: variable.kind,\r\n              name,\r\n              synonym: key,\r\n              textBefore: variable.textBefore,\r\n              textAfter: variable.textAfter,\r\n              position: -1,\r\n              active: false\r\n              });\r\n          }\r\n        }\r\n      } else {\r\n        varKeys.push({\r\n          category,\r\n          selectable,\r\n          id: variable.id,\r\n          kind: variable.kind,\r\n          textBefore: variable.textBefore,\r\n          textAfter: variable.textAfter,\r\n          position: -1,\r\n          active: false\r\n        });\r\n      }\r\n    }\r\n\r\n    return varKeys;\r\n  }\r\n\r\n  // Finds all KeySelectables in an input string\r\n  findKeywords(input: string) {\r\n    let foundKeywordsTemp: KeySelectable[] = [];\r\n    for (const keyword of this.selectableKeywords) {\r\n      const positions: number[] = getAllIndexOf(keyword.synonym, input, false);\r\n      if (positions.length >= 1) {\r\n        for (const pos of positions) {\r\n          const keywordWithPos: KeySelectable = JSON.parse(JSON.stringify(keyword));\r\n          keywordWithPos.position = pos;\r\n          foundKeywordsTemp.push(keywordWithPos);\r\n        }\r\n      }\r\n    }\r\n    foundKeywordsTemp = this.filterOverlap(foundKeywordsTemp);\r\n    foundKeywordsTemp.sort(this.compareKeywords);\r\n    this.foundKeywords = foundKeywordsTemp;\r\n  }\r\n\r\n  findVariableKeywords(input: string, keySel: KeySelectable, relativePosition: number) {\r\n    const id: string = keySel.category + keySel.synonym;\r\n    const foundVariablesTemp: KeyVariable[] = [];\r\n    const possibleVariables = this.varKeyDictionary.get(id);\r\n    for (const varKey of possibleVariables) {\r\n      if (varKey.kind === \"oc\" || varKey.kind === \"mc\") {\r\n        const positions: number[] = getAllIndexOf(varKey.synonym, input, false);\r\n        if (positions.length >= 1) {\r\n          for (const pos of positions) {\r\n            const varKeyWithPos: KeyVariable = JSON.parse(JSON.stringify(varKey));\r\n            varKeyWithPos.position = pos + relativePosition;\r\n            foundVariablesTemp.push(varKeyWithPos);\r\n          }\r\n        }\r\n      } else if (varKey.kind === \"text\" || varKey.kind === \"number\") {\r\n        if (varKey.textAfter.length > 0) {\r\n          const posVar = input.indexOf(varKey.textBefore);\r\n          const posValueStart = posVar + varKey.textBefore.length;\r\n          const posValueEnd = input.indexOf(varKey.textAfter);\r\n          const value = input.substring(posValueStart, posValueEnd).trim();\r\n\r\n        }\r\n      } else if (varKey.kind === \"ratio\") {\r\n\r\n      } else if (varKey.kind === \"date\") {\r\n\r\n      }\r\n    }\r\n    foundVariablesTemp.sort(this.compareKeywords);\r\n    this.varKeyDictionary.set(id, foundVariablesTemp);\r\n  }\r\n\r\n  // Removes all synonyms/keywords that are substrings of another synonym/keyword\r\n  filterOverlap(foundKeywords: KeySelectable[]): KeySelectable[] {\r\n    // filters out keyword synonyms that are substrings of another keyword\r\n    const fKCopy = JSON.parse(JSON.stringify(foundKeywords));\r\n    let toRemove: KeySelectable[] = [];\r\n    for (const keyword of fKCopy) {\r\n      const overlap: KeySelectable[] = fKCopy.filter((kw) =>\r\n        keyword.synonym !== kw.synonym &&\r\n        keyword.position <= kw.position &&\r\n        kw.position < (keyword.position + keyword.synonym.length));\r\n      toRemove = toRemove.concat(overlap);\r\n    }\r\n    for (const removable of toRemove) {\r\n      fKCopy.splice(fKCopy.indexOf(removable), 1);\r\n    }\r\n    return fKCopy;\r\n  }\r\n\r\n  // sorts keywords based on their position in the input string\r\n  compareKeywords(arg1: KeySelectable | KeyVariable, arg2: KeySelectable | KeyVariable): number {\r\n    if (arg1.position > arg2.position) {\r\n      return 1;\r\n    } else if (arg1.position < arg2.position) {\r\n      return -1;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  splitInputFromKeywords(input: string): string[][] {\r\n    const result: string[] = [];\r\n    const resultWithoutKeywords: string[] = [];\r\n    let lastPosition = 0;\r\n    let tempString: string;\r\n    for (const keyword of this.foundKeywords) {\r\n      if (keyword.position > lastPosition) {\r\n        tempString = input.substring(lastPosition, keyword.position).trim();\r\n        if (tempString.length > 0) {\r\n          result.push(tempString);\r\n          resultWithoutKeywords.push(tempString);\r\n        }\r\n      }\r\n      tempString = input.substring(keyword.position, keyword.position + keyword.synonym.length).trim();\r\n      if (tempString.length > 0) {\r\n        result.push(tempString);\r\n      }\r\n      lastPosition = keyword.position + keyword.synonym.length;\r\n    }\r\n    return [result, resultWithoutKeywords];\r\n  }\r\n\r\n  private initializeKeywords(rootEl: M.TopLevel[]): void {\r\n    let selKeys: KeySelectable[] = [];\r\n    for (const el of rootEl) {\r\n      if (el.kind === \"category\") {\r\n        const tempSelectables: KeySelectable[] = this.getSelectableKeywords(el.selectables, el.name);\r\n        selKeys = selKeys.concat(tempSelectables);\r\n        this.extractVariableKeywords(el.selectables, el.name);\r\n      }\r\n    }\r\n    this.selectableKeywords = selKeys;\r\n  }\r\n\r\n  private initializeDictionary(): void {\r\n    this.primaryDictionary = new Set<string>();\r\n    this.primaryDictionary.add(\"Rest\");\r\n    this.primaryDictionary.add(\"normal\");\r\n    for (const selKey of this.selectableKeywords) {\r\n      const split: string[] = selKey.synonym.split(\" \");\r\n      split.forEach((word) => this.primaryDictionary.add(word));\r\n    }\r\n    for (const varKey of this.variableKeywords) {\r\n      if (varKey.synonym) {\r\n        const split: string[] = varKey.synonym.split(\" \");\r\n        split.forEach((word) => this.primaryDictionary.add(word));\r\n      }\r\n      if (varKey.textAfter) {\r\n        const split: string[] = varKey.textAfter.split(\" \");\r\n        split.forEach((word) => this.primaryDictionary.add(word));\r\n      }\r\n      if (varKey.textBefore) {\r\n        const split: string[] = varKey.textBefore.split(\" \");\r\n        split.forEach((word) => this.primaryDictionary.add(word));\r\n      }\r\n    }\r\n  }\r\n\r\n  // Creates list of Keywords for Selectables from Selectables of category\r\n  private getSelectableKeywords(selectables: M.Selectable[], category: string): KeySelectable[] {\r\n    const selKeys: KeySelectable[] = [];\r\n    for (const sel of selectables) {\r\n      if (sel.kind === \"box\") {\r\n        for (const synonym of sel.keys) {\r\n          selKeys.push({\r\n            name: sel.name,\r\n            synonym,\r\n            category,\r\n            position: -1,\r\n            active: false\r\n          });\r\n        }\r\n      } else if (sel.kind === \"group\") {\r\n        for (const option of sel.options) {\r\n          for (const synonym of option.keys) {\r\n            selKeys.push({\r\n              name: option.name,\r\n              synonym,\r\n              category,\r\n              group: sel.name,\r\n              position: -1,\r\n              active: false\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return selKeys;\r\n  }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport {MatDialogConfig} from \"@angular/material/dialog\";\r\nimport {ConfirmDialogModel} from \"../../shared/confirm-dialog/confirm-dialog.component\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\"\r\n})\r\nexport class MatDialogService {\r\n\r\n  constructor() { }\r\n\r\n  defaultConfig(width?: string, data?: ConfirmDialogModel): MatDialogConfig {\r\n    const dialogConfig = new MatDialogConfig();\r\n\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.autoFocus = true;\r\n    dialogConfig.hasBackdrop = true;\r\n\r\n    if(width !== undefined) {\r\n      dialogConfig.width = width;\r\n    }\r\n\r\n    if(data !== undefined) {\r\n      dialogConfig.data = data;\r\n    }\r\n\r\n    return dialogConfig;\r\n  }\r\n}\r\n","import { ComponentPortal, DomPortalOutlet, PortalInjector } from \"@angular/cdk/portal\";\r\nimport { ApplicationRef, ComponentFactoryResolver, ComponentRef, Injectable, Injector } from \"@angular/core\";\r\n\r\nimport {POPOUT_MODAL_DATA, POPOUT_MODALS} from \"./popout.tokens\";\r\nimport { ImageDisplayComponent } from \"@app/shared\";\r\n\r\n\r\n@Injectable()\r\nexport class PopoutService {\r\n  styleSheetElement;\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private applicationRef: ApplicationRef\r\n  ) {\r\n  }\r\n\r\n  openPopoutModal(data) {\r\n    const windowInstance = this.openOnce(\r\n      \"assets/modal/popout.html\",\r\n      \"MODAL_POPOUT\"\r\n    );\r\n\r\n    // Wait for window instance to be created\r\n    setTimeout(() => {\r\n      this.createCDKPortal(data, windowInstance);\r\n    }, 1000);\r\n  }\r\n\r\n  openOnce(url, target) {\r\n    // Open a blank \"target\" window\r\n    // or get the reference to the existing \"target\" window\r\n    const winRef = window.open(\"\", target, \"\", true);\r\n    // If the \"target\" window was just opened, change its url\r\n    if (winRef.location.href === \"about:blank\") {\r\n      winRef.location.href = url;\r\n    }\r\n    return winRef;\r\n  }\r\n\r\n  createCDKPortal(data, windowInstance) {\r\n    if (windowInstance) {\r\n      // Create a PortalOutlet with the body of the new window document\r\n      const outlet = new DomPortalOutlet(windowInstance.document.body,\r\n        this.componentFactoryResolver, this.applicationRef, this.injector);\r\n\r\n      // Copy stylesheet link from parent window\r\n      this.styleSheetElement = this.getStyleSheetElement();\r\n      windowInstance.document.head.appendChild(this.styleSheetElement);\r\n\r\n      this.styleSheetElement.onload = () => {\r\n        // Clear popout modal content\r\n        windowInstance.document.body.innerText = \"\";\r\n        // Create an injector with modal data\r\n        const injector = this.createInjector(data);\r\n        // Attach the portal\r\n        windowInstance.document.title = \"Image Display\";\r\n        const componentInstance = this.attachContainer(outlet, injector);\r\n\r\n        POPOUT_MODALS[\"windowInstance\"] = windowInstance;\r\n        POPOUT_MODALS[\"outlet\"] = outlet;\r\n        POPOUT_MODALS[\"componentInstance\"] = componentInstance;\r\n      };\r\n    }\r\n  }\r\n\r\n  isPopoutWindowOpen() {\r\n    return POPOUT_MODALS[\"windowInstance\"] && !POPOUT_MODALS[\"windowInstance\"].closed;\r\n  }\r\n\r\n  focusPopoutWindow() {\r\n    POPOUT_MODALS[\"windowInstance\"].focus();\r\n  }\r\n\r\n  closePopoutModal() {\r\n    if (POPOUT_MODALS[\"windowInstance\"]) {\r\n      POPOUT_MODALS[\"windowInstance\"].close();\r\n    }\r\n  }\r\n\r\n  attachContainer(outlet, injector) {\r\n    const containerPortal = new ComponentPortal(ImageDisplayComponent, null, injector);\r\n    const containerRef: ComponentRef<ImageDisplayComponent> = outlet.attach(containerPortal);\r\n    return containerRef.instance;\r\n  }\r\n\r\n  createInjector(data): PortalInjector {\r\n    const injectionTokens = new WeakMap();\r\n    injectionTokens.set(POPOUT_MODAL_DATA, data);\r\n    return new PortalInjector(this.injector, injectionTokens);\r\n  }\r\n\r\n  getStyleSheetElement() {\r\n    const styleSheetElement = document.createElement(\"link\");\r\n    document.querySelectorAll(\"link\").forEach(htmlElement => {\r\n      if (htmlElement.rel === \"stylesheet\") {\r\n        const absoluteUrl = new URL(htmlElement.href).href;\r\n        styleSheetElement.rel = \"stylesheet\";\r\n        styleSheetElement.href = absoluteUrl;\r\n      }\r\n    });\r\n    return styleSheetElement;\r\n  }\r\n}\r\n","import { InjectionToken } from \"@angular/core\";\r\nimport {BoundingBox, Image} from \"@app/models\";\r\n\r\nexport interface PopoutData {\r\n  scans: {\r\n    id: string;\r\n    mainScan: Image;\r\n    lateralScan?: Image;\r\n    preScan?: Image;\r\n  };\r\n  coordinates: {\r\n    main: BoundingBox[];\r\n    lateral: BoundingBox[];\r\n    pre: BoundingBox[];\r\n  };\r\n  restricted?: boolean;\r\n}\r\n\r\nexport const POPOUT_MODAL_DATA = new InjectionToken<PopoutData>(\"POPOUT_MODAL_DATA\");\r\n\r\nexport const POPOUT_MODALS = {\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\n\r\nimport { environment } from \"../../../environments/environment\";\r\nimport { User } from \"../../models/user\";\r\n\r\n@Injectable({ providedIn: \"root\" })\r\nexport class UserService {\r\n  constructor(private http: HttpClient) { }\r\n\r\n  getAll() {\r\n    return this.http.get<User[]>(`${environment.backend}/users`);\r\n  }\r\n\r\n  getById(id: number) {\r\n    return this.http.get<User>(`${environment.backend}/users/${id}`);\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-account-management',\r\n  templateUrl: './account-management.component.html',\r\n  styleUrls: ['./account-management.component.css']\r\n})\r\nexport class AccountManagementComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>account-management works!</p>\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\n\r\nimport { SharedModule } from \"@app/shared/shared.module\";\r\n\r\nimport { JudgeMatComponent } from \"@app/feature/judge-mat/judge-mat.component\";\r\nimport { ListComponent } from \"@app/feature/list/list.component\";\r\nimport { ListMaterialComponent } from \"@app/feature/list-material/list-material.component\";\r\nimport { UiBaseComponent } from \"@app/feature/ui-base/ui-base.component\";\r\nimport { AccountManagementComponent } from \"./account-management/account-management.component\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    JudgeMatComponent,\r\n    ListComponent,\r\n    ListMaterialComponent,\r\n    UiBaseComponent,\r\n    AccountManagementComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    NgbModule,\r\n    FormsModule,\r\n    SharedModule\r\n  ],\r\n  exports: [\r\n    JudgeMatComponent,\r\n    ListComponent,\r\n    ListMaterialComponent,\r\n    UiBaseComponent,\r\n    AccountManagementComponent\r\n  ]\r\n})\r\nexport class FeatureModule { }\r\n","export * from \"./judge-mat/judge-mat.component\";\r\nexport * from \"./list/list.component\";\r\nexport * from \"./list-material/list-material.component\";\r\nexport * from \"./ui-base/ui-base.component\";\r\nexport * from \"./account-management/account-management.component\";\r\n","import {Component, HostListener, OnDestroy, OnInit} from \"@angular/core\";\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\n\r\nimport * as M from \"@app/models/templateModel\";\r\nimport {Material, Role, User} from \"@app/models\";\r\nimport {\r\n  DataParserService,\r\n  PopoutService,\r\n  POPOUT_MODALS,\r\n  PopoutData,\r\n  BackendCallerService,\r\n  AuthenticationService\r\n} from \"@app/core\";\r\n\r\n@Component({\r\n  selector: \"app-judge-mat\",\r\n  templateUrl: \"./judge-mat.component.html\",\r\n  styleUrls: [\"./judge-mat.component.scss\"]\r\n})\r\nexport class JudgeMatComponent implements OnInit, OnDestroy {\r\n\r\n  material: Material;\r\n  categories: M.Category[];\r\n  report = \"\";\r\n  judgement = \"\";\r\n\r\n  private user: User;\r\n\r\n  constructor(private backendCaller: BackendCallerService,\r\n              private route: ActivatedRoute,\r\n              private router: Router,\r\n              private dataParser: DataParserService,\r\n              private popoutService: PopoutService,\r\n              private authenticationService: AuthenticationService) { }\r\n\r\n  @HostListener(\"window:beforeunload\", [\"$event\"])\r\n  onWindowClose(event: Event) {\r\n    this.popoutService.closePopoutModal();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n    this.getData();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.popoutService.closePopoutModal();\r\n  }\r\n\r\n  getData() {\r\n    this.route.paramMap.subscribe(ps => {\r\n      if (ps.has(\"id\")) {\r\n        const matID = ps.get(\"id\");\r\n        this.backendCaller.getMaterialById(matID).subscribe((material: Material) => {\r\n          if (material === undefined) {\r\n            window.alert(\"Der Eintrag mit dieser ID existiert nicht! \" +\r\n              \"Bitte zur Aufnahmenliste zurückkehren und eines der dort aufgeführten Aufnahmen auswählen.\");\r\n          } else {\r\n            this.material = material;\r\n            this.categories = this.dataParser.extractCategories(this.material.template.parts, false);\r\n            this.openImagePopout();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  updateText(): void {\r\n    [this.report, this.judgement] = this.dataParser.makeText(this.material.template.parts);\r\n  }\r\n\r\n  resetText(): void {\r\n    this.report = \"\";\r\n    this.judgement = \"\";\r\n  }\r\n\r\n  onClick() {\r\n    setTimeout(() => this.updateText(), 1);\r\n  }\r\n\r\n  makeNormal() {\r\n    this.dataParser.makeNormal(this.material.template.parts);\r\n    this.updateText();\r\n    console.log(POPOUT_MODALS[\"componentInstance\"]);\r\n  }\r\n\r\n  submit() {\r\n    this.backendCaller.updateMaterial(this.material).subscribe(res => {\r\n      window.alert(res.message);\r\n      this.router.navigateByUrl(\"/listMat\");\r\n    });\r\n  }\r\n\r\n  openImagePopout() {\r\n    const restricted = !(this.user.role === Role.Admin || this.user.role === Role.Moderator);\r\n    const modalData: PopoutData = {\r\n      scans: this.material.scans,\r\n      coordinates: this.material.coordinates,\r\n      restricted\r\n    };\r\n    this.popoutService.openPopoutModal(modalData);\r\n  }\r\n\r\n}\r\n","<div class=\"main\">\r\n  <div class=\"header\">\r\n    <div class=\"buttons\">\r\n      <button id=\"back\" title=\"Go back to list\"\r\n              [routerLink]=\"['/', 'listMat']\"\r\n              class=\"btn btn-outline-secondary\">Zurück</button>\r\n      <button id=\"open-images\"\r\n              (click)=\"openImagePopout()\"\r\n              class=\"btn btn-outline-secondary\">Bilder anzeigen</button>\r\n      <button id=\"normal-button\"\r\n              (click)=\"makeNormal()\"\r\n              class=\"btn btn-outline-secondary\">Rest normal</button>\r\n      <button id=\"submit\" title=\"Änderungen speichern\"\r\n              (click)=\"submit()\"\r\n              class=\"btn btn-outline-primary\">Speichern</button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"content\" *ngIf=\"categories\">\r\n    <app-report class=\"report\" [report]=\"report\" [judgement]=\"judgement\"></app-report>\r\n    <app-options class=\"options\" (clickEvent)=\"onClick()\" [categories]=\"categories\"></app-options>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport {Router} from \"@angular/router\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\n\r\nimport {environment} from \"@env/environment\";\r\nimport {BoundingBox, Material} from \"@app/models\";\r\nimport {BackendCallerService, MatDialogService} from \"@app/core\";\r\nimport {UploadMaterialComponent, ConfirmDialogComponent, ConfirmDialogModel} from \"@app/shared\";\r\n\r\n@Component({\r\n  selector: \"app-display-material\",\r\n  templateUrl: \"./list-material.component.html\",\r\n  styleUrls: [\"./list-material.component.scss\"]\r\n})\r\nexport class ListMaterialComponent implements OnInit {\r\n\r\n  imageUrl = environment.backend + \"images/\";\r\n  materials: Material[] = [];\r\n  query: Record<string, unknown>;\r\n\r\n  constructor(private backendCaller: BackendCallerService,\r\n              private router: Router,\r\n              private dialogService: MatDialogService,\r\n              private dialog: MatDialog) { }\r\n\r\n  ngOnInit(): void {\r\n    this.query = {\r\n      judged: false\r\n    };\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    this.backendCaller.queryMaterials(this.query).subscribe((mats: Material[]) => {\r\n      this.materials = mats;\r\n    });\r\n  }\r\n\r\n  reload() {\r\n    this.getData();\r\n  }\r\n\r\n  changeQuery(newValue: boolean) {\r\n    this.query = {\r\n      judged: newValue\r\n    };\r\n    this.getData();\r\n  }\r\n\r\n  checkBoxes(coordinates: Record<string, BoundingBox[]>): string {\r\n    const res: string[] = [];\r\n    if (coordinates.main.length > 0) {\r\n      res.push(\"Hauptaufnahme\");\r\n    }\r\n    if (coordinates.lateral.length > 0) {\r\n      res.push(\"Lateralaufnahme\");\r\n    }\r\n    if (coordinates.pre.length > 0) {\r\n      res.push(\"Voraufnahme\");\r\n    }\r\n\r\n    if (res.length > 0) {\r\n      return res.join(\", \");\r\n    } else {\r\n      return \"Keiner Aufnahme\";\r\n    }\r\n\r\n  }\r\n\r\n  delete(objectID: string, scanID: string) {\r\n    const dialogData = new ConfirmDialogModel(\r\n      \"warning\",\r\n      \"Entfernen bestätigen\",\r\n      \"Möchten Sie diesen Eintrag wirklich entfernen?\");\r\n\r\n    const dialogConfig = this.dialogService.defaultConfig(\"400px\", dialogData);\r\n    dialogConfig.position = { top: \"50px\" };\r\n\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(dialogResult => {\r\n      if (dialogResult) {\r\n        this.backendCaller.deleteMaterial(objectID, scanID).subscribe(res => {\r\n          window.alert(\"Eintrag erfolgreich gelöscht.\");\r\n          this.getData();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  openEditor(matID: string) {\r\n    this.router.navigate([\"/\", \"mainMat\", matID]).then();\r\n  }\r\n\r\n  openUploadDialog() {\r\n    const dialogConfig = this.dialogService.defaultConfig(\"600px\");\r\n    const dialogRef = this.dialog.open(UploadMaterialComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(() => {\r\n      this.reload();\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"main\">\r\n\r\n  <h4>Aufnahme zum Befunden auswählen</h4>\r\n\r\n  <div class=\"row\">\r\n    <div ngbDropdown class=\"d-inline-block\">\r\n      <button class=\"btn btn-outline-primary\" style=\"margin-right: 10px;\" id=\"dropdownBasic1\" ngbDropdownToggle>Bereits bearbeitete Einträge anzeigen</button>\r\n      <div ngbDropdownMenu aria-labelledby=\"dropdownBasic1\">\r\n        <button ngbDropdownItem (click)=\"changeQuery(true)\">Ja</button>\r\n        <button ngbDropdownItem (click)=\"changeQuery(false)\">Nein</button>\r\n      </div>\r\n      <button class=\"btn btn-outline-secondary\" (click)=\"reload()\" id=\"reloadButton\">Aufnahmen neu Laden</button>\r\n      <button class=\"btn btn-outline-primary\" style=\"float: right;\"\r\n              id=\"uploadButton\" (click)=\"openUploadDialog()\">Aufnahmen hochladen</button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"tableDiv\" *ngIf=\"this.materials.length > 0; else noEntry\">\r\n    <table class=\"listMatTable\">\r\n      <tr>\r\n        <th class=\"body\">Frontalaufnahme</th>\r\n        <th class=\"body\">Lateralaufnahme</th>\r\n        <th class=\"body\">Voraufnahme</th>\r\n        <th class=\"meta\">Metadaten</th>\r\n      </tr>\r\n      <tr *ngFor=\"let material of this.materials\">\r\n        <td class=\"img\">\r\n          <img src=\"{{imageUrl}}{{material.scans.id}}/{{material.scans.mainScan.filename}}\"\r\n                             width=\"300px\"\r\n                             alt=\"Fehler beim Laden der Aufnahme\"\r\n          (click)=\"openEditor(material._id)\"/>\r\n          <span>{{material.scans.mainScan.filename}}</span>\r\n        </td>\r\n        <td class=\"img\">\r\n          <ng-container *ngIf=\"material.scans.lateralScan !== undefined; else noScan\">\r\n            <img src=\"{{imageUrl}}{{material.scans.id}}/{{material.scans.lateralScan.filename}}\"\r\n                               width=\"300px\"\r\n                               alt=\"Fehler beim Laden der Aufnahme\"\r\n                               (click)=\"openEditor(material._id)\"/>\r\n            <span>{{material.scans.lateralScan.filename}}</span>\r\n          </ng-container>\r\n        </td>\r\n        <td class=\"img\">\r\n          <ng-container *ngIf=\"material.scans.preScan !== undefined; else noScan\">\r\n\r\n            <img src=\"{{imageUrl}}{{material.scans.id}}/{{material.scans.preScan.filename}}\"\r\n                               width=\"300px\"\r\n                               alt=\"Fehler beim Laden der Aufnahme\"\r\n                               (click)=\"openEditor(material._id)\"/>\r\n            <span>{{material.scans.preScan.filename}}</span>\r\n          </ng-container>\r\n        </td>\r\n        <td class=\"meta\">\r\n          <table class=\"metatable\">\r\n            <tr>\r\n              <td class=\"metadata\">Modalität:</td>\r\n              <td class=\"metadata\">{{material.modality}}</td>\r\n            </tr>\r\n            <tr>\r\n              <td class=\"metadata\">Template:</td>\r\n              <td class=\"metadata\">{{material.template.name}}</td>\r\n            </tr>\r\n            <tr>\r\n              <td class=\"metadata\">Boxen vorhanden in:</td>\r\n              <td class=\"metadata\">{{checkBoxes(material.coordinates)}}</td>\r\n            </tr>\r\n          </table>\r\n              <button class=\"btn btn-outline-primary custom-button\"\r\n                        (click)=\"openEditor(material._id)\">Start Befundung</button>\r\n          <button class=\"btn btn-danger custom-button\" (click)=\"delete(material._id, material.scans.id)\">Entfernen</button>\r\n        </td>\r\n      </tr>\r\n\r\n    </table>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #noEntry>\r\n  <div style=\"padding: 10px;\">\r\n    Keine Einträge gefunden.\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #noScan><td class=\"text\">Keine Aufnahme vorhanden</td></ng-template>\r\n\r\n\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { MatDialog } from \"@angular/material/dialog\";\r\nimport { ConfirmDialogComponent, ConfirmDialogModel } from \"@app/shared/confirm-dialog/confirm-dialog.component\";\r\n\r\nimport {BackendCallerService, MatDialogService, AuthenticationService} from \"@app/core\";\r\nimport {Template} from \"@app/models\";\r\nimport {UploadComponent} from \"@app/shared\";\r\nimport {Role, User} from \"@app/models\";\r\n\r\n\r\n@Component({\r\n  selector: \"app-list\",\r\n  templateUrl: \"./list.component.html\",\r\n  styleUrls: [\"./list.component.scss\"]\r\n})\r\nexport class ListComponent implements OnInit {\r\n\r\n  templates: Template[] = [];\r\n  isLoading: boolean;\r\n\r\n  private user: User;\r\n\r\n  constructor(private dialog: MatDialog,\r\n              private backendCaller: BackendCallerService,\r\n              private dialogService: MatDialogService,\r\n              private authenticationService: AuthenticationService\r\n  ) { }\r\n\r\n  get isMod() {\r\n    return this.user && (this.user.role === Role.Admin || this.user.role === Role.Moderator);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n    this.isLoading = true;\r\n    this.update();\r\n  }\r\n\r\n  update(): void {\r\n    this.backendCaller.getTemplateList().subscribe((templates) => {\r\n      this.templates = templates;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  removeAlert(id: string, name: string) {\r\n    const dialogData = new ConfirmDialogModel(\r\n      \"warning\",\r\n      \"Entfernen bestätigen\",\r\n      \"Möchten Sie die Schablone '\" + name + \"' wirklich entfernen?\");\r\n\r\n    const dialogConfig = this.dialogService.defaultConfig(\"400px\", dialogData);\r\n    dialogConfig.position = { top: \"50px\" };\r\n\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(dialogResult => {\r\n      if (dialogResult) {\r\n        this.remove(id);\r\n      }\r\n    });\r\n  }\r\n\r\n  remove(id: string): void {\r\n    this.backendCaller.deleteTemplate(id).subscribe(res => {\r\n      this.update();\r\n    });\r\n  }\r\n\r\n  displayDate(date: string | Date): string {\r\n    if (typeof(date) === \"string\") {\r\n      date = new Date(date);\r\n    }\r\n    return date.getDate() + \".\" + date.getMonth() + \".\" + date.getFullYear();\r\n  }\r\n\r\n  openUploadDialog() {\r\n    const dialogConfig = this.dialogService.defaultConfig(\"470px\");\r\n    const dialogRef = this.dialog.open(UploadComponent, dialogConfig);\r\n\r\n    dialogRef.afterClosed().subscribe(() => {\r\n      this.update();\r\n    });\r\n  }\r\n}\r\n","<div class=\"main\">\r\n\r\n  <div>\r\n    <h4>Schablone wählen</h4>\r\n    <table  class=\"liste\">\r\n      <tr *ngFor=\"let template of templates; let i = index\" class=\"list-row\">\r\n        <td class=\"text\"><ul><li><a style=\"text-decoration: none;\" [routerLink]=\"['/', 'main', template._id]\">{{template.name}}</a></li></ul></td>\r\n        <td class=\"text\">vom {{displayDate(template.timestamp)}}</td>\r\n        <td class=\"button\">\r\n          <button *ngIf=\"isMod\" class=\"btn btn-secondary ml-3 disabled\" [routerLink]=\"['/', 'edit', template.name]\">\r\n          Edit</button></td>\r\n        <td class=\"button\">\r\n          <button *ngIf=\"isMod\" class=\"btn btn-danger ml-3\" (click)=\"removeAlert(template._id, template.name)\">\r\n          Entfernen</button></td>\r\n      </tr>\r\n    </table>\r\n    <ng-container *ngIf=\"templates.length === 0\">\r\n      Es wurde noch nichts hochgeladen\r\n    </ng-container>\r\n  </div>\r\n\r\n  <div *ngIf=\"isMod\" class=\"buttons\">\r\n    <button class=\"btn btn-outline-primary\" (click)=\"openUploadDialog()\">Schablone hochladen</button>\r\n    <button class=\"btn btn-outline-primary disabled\">Neue Schablone erstellen</button>\r\n  </div>\r\n\r\n</div>\r\n","import {Component, OnInit, ViewChild} from \"@angular/core\";\r\nimport {ActivatedRoute} from \"@angular/router\";\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {Location} from \"@angular/common\";\r\nimport {DomSanitizer, SafeUrl} from \"@angular/platform-browser\";\r\n\r\nimport {DataParserService, BackendCallerService, InputParserService} from \"@app/core\";\r\nimport {OptionsComponent} from \"@app/shared\";\r\nimport {Template, Category, TopLevel} from \"@app/models\";\r\n\r\n@Component({\r\n  selector: \"app-workspace\",\r\n  templateUrl: \"./ui-base.component.html\",\r\n  styleUrls: [\"./ui-base.component.scss\"],\r\n})\r\n\r\nexport class UiBaseComponent implements OnInit {\r\n\r\n  @ViewChild(OptionsComponent)\r\n  private optionsComponent: OptionsComponent;\r\n\r\n  parts: TopLevel[];\r\n  defaultParts: TopLevel[];\r\n\r\n  input = \"\";\r\n  foundKeywords = \"\";\r\n\r\n  categories: Category[];\r\n  report = \"\";\r\n  judgement = \"\";\r\n\r\n  downJson: SafeUrl;\r\n\r\n  constructor(private http: HttpClient,\r\n              private route: ActivatedRoute,\r\n              private dataParser: DataParserService,\r\n              private _location: Location,\r\n              private inputParser: InputParserService,\r\n              private backendCaller: BackendCallerService,\r\n              private sanitizer: DomSanitizer) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getData();\r\n    this.foundKeywords = \"Detected keywords go here\";\r\n  }\r\n\r\n  getData() {\r\n    this.route.paramMap.subscribe(ps => {\r\n      if (ps.has(\"id\")) {\r\n        const templateID = ps.get(\"id\");\r\n        this.backendCaller.getTemplateById(templateID).subscribe((template: Template) => {\r\n          if (template === undefined) {\r\n            window.alert(\"Dieses Dictionary existiert nicht! \" +\r\n              \"Bitte auf List Seite zurückkehren und eines der dort aufgeführten Dictionaries auswählen.\");\r\n          } else {\r\n            this.parts = template.parts;\r\n            this.defaultParts = JSON.parse(JSON.stringify(this.parts));\r\n            this.categories = this.dataParser.extractCategories(this.parts, false);\r\n            this.inputParser.init(this.defaultParts);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  generateDownloadJson(jsonData) {\r\n    const json = JSON.stringify(jsonData);\r\n    this.downJson = this.sanitizer.bypassSecurityTrustUrl(\"data:text/json;charset=UTF-8,\" + encodeURIComponent(json));\r\n  }\r\n\r\n  updateText(): void {\r\n    [this.report, this.judgement] = this.dataParser.makeText(this.parts);\r\n  }\r\n\r\n  resetText(): void {\r\n    this.report = \"\";\r\n    this.judgement = \"\";\r\n  }\r\n\r\n  onClick() {\r\n    setTimeout(() => this.updateText(), 1);\r\n  }\r\n\r\n  onInput(ev) {\r\n    if (this.input[this.input.length - 1] === \" \") {\r\n      this.input = this.inputParser.autocorrect(this.input);\r\n    }\r\n    this.inputParser.findKeywords(this.input);\r\n    const [splitInput, splitReducedInput] = this.inputParser.splitInputFromKeywords(this.input);\r\n    console.log(splitInput);\r\n    console.log(splitReducedInput);\r\n  }\r\n\r\n  makeNormal() {\r\n    this.dataParser.makeNormal(this.parts);\r\n    this.updateText();\r\n  }\r\n\r\n  reset() {\r\n    this.parts = JSON.parse(JSON.stringify(this.defaultParts));\r\n    this.categories = this.dataParser.extractCategories(this.parts, false);\r\n    setTimeout(() => this.optionsComponent.initRows(), 5);\r\n    setTimeout(() => this.resetText(), 5);\r\n  }\r\n\r\n}\r\n","<div class=\"main\">\r\n  <div class=\"header\">\r\n    <div class=\"inputArea\">\r\n      <label class=\"inputLabel\" for=\"input\">Eingabe:</label>\r\n      <input class=\"inputBox\" id=\"input\" name=\"Befund\" type=\"text\" [(ngModel)]=\"this.input\"\r\n             (input)=\"onInput($event)\" placeholder=\"Befund eingeben...\">\r\n    </div>\r\n    <div class=\"buttons\">\r\n      <button id=\"normal-button\" (click)=\"makeNormal()\"\r\n              class=\"btn btn-outline-secondary\">Rest normal</button>\r\n      <button id=\"reset-button\" (click)=\"reset()\"\r\n              class=\"btn btn-outline-secondary\">Zurücksetzen</button>\r\n      <button id=\"back\" title=\"Go back to list\" [routerLink]=\"['/', 'list']\"\r\n              class=\"btn btn-outline-secondary\">Zurück</button>\r\n      <a class=\"btn btn-outline-secondary\" title=\"Download JSON\" (click)=generateDownloadJson(parts)\r\n         [href]=\"downJson\" download=\"befund.json\">Download JSON</a>\r\n    </div>\r\n\r\n    <div class=\"inputText\" id=\"inputText\" >\r\n      {{foundKeywords}}\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"content\" *ngIf=\"categories\">\r\n    <app-report class=\"report\" [report]=\"report\" [judgement]=\"judgement\"></app-report>\r\n    <app-options class=\"options\" (clickEvent)=\"onClick()\" [categories]=\"categories\"></app-options>\r\n  </div>\r\n</div>\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from \"@angular/router\";\r\n\r\nimport { AuthenticationService } from \"@app/core/services/authentication.service\";\r\n\r\n@Injectable({ providedIn: \"root\" })\r\nexport class AuthGuard implements CanActivate {\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private authenticationService: AuthenticationService\r\n  ) { }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n    const user = this.authenticationService.userValue;\r\n    if (user) {\r\n      // check if route is restricted by role\r\n      if (route.data.roles && route.data.roles.indexOf(user.role) === -1) {\r\n        // role not authorised so redirect to home page\r\n        this.router.navigate([\"/\"]).then();\r\n        return false;\r\n      }\r\n\r\n      // authorised so return true\r\n      return true;\r\n    }\r\n\r\n    // not logged in so redirect to login page with the return url\r\n    this.router.navigate([\"/login\"], { queryParams: { returnUrl: state.url } }).then();\r\n    return false;\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from \"@angular/common/http\";\r\nimport { Observable, throwError } from \"rxjs\";\r\nimport { catchError } from \"rxjs/operators\";\r\n\r\nimport { AuthenticationService } from \"@app/core/services/authentication.service\";\r\n\r\n@Injectable()\r\nexport class ErrorInterceptor implements HttpInterceptor {\r\n  constructor(private authenticationService: AuthenticationService) { }\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    return next.handle(request).pipe(catchError(err => {\r\n      if ([401, 403].indexOf(err.status) !== -1) {\r\n        // auto logout if 401 Unauthorized or 403 Forbidden response returned from api\r\n        this.authenticationService.logout();\r\n      }\r\n\r\n      const error = err.error.message || err.statusText;\r\n      return throwError(error);\r\n    }));\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpRequest, HttpResponse, HttpHandler, HttpEvent, HttpInterceptor, HTTP_INTERCEPTORS } from \"@angular/common/http\";\r\nimport { Observable, of, throwError } from \"rxjs\";\r\nimport { delay, materialize, dematerialize } from \"rxjs/operators\";\r\n\r\nimport { Role } from \"@app/models\";\r\n\r\nconst users = [\r\n  { id: 1, username: \"admin\", password: \"admin\", role: Role.Admin },\r\n  { id: 2, username: \"student\", password: \"student\", role: Role.User },\r\n  { id: 3, username: \"arzt\", password: \"arzt\", role: Role.Moderator },\r\n];\r\n\r\n@Injectable()\r\nexport class FakeBackendInterceptor implements HttpInterceptor {\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    const { url, method, headers, body } = request;\r\n\r\n    return handleRoute();\r\n\r\n    function handleRoute() {\r\n      switch (true) {\r\n        case url.endsWith(\"/users/authenticate\") && method === \"POST\":\r\n          return authenticate();\r\n        case url.endsWith(\"/users\") && method === \"GET\":\r\n          return getUsers();\r\n        case url.match(/\\/users\\/\\d+$/) && method === \"GET\":\r\n          return getUserById();\r\n        default:\r\n          // pass through any requests not handled above\r\n          return next.handle(request);\r\n      }\r\n\r\n    }\r\n\r\n    // route functions\r\n\r\n    function authenticate() {\r\n      const { username, password } = body;\r\n      const user = users.find(x => x.username === username && x.password === password);\r\n      if (!user) {\r\nreturn error(\"Username or password is incorrect\");\r\n}\r\n      return ok({\r\n        id: user.id,\r\n        username: user.username,\r\n        role: user.role,\r\n        token: `fake-jwt-token.${user.id}`\r\n      });\r\n    }\r\n\r\n    function getUsers() {\r\n      if (!isAdmin()) {\r\nreturn unauthorized();\r\n}\r\n      return ok(users);\r\n    }\r\n\r\n    function getUserById() {\r\n      if (!isLoggedIn()) {\r\nreturn unauthorized();\r\n}\r\n\r\n      // only admins can access other user records\r\n      if (!isAdmin() && currentUser().id !== idFromUrl()) {\r\nreturn unauthorized();\r\n}\r\n\r\n      const user = users.find(x => x.id === idFromUrl());\r\n      return ok(user);\r\n    }\r\n\r\n    // helper functions\r\n\r\n    function ok(body) {\r\n      return of(new HttpResponse({ status: 200, body }))\r\n        .pipe(delay(500)); // delay observable to simulate server api call\r\n    }\r\n\r\n    function unauthorized() {\r\n      return throwError({ status: 401, error: { message: \"unauthorized\" } })\r\n        .pipe(materialize(), delay(500), dematerialize()); // call materialize and dematerialize to ensure delay even if an error is thrown (https://github.com/Reactive-Extensions/RxJS/issues/648);\r\n    }\r\n\r\n    function error(message) {\r\n      return throwError({ status: 400, error: { message } })\r\n        .pipe(materialize(), delay(500), dematerialize());\r\n    }\r\n\r\n    function isLoggedIn() {\r\n      const authHeader = headers.get(\"Authorization\") || \"\";\r\n      return authHeader.startsWith(\"Bearer fake-jwt-token\");\r\n    }\r\n\r\n    function isAdmin() {\r\n      return isLoggedIn() && currentUser().role === Role.Admin;\r\n    }\r\n\r\n    function currentUser() {\r\n      if (!isLoggedIn()) {\r\nreturn;\r\n}\r\n      const id = parseInt(headers.get(\"Authorization\").split(\".\")[1]);\r\n      return users.find(x => x.id === id);\r\n    }\r\n\r\n    function idFromUrl() {\r\n      const urlParts = url.split(\"/\");\r\n      return parseInt(urlParts[urlParts.length - 1]);\r\n    }\r\n  }\r\n}\r\n\r\nexport const fakeBackendProvider = {\r\n  // use fake backend in place of Http service for backend-less development\r\n  provide: HTTP_INTERCEPTORS,\r\n  useClass: FakeBackendInterceptor,\r\n  multi: true\r\n};\r\n","import { NativeDateAdapter, MatDateFormats } from \"@angular/material/core\";\r\nimport {Injectable} from \"@angular/core\";\r\n\r\n@Injectable()\r\nexport class AppDateAdapter extends NativeDateAdapter {\r\n  format(date: Date, displayFormat: Object): string {\r\n    if (displayFormat === \"input\") {\r\n      let day: string = date.getDate().toString();\r\n      day = +day < 10 ? \"0\" + day : day;\r\n      let month: string = (date.getMonth() + 1).toString();\r\n      month = +month < 10 ? \"0\" + month : month;\r\n      const year = date.getFullYear();\r\n      return `${day}-${month}-${year}`;\r\n    }\r\n    return date.toDateString();\r\n  }\r\n}\r\n\r\nexport const APP_DATE_FORMATS: MatDateFormats = {\r\n  parse: {\r\n    dateInput: { month: \"short\", year: \"numeric\", day: \"numeric\" }\r\n  },\r\n  display: {\r\n    dateInput: \"input\",\r\n    monthYearLabel: { year: \"numeric\", month: \"numeric\" },\r\n    dateA11yLabel: { year: \"numeric\", month: \"long\", day: \"numeric\"\r\n    },\r\n    monthYearA11yLabel: { year: \"numeric\", month: \"long\" },\r\n  }\r\n}\r\n","export * from \"./auth.guard\";\r\nexport * from \"./error.interceptor\";\r\nexport * from \"./fake-backend\";\r\nexport * from \"./format-datepicker\";\r\nexport * from \"./jwt.interceptor\";\r\nexport * from \"./old_model\";\r\nexport * from \"./util\";\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from \"@angular/common/http\";\r\nimport { Observable } from \"rxjs\";\r\n\r\nimport { environment } from \"@env/environment\";\r\nimport { AuthenticationService } from \"@app/core/services/authentication.service\";\r\n\r\n@Injectable()\r\nexport class JwtInterceptor implements HttpInterceptor {\r\n  constructor(private authenticationService: AuthenticationService) { }\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    // add auth header with jwt if user is logged in and request is to api url\r\n    const user = this.authenticationService.userValue;\r\n    const isLoggedIn = user && user.accessToken;\r\n    const isApiUrl = request.url.startsWith(environment.backend);\r\n    if (isLoggedIn && isApiUrl) {\r\n      request = request.clone({\r\n        setHeaders: {\r\n          authorization: `Bearer ${user.accessToken}`\r\n        }\r\n      });\r\n    }\r\n\r\n    return next.handle(request);\r\n  }\r\n}\r\n","import { NgbDateStruct } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { assertNever, flatMap } from \"./util\";\r\n\r\nexport type Selectable = CheckBox | Group;\r\nexport type Clickable  = CheckBox | Option;\r\n\r\nexport interface Data {\r\n[name: string]: string[];\r\n}\r\n\r\nexport interface TextExtractor {\r\n  ofCheckbox(c: CheckBox): string | undefined;\r\n  ofOption(o: Option): string | undefined;\r\n  ofEnumeration(e: Enumeration): string | undefined;\r\n  ofBlock(e: Block): string | undefined;\r\n  ofConditional(c: Conditional): string | undefined;\r\n}\r\n\r\n// Selectable classes, lower than category\r\n\r\nexport interface CheckBox {\r\n  kind:           \"box\";\r\n  name:           string;\r\n  value:          boolean;\r\n  text:           string;\r\n  judgementText?: string;\r\n  conditionalId?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  enumeration?:   string;\r\n  data:           Data;\r\n}\r\n\r\nexport interface Group {\r\n  kind:    \"group\";\r\n  name:    string;\r\n  options: Option[];\r\n  value?:  string;\r\n  data:    Data;\r\n}\r\n\r\nexport interface Option {\r\n  kind:           \"option\";\r\n  name:           string;\r\n  text:           string;\r\n  conditionalId?: string;\r\n  judgementText?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  data:           Data;\r\n}\r\n\r\nexport type TopLevel = Category | Block | Enumeration | Conditional;\r\n\r\n// Main data management and display class\r\n\r\nexport interface Category {\r\n  kind: \"category\";\r\n  name: string;\r\n  optional?: boolean;\r\n  selectables: Selectable[];\r\n  data: Data;\r\n}\r\n\r\nexport interface Block {\r\n  kind: \"block\";\r\n  text?: string;\r\n  judgementText?: string;\r\n  data: Data;\r\n}\r\n\r\nexport interface Enumeration {\r\n  kind:           \"enumeration\";\r\n  text:           string;\r\n  judgementText?: string;\r\n  id:             string;\r\n  data:           Data;\r\n}\r\n\r\nexport interface Conditional {\r\n  kind:           \"conditional\";\r\n  precondition:   Literal[][];\r\n  normalText?:    string;\r\n  judgementText?: string;\r\n  data:           Data;\r\n}\r\n\r\nexport interface Literal {\r\n  id:      string;\r\n  negated: boolean;\r\n}\r\n\r\n// Variable types\r\n\r\nexport type Variable = VariableOC | VariableMC | VariableText | VariableNumber | VariableDate | VariableRatio;\r\n\r\nexport interface VariableCommon {\r\n  id:         string;\r\n  textBefore: string;\r\n  textAfter:  string;\r\n  data:       Data;\r\n}\r\n\r\nexport interface VariableOC extends VariableCommon {\r\n  kind:   \"oc\";\r\n  value?: string;\r\n  values: string[];\r\n}\r\n\r\nexport interface VariableMC extends VariableCommon {\r\n  kind:   \"mc\";\r\n  values: [string, boolean][];\r\n}\r\n\r\nexport interface VariableText extends VariableCommon {\r\n  kind:  \"text\";\r\n  value: string;\r\n}\r\n\r\nexport interface VariableNumber extends VariableCommon {\r\n  kind:  \"number\";\r\n  value: number;\r\n}\r\n\r\nexport interface VariableDate extends VariableCommon {\r\n  kind:  \"date\";\r\n  value: NgbDateStruct;\r\n}\r\n\r\nexport interface VariableRatio extends VariableCommon {\r\n  kind:           \"ratio\";\r\n  numerator:      number;\r\n  denominator:    number;\r\n  fractionDigits: number;\r\n}\r\n\r\nexport function resolve(varId: string, structure: TopLevel[]): Variable | undefined {\r\n  for (const tl of structure) {\r\n    switch (tl.kind) {\r\n      case \"block\": continue;\r\n      case \"enumeration\": continue;\r\n      case \"conditional\": continue;\r\n      case \"category\": {\r\n        const result = resolveCategory(varId, tl);\r\n        if (result) {\r\n          return result;\r\n        } else {\r\n          continue;\r\n        }\r\n      }\r\n      default: assertNever(tl);\r\n    }\r\n  }\r\n}\r\n\r\nexport function resolveCategory(varId: string, c: Category): Variable | undefined {\r\n  return flatMap(c.selectables, variablesOfSelectable).find(v => v.id === varId);\r\n}\r\n\r\nfunction variablesOfSelectable(s: Selectable): Variable[] {\r\n  switch (s.kind) {\r\n    case \"box\": return s.variables;\r\n    case \"group\": return flatMap(s.options, o => o.variables);\r\n    default: return assertNever(s);\r\n  }\r\n}\r\n","export function assertNever(n: never): never {\r\n  throw new Error(JSON.stringify(n) + \" should never be a value\");\r\n}\r\n\r\nexport function flatMap<X, Y>(xs: X[], f: (x: X) => Y[]): Y[] {\r\n  let ret: Y[] = [];\r\n\r\n  for (const x of xs) {\r\n    ret = ret.concat(f(x));\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nexport function displayableQuotient(numerator: number, denominator: number, fractionDigits: number = 2): string {\r\n  const res = numerator / denominator ;\r\n  if (isFinite(res)) {\r\n    return res.toFixed(fractionDigits);\r\n  } else {\r\n    return \"   \";\r\n  }\r\n}\r\n\r\nexport function levenshtein(a: string, b: string): number {\r\n  const an = a ? a.length : 0;\r\n  const bn = b ? b.length : 0;\r\n  if (an === 0) {\r\n    return bn;\r\n  }\r\n  if (bn === 0) {\r\n    return an;\r\n  }\r\n  const matrix = new Array<number[]>(bn + 1);\r\n  for (let i = 0; i <= bn; ++i) {\r\n    const row = matrix[i] = new Array<number>(an + 1);\r\n    row[0] = i;\r\n  }\r\n  const firstRow = matrix[0];\r\n  for (let j = 1; j <= an; ++j) {\r\n    firstRow[j] = j;\r\n  }\r\n  for (let i = 1; i <= bn; ++i) {\r\n    for (let j = 1; j <= an; ++j) {\r\n      if (b.charAt(i - 1) === a.charAt(j - 1)) {\r\n        matrix[i][j] = matrix[i - 1][j - 1];\r\n      } else {\r\n        matrix[i][j] = Math.min(\r\n          matrix[i - 1][j - 1], // substitution\r\n          matrix[i][j - 1], // insertion\r\n          matrix[i - 1][j] // deletion\r\n        ) + 1;\r\n      }\r\n    }\r\n  }\r\n  return matrix[bn][an];\r\n}\r\n\r\nexport function getAllIndexOf(searchStr: string, inputStr: string, caseSensitive: boolean): number[] {\r\n  // searches for all occurrences of a searchString within an inputString and returns all start indexes as an array\r\n  if (searchStr.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  if (!caseSensitive) {\r\n    inputStr = inputStr.toLowerCase();\r\n    searchStr = searchStr.toLowerCase();\r\n  }\r\n\r\n  let startIndex = 0;\r\n  let index: number;\r\n  const indexes: number[] = [];\r\n\r\n  while ((index = inputStr.indexOf(searchStr, startIndex)) > -1) {\r\n    indexes.push(index);\r\n    startIndex = index + searchStr.length;\r\n  }\r\n\r\n  return indexes;\r\n}\r\n\r\nexport function splitStringFromIndexes(input: string, indexes: number[]): string[] {\r\n  const splitText: string[] = [];\r\n  indexes.sort();\r\n  for (let i = 0; i < indexes.length; i++) {\r\n    if (i === indexes.length) {\r\n      splitText.push(input.substring(indexes[i], input.length));\r\n    } else {\r\n      splitText.push(input.substring(indexes[i], indexes[i + 1]));\r\n    }\r\n  }\r\n  return splitText;\r\n}\r\n\r\nexport function getDateFormatted(date: Date, addTime: boolean): string {\r\n  let result: string;\r\n  const day: string = (\"0\" + date.getDate()).slice(-2);\r\n  const month: string = (\"0\" + (date.getMonth() + 1)).slice(-2);\r\n  result = day + \".\" + month + \".\" + date.getFullYear();\r\n  if (addTime) {\r\n    const hour: string = (\"0\" + date.getHours()).slice(-2);\r\n    const minutes: string = (\"0\" + date.getMinutes()).slice(-2);\r\n    result += \", \" + hour + \":\" + minutes;\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function arrayBufferToBase64(buffer) {\r\n  let binary = \"\";\r\n  const bytes = new Uint8Array(buffer);\r\n  console.log(bytes);\r\n  const len = bytes.byteLength;\r\n  for (let i = 0; i < len; i++) {\r\n    binary += String.fromCharCode(bytes[i]);\r\n  }\r\n  return window.btoa(binary);\r\n}\r\n\r\nexport function getBase64Image(img) {\r\n  const canvas = document.createElement(\"canvas\");\r\n  canvas.width = img.width;\r\n  canvas.height = img.height;\r\n\r\n  const ctx = canvas.getContext(\"2d\");\r\n  ctx.drawImage(img, 0, 0);\r\n\r\n  const dataURL = canvas.toDataURL(\"image/png\");\r\n\r\n  return dataURL.replace(/^data:image\\/(png|jpg);base64,/, \"\");\r\n}\r\n\r\nexport function getFileExtension(filename: string) {\r\n  return filename.split(\".\").pop().toLowerCase();\r\n}\r\n\r\nexport function getImageDimensions(imgUrl): [number, number] {\r\n\r\n  let width: number;\r\n  let height: number;\r\n  let img = new Image();\r\n\r\n  img.src = imgUrl;\r\n  img.onload = (event) => {\r\n    let loadedImage = event.currentTarget as HTMLImageElement;\r\n    width = loadedImage.width;\r\n    height = loadedImage.height;\r\n  }\r\n\r\n  console.log(\"UTIL HERE\");\r\n  console.log(width, height);\r\n  return [width, height];\r\n}\r\n","import * as M from \"./templateModel\";\r\n\r\nexport function normalExtractor(): M.TextExtractor {\r\n  return new class {\r\n    ofCheckbox(c: M.CheckBox): string | undefined { return c.text; }\r\n    ofOption(o: M.Option): string | undefined { return o.text; }\r\n    ofEnumeration(e: M.Enumeration): string | undefined { return e.text; }\r\n    ofBlock(b: M.Block): string | undefined { return b.text; }\r\n    ofConditional(c: M.Conditional): string | undefined { return c.normalText; }\r\n  };\r\n}\r\n\r\nexport function judgementExtractor(): M.TextExtractor {\r\n  return new class {\r\n    ofCheckbox(c: M.CheckBox): string | undefined { return c.judgementText; }\r\n    ofOption(o: M.Option): string | undefined { return o.judgementText; }\r\n    ofEnumeration(e: M.Enumeration): string | undefined { return e.judgementText; }\r\n    ofBlock(b: M.Block): string | undefined { return b.judgementText; }\r\n    ofConditional(c: M.Conditional): string | undefined { return c.judgementText; }\r\n  };\r\n}\r\n\r\nexport function makeText(parts: M.TopLevel[], extractor: M.TextExtractor, suppressed: string[]): string {\r\n let result = parts.map(c => {\r\n    if (c.kind === \"category\") {\r\n      return getTexts(c.selectables, suppressed, extractor)\r\n        .map(t => expandVariablesInString(t, parts, true)).join(\"\");\r\n    } else if (c.kind === \"block\") {\r\n      return extractor.ofBlock(c) || \"\";\r\n    } else if (c.kind === \"enumeration\") {\r\n      return makeEnumeration(c, parts, extractor);\r\n    } else if (c.kind === \"conditional\") {\r\n      if (checkConditional(c, parts)) {\r\n        const data = extractor.ofConditional(c);\r\n        if (data) {\r\n          return expandVariablesInString(data, parts, true);\r\n        } else {\r\n          return \"\";\r\n        }\r\n      }\r\n    } else {\r\n      throw new Error(\"unknown top level kind\");\r\n    }\r\n  }).join(\"\");\r\n  const blocks = parts.filter(x => x.kind === \"block\");\r\n  for (const b of blocks) {\r\n    const regEx = new RegExp((b as M.Block).text + \"(\\\\n|$)\");\r\n    result = result.replace(regEx, \"\\n\");\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function getSuppressedConditionalIds(data: M.TopLevel[]): string[][] {\r\n  const suppressedNormal: string[] = [];\r\n  const suppressedJudgement: string[] = [];\r\n\r\n  for (const topLevel of data) {\r\n    if (topLevel.kind === \"conditional\") {\r\n      if (checkConditional(topLevel, data)) {\r\n        for (const anded of topLevel.precondition) {\r\n          for (const literal of anded) {\r\n            if (!literal.negated) {\r\n              if (topLevel.normalText) {\r\n                suppressedNormal.push(literal.id);\r\n              }\r\n              if (topLevel.judgementText) {\r\n                suppressedJudgement.push(literal.id);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return [suppressedNormal, suppressedJudgement];\r\n}\r\n\r\nexport function checkConditional(c: M.Conditional, data: M.TopLevel[]): boolean {\r\n  outer:\r\n  for (const anded of c.precondition) {\r\n    for (const literal of anded) {\r\n      if (isClicked(literal.id, data) === literal.negated) {\r\n        continue outer;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function isClicked(clickableId: string, data: M.TopLevel[]): boolean {\r\n  for (const category of data.filter(p => p.kind === \"category\").map(c => c as M.Category)) {\r\n    for (const selectable of category.selectables) {\r\n      if (selectable.kind === \"box\") {\r\n        if (selectable.value && selectable.conditionalId === clickableId) {\r\n          return true;\r\n        }\r\n      } else {\r\n        for (const option of selectable.options) {\r\n          if (option.conditionalId === clickableId && selectable.value === option.name) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n\r\nexport function getTexts(ss: M.Selectable[], suppressed: string[], textExtractor: M.TextExtractor): string[] {\r\n  const ret: string[] = [];\r\n\r\n  for (const s of ss) {\r\n    if (s.kind === \"box\" && s.value && !s.enumeration && (!s.conditionalId || suppressed.indexOf(s.conditionalId) === -1)) {\r\n      const result = textExtractor.ofCheckbox(s);\r\n      if (result) {\r\n        ret.push(result);\r\n      }\r\n    } else if (s.kind === \"group\") {\r\n      for (const o of s.options) {\r\n        if (s.value === o.name && (!o.conditionalId || suppressed.indexOf(o.conditionalId) === -1)) {\r\n          const result = textExtractor.ofOption(o);\r\n          if (result) {\r\n            ret.push(result);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\nexport function expandVariablesInString(s: string, data: M.TopLevel[], addFullStop: boolean): string {\r\n  const today = new Date();\r\n  const yesterday = new Date();\r\n  yesterday.setDate(today.getDate() - 1);\r\n  const tomorrow = new Date();\r\n  tomorrow.setDate(today.getDate() + 1);\r\n\r\n  const lookup: (string) => string = (name) => {\r\n    if (name === \"%Gestern%\") {\r\n      return makeDateString(yesterday);\r\n    } else if (name === \"%Heute%\") {\r\n      return makeDateString(today);\r\n    } else if (name === \"%Morgen%\") {\r\n      return makeDateString(tomorrow);\r\n    }\r\n    const vars = allVariables(data);\r\n    const matching = vars.find(v => \"%\" + v.id + \"%\" === name);\r\n    if (matching) {\r\n      if (textOfVariable(matching)) {\r\n        return textOfVariable(matching);\r\n      } else {\r\n        return \"---\";\r\n      }\r\n    } else {\r\n      return \"---\";\r\n    }\r\n  };\r\n  s = s.replace(/%[^%]+%/g, lookup);\r\n  const brackets = s.match(/(\\[]*?[^\\]]*?])/g);\r\n  if (brackets != null) {\r\n    for (const t of brackets) {\r\n      if (t.includes(\"---\")) {\r\n        s = s.replace(t, \"\");\r\n      }\r\n    }\r\n  }\r\n  s = s.replace(/(---)/g, \"\"); // \"Fehlzeichen\" weg\r\n  s = s.replace(/\\s\\s+/g, \" \"); // doppelt oder mehr Leerzeichen weg\r\n  s = s.replace(/\\[|\\]/g, \"\"); // Klammern weg\r\n  s = s.trim();\r\n  if (addFullStop) {\r\n    s = s.replace(/(\\s*\\.?\\s*$)/, \". \"); // Punkt am Ende einfügen, falls keiner da ist\r\n  }\r\n  return s;\r\n}\r\n\r\nexport function makeDateString(d: Date): string {\r\n  return d.toLocaleDateString(\"de-DE\", { year: \"numeric\", month: \"numeric\", day: \"numeric\" });\r\n}\r\n\r\nexport function allVariables(data: M.TopLevel[]): M.Variable[] {\r\n  let vars: M.Variable[] = [];\r\n\r\n  for (const c of data) {\r\n    if (c.kind === \"category\") {\r\n      for (const sel of c.selectables) {\r\n        if (sel.kind === \"box\" && sel.value) {\r\n          vars = vars.concat(sel.variables);\r\n        } else if (sel.kind === \"group\") {\r\n          for (const o of sel.options) {\r\n            if (sel.value === o.name) {\r\n              vars = vars.concat(o.variables);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return vars;\r\n}\r\n\r\nexport function textOfVariable(v: M.Variable): string | undefined {\r\n  if (v.kind === \"oc\") {\r\n    return v.value;\r\n  } else if (v.kind === \"mc\") {\r\n    return v.values.filter(val => val[1]).map(val => val[0]).join(\", \");\r\n  } else if (v.kind === \"text\") {\r\n    return v.value;\r\n  } else if (v.kind === \"number\") {\r\n    if (v.value !== 0) {\r\n      return \"\" + v.value;\r\n    } else {\r\n    return \"\";\r\n    }\r\n  } else if (v.kind === \"date\") {\r\n    return v.value.day + \".\" + v.value.month + \".\" + v.value.year;\r\n  } else if (v.kind === \"ratio\") {\r\n    return (v.numerator / v.denominator).toLocaleString(\"de-DE\", { maximumFractionDigits: v.fractionDigits });\r\n  }\r\n\r\n  return assertUnreachable(v);\r\n}\r\n\r\nexport function makeNormalCategory(c: M.Category): void {\r\n  if (hasSelection(c)) { return; }\r\n\r\n  for (const entry of c.selectables) {\r\n    if (entry.kind === \"box\") {\r\n      if (entry.normal) {\r\n        entry.value = true;\r\n      }\r\n    } else if (entry.kind === \"group\") {\r\n      for (const o of entry.options) {\r\n        if (o.normal) {\r\n          entry.value = o.name;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function hasSelection(c: M.Category): boolean {\r\n  for (const entry of c.selectables) {\r\n    if (entry.kind === \"box\" && entry.value) {\r\n      return true;\r\n    } else if (entry.kind === \"group\" && entry.value) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n\r\nexport function makeEnumeration(e: M.Enumeration, data: M.TopLevel[], textExtractor: M.TextExtractor): string {\r\n  const items: string[] = getRelevantEnumerationItems(e.id, data, textExtractor);\r\n  if (items.length === 0) {\r\n    return \"\";\r\n  } else if (items.length === 1) {\r\n    return textExtractor.ofEnumeration(e) + items[0] + \". \";\r\n  } else if (items.length === 2) {\r\n    return textExtractor.ofEnumeration(e) + items[0] + \" und \" + items[1] + \". \";\r\n  } else if (items.length > 2) {\r\n    return textExtractor.ofEnumeration(e) + items.slice(0, items.length - 1).join(\", \") + \" und \" + items[items.length - 1] + \" \";\r\n  }\r\n}\r\n\r\nexport function getRelevantEnumerationItems(id: string, data: M.TopLevel[], textExtractor: M.TextExtractor): string[] {\r\n  const items: string[] = [];\r\n\r\n  for (const p of data) {\r\n    if (p.kind === \"category\") {\r\n      for (const s of p.selectables) {\r\n        if (s.kind === \"box\") {\r\n          if (s.value && s.enumeration === id) {\r\n            const result = textExtractor.ofCheckbox(s);\r\n            if (result) {\r\n              items.push(expandVariablesInString(result, data, false));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return items;\r\n}\r\n\r\nexport function assertUnreachable(x: never): never {\r\n  throw new Error(\"should not be reachable: \" + x);\r\n}\r\n","export * from \"./generator\";\r\nexport * from \"./keyword\";\r\nexport * from \"./materialModel\";\r\nexport * from \"./takers\";\r\nexport * from \"./templateModel\";\r\nexport * from \"./user\";\r\nexport * from \"./role\";\r\n","export interface KeySelectable {\r\n  name: string;\r\n  synonym: string;\r\n  category: string;\r\n  group?: string;\r\n  position: number;\r\n  active: boolean;\r\n  variableText?: string;\r\n}\r\n\r\nexport interface KeyVariable {\r\n  category?: string;\r\n  selectable: string;\r\n  id: string;\r\n  kind: string;\r\n  name?: string;\r\n  synonym?: string;\r\n  value?: string;\r\n  textBefore: string;\r\n  textAfter: string;\r\n  position: number;\r\n  active: boolean;\r\n}\r\n","import * as M from \"./templateModel\";\r\nimport {Template} from \"./templateModel\";\r\n\r\nexport interface Pathology {\r\n  name: string;\r\n  present: boolean;\r\n}\r\n\r\nexport interface BoundingBox {\r\n  left: number;\r\n  top: number;\r\n  height: number;\r\n  width: number;\r\n  label: string;\r\n}\r\n\r\nexport interface Image {\r\n  filename: string;\r\n  mimetype: string;\r\n}\r\n\r\nexport interface Material {\r\n  _id:            string;\r\n  scans: {\r\n    id: string;\r\n    mainScan: Image;\r\n    lateralScan?: Image;\r\n    preScan?: Image;\r\n  };\r\n  coordinates: {\r\n    main:         BoundingBox[];\r\n    lateral:      BoundingBox[];\r\n    pre:          BoundingBox[];\r\n  };\r\n  modality:       string;\r\n  template:       Template;\r\n  pathologies:    Pathology[];\r\n  judged:         boolean;\r\n}\r\n\r\n","export enum Role {\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  User = \"user\",\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  Moderator = \"moderator\",\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  Admin = \"admin\"\r\n}\r\n","/*\r\n * Type Definitions\r\n */\r\nexport type Taker = (text: string) => TakeResult | undefined;\r\n\r\nexport interface TakeResult {\r\n  lengthTaken: number;\r\n  setter: () => void;\r\n}\r\n\r\n/*\r\n * basic takers\r\n */\r\n\r\nexport function text(text: string): Taker {\r\n  return (input: string): TakeResult | undefined  => {\r\n    const sub = input.substr(0, text.length)\r\n    if (sub === text) {\r\n      return {\r\n        lengthTaken: sub.length,\r\n        setter: () => {}\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nexport function regex(r: RegExp): Taker {\r\n  return (input: string): TakeResult | undefined  => {\r\n    const match = r.exec(input)\r\n    if (match) {\r\n      return {\r\n        lengthTaken: match[0].length,\r\n        setter: () => {}\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const dummy:   Taker = (s: string) => { console.log(\"there are still dummy takers\"); return undefined; }\r\nexport const fail:    Taker = (s: string) => { return undefined; }\r\nexport const success: Taker = (s: string) => { return { lengthTaken: 0, setter: () => { } }; }\r\nexport const decimal: Taker = regex(/\\d+([.,]\\d+)?/)\r\n\r\n/*\r\n * combinators\r\n */\r\n\r\nexport function compound(takers: Taker[]): Taker {\r\n  return (s: string) => {\r\n    const results: TakeResult[] = [];\r\n\r\n    let ss = s;\r\n    for (let t of takers) {\r\n      const result = t(ss);\r\n      if (result) {\r\n        results.push(result);\r\n        ss = ss.substr(result.lengthTaken);\r\n      } else {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    return {\r\n      lengthTaken: results.reduce((a, b) => a + b.lengthTaken, 0),\r\n      setter: () => { results.forEach(r => r.setter()) }\r\n    };\r\n  }\r\n}\r\n\r\nexport function or(takers: Taker[]): Taker {\r\n  return (s: string) => {\r\n    for (let taker of takers) {\r\n      const result = taker(s);\r\n      if (result) {\r\n        return result;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function optional(t: Taker): Taker {\r\n  return or([t, success]);\r\n}\r\n\r\nexport function addSetter(t: Taker, f: (oldText: string) => void) {\r\n  return s => {\r\n    const result = t(s);\r\n    if (result) {\r\n      return {\r\n        lengthTaken: result.lengthTaken,\r\n        setter: () => { result.setter(); f(s.substring(0, result.lengthTaken)); }\r\n      };\r\n    }\r\n\r\n    return result;\r\n  };\r\n}\r\n\r\n\r\nexport function logOnFail(t: Taker, msg: string): Taker {\r\n  return s => {\r\n    const result = t(s);\r\n    if (result) {\r\n      return result;\r\n    } else {\r\n      console.log(msg);\r\n    }\r\n  };\r\n}\r\n\r\nexport function logOnSuccess(t: Taker, msg: string): Taker {\r\n  return s => {\r\n    const result = t(s);\r\n    if (result) {\r\n      console.log(msg);\r\n      return result;\r\n    }\r\n  };\r\n}\r\n\r\n\r\nexport function log(t: Taker, msgSuc: string, msgFail: string): Taker {\r\n  return logOnSuccess(logOnFail(t, msgFail), msgSuc);\r\n}\r\n","import {NgbDateStruct} from \"@ng-bootstrap/ng-bootstrap\";\r\nimport * as M from \"../helpers/old_model\";\r\n\r\nexport interface TextExtractor {\r\n  ofCheckbox(c: CheckBox): string | undefined;\r\n  ofOption(o: Option): string | undefined;\r\n  ofEnumeration(e: Enumeration): string | undefined;\r\n  ofBlock(e: Block): string | undefined;\r\n  ofConditional(c: Conditional): string | undefined;\r\n}\r\n\r\nexport interface Template {\r\n  _id: string;\r\n  name: string;\r\n  timestamp: Date;\r\n  parts: TopLevel[];\r\n}\r\n\r\nexport type TopLevel = Category | Block | Enumeration | Conditional;\r\n\r\n// Main data management and display class\r\n\r\nexport interface Category {\r\n  kind: \"category\";\r\n  name: string;\r\n  optional?: boolean;\r\n  selectables: Selectable[];\r\n}\r\n\r\nexport interface Block {\r\n  kind: \"block\";\r\n  text?: string;\r\n  judgementText?: string;\r\n}\r\n\r\nexport interface Enumeration {\r\n  kind:           \"enumeration\";\r\n  text:           string;\r\n  judgementText?: string;\r\n  id:             string;\r\n}\r\n\r\nexport interface Conditional {\r\n  kind:           \"conditional\";\r\n  precondition:   Literal[][];\r\n  normalText?:    string;\r\n  judgementText?: string;\r\n}\r\n\r\nexport interface Literal {\r\n  id:      string;\r\n  negated: boolean;\r\n}\r\n\r\n// Selectable classes, lower than category\r\n\r\nexport type Selectable = CheckBox | Group;\r\nexport type Clickable  = CheckBox | Option;\r\n\r\nexport interface CheckBox {\r\n  kind:           \"box\";\r\n  name:           string;\r\n  value:          boolean;\r\n  text:           string;\r\n  conditionalId?: string;\r\n  judgementText?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  enumeration?:   string;\r\n  keys:           string[];\r\n}\r\n\r\nexport interface Group {\r\n  kind:    \"group\";\r\n  name:    string;\r\n  options: Option[];\r\n  value?:  string;\r\n}\r\n\r\nexport interface Option {\r\n  kind:           \"option\";\r\n  name:           string;\r\n  text:           string;\r\n  conditionalId?: string;\r\n  judgementText?: string;\r\n  normal:         boolean;\r\n  variables:      Variable[];\r\n  keys:           string[];\r\n}\r\n\r\n// Variable types\r\n\r\nexport type Variable = VariableOC | VariableMC | VariableText | VariableNumber | VariableDate | VariableRatio;\r\n\r\nexport interface VariableCommon {\r\n  id:         string;\r\n  textBefore: string;\r\n  textAfter:  string;\r\n  // TODO: Refactor because only OC and MC need keys (aka synonyms)\r\n  keys?:      string[][];\r\n}\r\n\r\nexport interface VariableOC extends VariableCommon {\r\n  kind:   \"oc\";\r\n  value?: string;\r\n  values: string[];\r\n}\r\n\r\nexport interface VariableMC extends VariableCommon {\r\n  kind:   \"mc\";\r\n  values: [string, boolean][];\r\n}\r\n\r\nexport interface VariableText extends VariableCommon {\r\n  kind:  \"text\";\r\n  value: string;\r\n}\r\n\r\nexport interface VariableNumber extends VariableCommon {\r\n  kind:  \"number\";\r\n  value: number;\r\n}\r\n\r\nexport interface VariableDate extends VariableCommon {\r\n  kind:  \"date\";\r\n  value: NgbDateStruct;\r\n}\r\n\r\nexport interface VariableRatio extends VariableCommon {\r\n  kind:           \"ratio\";\r\n  numerator:      number;\r\n  denominator:    number;\r\n  fractionDigits: number;\r\n}\r\n\r\nexport function convertModel(oldModel: M.TopLevel[]) {\r\n  const newParts: TopLevel[] = [];\r\n  for (const part of oldModel) {\r\n    if (part.kind === \"category\") {\r\n      newParts.push(convertCategory(part));\r\n    } else if(part.kind === \"block\") {\r\n      newParts.push(convertBlock(part));\r\n    } else if(part.kind === \"enumeration\") {\r\n      newParts.push(convertEnum(part));\r\n    } else if(part.kind === \"conditional\") {\r\n      newParts.push(convertCond(part));\r\n    }\r\n  }\r\n  return newParts;\r\n}\r\n\r\nexport function convertSelectables(oldSels: M.Selectable[]): Selectable[] {\r\n  const newSels: Selectable[] = [];\r\n  for (const oldSel of oldSels) {\r\n    let newSel: Selectable;\r\n    if (oldSel.kind === \"box\") {\r\n      newSel = convertCheckBox(oldSel);\r\n    } else if (oldSel.kind === \"group\") {\r\n      newSel = convertGroup(oldSel);\r\n    }\r\n    newSels.push(newSel);\r\n  }\r\n  return newSels;\r\n}\r\n\r\nexport function convertCheckBox(oldBox: M.CheckBox): CheckBox {\r\n  const newVariables: Variable[] = convertVariables(oldBox.variables);\r\n  const keywords: string[] = splitKeywords(oldBox.data[\"bau\"][0], \";\");\r\n  return {\r\n    kind: oldBox.kind,\r\n    name: oldBox.name,\r\n    value: oldBox.value,\r\n    text: oldBox.text,\r\n    judgementText: oldBox.judgementText,\r\n    enumeration: oldBox.enumeration,\r\n    normal: oldBox.normal,\r\n    variables: newVariables,\r\n    keys: keywords\r\n  };\r\n}\r\n\r\nexport function convertGroup(oldGroup: M.Group): Group {\r\n  const newOpts: Option[] = [];\r\n  for (const oldOpt of oldGroup.options) {\r\n    newOpts.push(convertOption(oldOpt));\r\n  }\r\n  return {\r\n    kind: oldGroup.kind,\r\n    name: oldGroup.name,\r\n    options: newOpts,\r\n    value: oldGroup.value\r\n  };\r\n}\r\n\r\nexport function convertOption(oldOpt: M.Option): Option {\r\n  const newVariables: Variable[] = convertVariables(oldOpt.variables);\r\n  const keys: string[] = splitKeywords(oldOpt.data[\"bau\"][0], \";\");\r\n  return {\r\n    kind: oldOpt.kind,\r\n    name: oldOpt.name,\r\n    text: oldOpt.text,\r\n    judgementText: oldOpt.judgementText,\r\n    normal: oldOpt.normal,\r\n    variables: newVariables,\r\n    keys: keys\r\n  };\r\n}\r\n\r\nexport function convertBlock(oldBlock: M.Block): Block {\r\n  return {\r\n    kind: oldBlock.kind,\r\n    text: oldBlock.text,\r\n    judgementText: oldBlock.judgementText\r\n  };\r\n}\r\n\r\nexport function convertEnum(oldEnum: M.Enumeration): Enumeration {\r\n  return {\r\n    kind: oldEnum.kind,\r\n    text: oldEnum.text,\r\n    judgementText: oldEnum.judgementText,\r\n    id: oldEnum.id\r\n  };\r\n}\r\n\r\nexport function convertCond(oldCond: M.Conditional): Conditional {\r\n  return {\r\n    kind: oldCond.kind,\r\n    precondition: oldCond.precondition,\r\n    normalText: oldCond.normalText,\r\n    judgementText: oldCond. judgementText\r\n  };\r\n}\r\n\r\nexport function convertCategory(oldCat: M.Category): Category {\r\n  const newSels = convertSelectables(oldCat.selectables);\r\n  return {\r\n    kind: oldCat.kind,\r\n    name: oldCat.name,\r\n    optional: oldCat.optional,\r\n    selectables: newSels\r\n  };\r\n}\r\n\r\nexport function convertVariables(oldVars: M.Variable[]): Variable[] {\r\n  const newVars: Variable[] = [];\r\n  for (const variable of oldVars) {\r\n    newVars.push(convertVariable(variable));\r\n  }\r\n  return newVars;\r\n}\r\n\r\nexport function convertVariable(oldVar: M.Variable): Variable {\r\n  let newVar: Variable;\r\n\r\n  if (oldVar.kind === \"oc\") {\r\n    const keys: string[][] = splitKeywordsArray(oldVar.data[\"syn\"][0], \"/\", \";\");\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: keys,\r\n      value: oldVar.value,\r\n      values: oldVar.values\r\n    };\r\n  } else if (oldVar.kind === \"mc\") {\r\n    const keys: string[][] = splitKeywordsArray(oldVar.data[\"syn\"][0], \";\", \",\");\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: keys,\r\n      values: oldVar.values\r\n    };\r\n  } else if (oldVar.kind === \"text\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      value: oldVar.value\r\n    };\r\n  } else if (oldVar.kind === \"number\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      value: oldVar.value\r\n    };\r\n  } else if (oldVar.kind === \"date\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      value: oldVar.value\r\n    };\r\n  } else if (oldVar.kind === \"ratio\") {\r\n    newVar = {\r\n      kind: oldVar.kind,\r\n      id: oldVar.id,\r\n      textBefore: oldVar.textBefore,\r\n      textAfter: oldVar.textAfter,\r\n      keys: null,\r\n      numerator: oldVar.numerator,\r\n      denominator: oldVar.denominator,\r\n      fractionDigits: oldVar.fractionDigits\r\n    };\r\n  }\r\n\r\n  return newVar;\r\n}\r\n\r\nexport function splitKeywords(keywords: string, splitter: string): string[] {\r\n  if (keywords) {\r\n    return keywords.split(splitter);\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function splitKeywordsArray(keys: string, optionSplitter: string, synonymSplitter: string): string[][] {\r\n  const result: string[][] = [];\r\n  const variableSplit: string[] = splitKeywords(keys, optionSplitter);\r\n  if (variableSplit) {\r\n    for (const varSynonyms of variableSplit) {\r\n      const synSplit: string[] = splitKeywords(varSynonyms, synonymSplitter);\r\n      synSplit.map(key => key.trim());\r\n      result.push(synSplit);\r\n    }\r\n  } else {\r\n    return null;\r\n  }\r\n  return result;\r\n}\r\n","import {Role} from \"./role\";\r\n\r\nexport class User {\r\n  id: number;\r\n  username: string;\r\n  role: Role;\r\n  accessToken?: string;\r\n}\r\n","import {Component, Inject, OnInit} from \"@angular/core\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\n\r\n@Component({\r\n  selector: \"app-confirm-dialog\",\r\n  templateUrl: \"./confirm-dialog.component.html\",\r\n  styleUrls: [\"./confirm-dialog.component.scss\"]\r\n})\r\nexport class ConfirmDialogComponent implements OnInit {\r\n\r\n  title: string;\r\n  message: string;\r\n  type: string;\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<ConfirmDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: ConfirmDialogModel) { }\r\n\r\n  ngOnInit(): void {\r\n    this.type = this.data.type;\r\n    this.title = this.data.title;\r\n    this.message = this.data.message;\r\n  }\r\n\r\n  onConfirm(): void {\r\n    this.dialogRef.close(true);\r\n  }\r\n\r\n  onDismiss(): void {\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n}\r\n\r\nexport class ConfirmDialogModel {\r\n\r\n  constructor(\r\n    public type: string,\r\n    public title: string,\r\n    public message: string) { }\r\n\r\n}\r\n","<h5 mat-dialog-title>\r\n  {{title}}\r\n</h5>\r\n<mat-divider></mat-divider>\r\n\r\n<div mat-dialog-content class=\"content\">\r\n  <p>{{message}}</p>\r\n</div>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<div mat-dialog-actions class=\"buttons\" *ngIf=\"type === 'confirm'\">\r\n  <button class=\"btn btn-primary\" (click)=\"onConfirm()\">Bestätigen</button>\r\n  <button class=\"btn btn-outline-secondary cancelButton\" (click)=\"onDismiss()\">Abbrechen</button>\r\n</div>\r\n\r\n<div mat-dialog-actions class=\"buttons\" *ngIf=\"type === 'warning'\">\r\n  <button class=\"btn btn-danger\" (click)=\"onConfirm()\">Bestätigen</button>\r\n  <button class=\"btn btn-outline-secondary cancelButton\" (click)=\"onDismiss()\">Abbrechen</button>\r\n</div>\r\n","import {Component, OnInit, Inject, ViewChild, ElementRef, AfterViewInit, TemplateRef} from \"@angular/core\";\r\nimport {POPOUT_MODAL_DATA, PopoutData} from \"@app/core/services/popout.tokens\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {switchMap, takeUntil} from \"rxjs/operators\";\r\nimport {MatDialogService} from \"@app/core/services/mat-dialog.service\";\r\nimport {MatDialog, MatDialogRef} from \"@angular/material/dialog\";\r\n\r\nimport {environment} from \"@env/environment\";\r\nimport {AuthenticationService} from \"@app/core\";\r\nimport {BoundingBox, Image, Role, User} from \"@app/models\";\r\n\r\nconst BOX_LINE_WIDTH = 5;\r\nconst DISPLAY_BOX_COLOR = \"blue\";\r\nconst EDIT_BOX_COLOR = \"green\";\r\nconst TEXT_COLOR = \"#98FF98\";\r\n\r\nconst MAX_IMAGE_HEIGHT = 900;\r\n\r\n@Component({\r\n  selector: \"app-image-display\",\r\n  templateUrl: \"./image-display.component.html\",\r\n  styleUrls: [\"./image-display.component.scss\"]\r\n})\r\nexport class ImageDisplayComponent implements OnInit, AfterViewInit {\r\n\r\n  serverUrl = environment.backend;\r\n  scans: {\r\n    id: string;\r\n    mainScan: Image;\r\n    lateralScan?: Image;\r\n    preScan?: Image;\r\n  };\r\n  coordinates: {\r\n    main: BoundingBox[];\r\n    lateral: BoundingBox[];\r\n    pre: BoundingBox[];\r\n  };\r\n  currentMode: string;\r\n  currentScanUrl: string;\r\n\r\n  currentScaleFactor = 1.0;\r\n  currentWidth: number;\r\n  currentHeight: number;\r\n\r\n  displayBoxes: boolean;\r\n  enableEdit: boolean;\r\n  enableDelete: boolean;\r\n  enableZoom: boolean;\r\n\r\n  startX = 0;\r\n  startY = 0;\r\n  width = 0;\r\n  height = 0;\r\n  newLabel = \"\";\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"drawLayer\", {static: false }) drawLayer: ElementRef;\r\n  private drawLayerElement;\r\n  private drawContext: CanvasRenderingContext2D;\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"labelLayer\", {static: false }) labelLayer: ElementRef;\r\n  private labelLayerElement;\r\n  private labelContext: CanvasRenderingContext2D;\r\n\r\n  private deleteLayerElement;\r\n  private deleteContext: CanvasRenderingContext2D;\r\n  @ViewChild(\"deleteLayer\", {static: false }) set deleteLayer(layer: ElementRef) {\r\n    if (this.enableDelete) {\r\n      this.deleteLayerElement = layer.nativeElement;\r\n      this.deleteContext = this.deleteLayerElement.getContext(\"2d\");\r\n      this.addDeleteListeners();\r\n    }\r\n  };\r\n\r\n  private editLayerElement;\r\n  private editContext: CanvasRenderingContext2D;\r\n  @ViewChild(\"editLayer\", {static: false }) set editLayer(layer: ElementRef) {\r\n    if (this.enableEdit) {\r\n      this.editLayerElement = layer.nativeElement;\r\n      this.editContext = this.editLayerElement.getContext(\"2d\");\r\n      this.rectangleDrawing();\r\n    }\r\n  };\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"labelDialog\") labelDialog: TemplateRef<any>;\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  dialogRef: MatDialogRef<any>;\r\n\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"sourceImage\") sourceImage: ElementRef;\r\n  // eslint-disable-next-line @typescript-eslint/member-ordering\r\n  @ViewChild(\"zoomDiv\") zoomDiv: ElementRef;\r\n  private zoomLayerElement;\r\n  private lensElement;\r\n  @ViewChild(\"lensContainer\") set zoom(container: ElementRef) {\r\n    if (this.enableZoom) {\r\n      const containerElement = container.nativeElement;\r\n      this.zoomLayerElement = containerElement.children[1];\r\n      this.lensElement = containerElement.children[0];\r\n      this.imageZoom();\r\n    }\r\n  }\r\n\r\n  private restricted = true;\r\n\r\n  constructor(@Inject(POPOUT_MODAL_DATA) public data: PopoutData,\r\n              private dialogService: MatDialogService,\r\n              private dialog: MatDialog) { }\r\n\r\n  ngOnInit(): void {\r\n    this.scans = this.data.scans;\r\n    this.coordinates = this.data.coordinates;\r\n\r\n    if (this.data.restricted !== undefined) {\r\n      this.restricted = this.data.restricted;\r\n    }\r\n    this.displayBoxes = false;\r\n    this.enableEdit = false;\r\n    this.enableDelete = false;\r\n\r\n    this.initMain();\r\n  }\r\n\r\n  get isAllowed() {\r\n    return !this.restricted;\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.drawLayerElement = this.drawLayer.nativeElement;\r\n    this.drawContext = this.drawLayerElement.getContext(\"2d\");\r\n    this.labelLayerElement = this.labelLayer.nativeElement;\r\n    this.labelContext = this.labelLayerElement.getContext(\"2d\");\r\n  }\r\n\r\n  initMain() {\r\n    this.currentMode = \"main\";\r\n    this.setCurrentImage();\r\n    this.setCurrentDimensions();\r\n  }\r\n\r\n  setCanvasProperties(context, lineWidth, lineCap, strokeStyle) {\r\n    context.lineWidth = lineWidth;\r\n    context.lineCap = lineCap;\r\n    context.strokeStyle = strokeStyle;\r\n  }\r\n\r\n  clearCanvas() {\r\n    this.drawContext.clearRect(0, 0, this.drawLayerElement.width, this.drawLayerElement.height);\r\n    this.labelContext.clearRect(0, 0, this.labelLayerElement.width, this.labelLayerElement.height);\r\n  }\r\n\r\n  setCurrentImage() {\r\n    const filename = this.scans[this.currentMode + \"Scan\"].filename;\r\n    this.currentScanUrl = this.serverUrl + this.scans.id + \"/\" + filename;\r\n  }\r\n\r\n  setCurrentDimensions() {\r\n    const img = new Image();\r\n    img.src = this.currentScanUrl;\r\n    img.onload = (event) => {\r\n      const loadedImage = event.currentTarget as HTMLImageElement;\r\n      if (loadedImage.height <= MAX_IMAGE_HEIGHT) {\r\n        this.currentScaleFactor = 1.0;\r\n        this.currentHeight = loadedImage.height;\r\n        this.currentWidth = loadedImage.width;\r\n      } else {\r\n        this.currentScaleFactor = MAX_IMAGE_HEIGHT / loadedImage.height;\r\n        this.currentHeight = MAX_IMAGE_HEIGHT;\r\n        this.currentWidth = loadedImage.width * this.currentScaleFactor;\r\n      }\r\n    };\r\n  }\r\n\r\n  changeMode(mode: string) {\r\n    this.currentMode = mode;\r\n    this.enableDelete = false;\r\n    this.setCurrentImage();\r\n    this.setCurrentDimensions();\r\n    if (this.displayBoxes) {\r\n      this.drawBoxes();\r\n    }\r\n  }\r\n\r\n  toggleBoxes() {\r\n    this.displayBoxes = !this.displayBoxes;\r\n    this.clearCanvas();\r\n    if (this.enableDelete) {\r\n      this.enableDelete = false;\r\n    }\r\n    if (this.displayBoxes) {\r\n      this.drawBoxes();\r\n    }\r\n  }\r\n\r\n  toggleDelete() {\r\n    if (!this.displayBoxes) {\r\n      this.toggleBoxes();\r\n    }\r\n    this.enableDelete = !this.enableDelete;\r\n  }\r\n\r\n  toggleEditor() {\r\n    this.enableEdit = !this.enableEdit;\r\n  }\r\n\r\n  toggleZoom() {\r\n    this.enableZoom = !this.enableZoom;\r\n    if (this.enableDelete) {\r\n      this.toggleDelete();\r\n    }\r\n    if (this.enableEdit) {\r\n      this.toggleEditor();\r\n    }\r\n  }\r\n\r\n  drawBoxes() {\r\n    this.clearCanvas();\r\n    const coordinates = this.coordinates[this.currentMode];\r\n    for (const bbox of coordinates) {\r\n      this.drawRect(this.drawContext, bbox, DISPLAY_BOX_COLOR);\r\n      this.addLabel(bbox);\r\n    }\r\n  }\r\n\r\n  addDeleteListeners() {\r\n    const coordinates = this.coordinates[this.currentMode];\r\n    const rect = this.drawLayerElement.getBoundingClientRect();\r\n    const parent = this;\r\n    for (const bbox of coordinates) {\r\n      console.log(bbox);\r\n      this.deleteLayerElement.addEventListener(\"mousemove\", (e) => {\r\n        const x = bbox.left * parent.currentScaleFactor;\r\n        const y = bbox.top * parent.currentScaleFactor;\r\n        const w = bbox.width * parent.currentScaleFactor;\r\n        const h = bbox.height * parent.currentScaleFactor;\r\n        if (\r\n          x <= e.clientX - rect.left &&\r\n          e.clientX - rect.left <= x + w &&\r\n          y <= e.clientY - rect.top &&\r\n          e.clientY - rect.top <= y + h\r\n        ) {\r\n          parent.drawRect(this.deleteContext, bbox, \"red\");\r\n        } else {\r\n          parent.drawRect(this.deleteContext, bbox, \"blue\");\r\n        }\r\n      });\r\n      this.deleteLayerElement.addEventListener(\"click\", (e) => {\r\n        const x = bbox.left * parent.currentScaleFactor;\r\n        const y = bbox.top * parent.currentScaleFactor;\r\n        const w = bbox.width * parent.currentScaleFactor;\r\n        const h = bbox.height * parent.currentScaleFactor;\r\n        if (\r\n          x <= e.clientX - rect.left &&\r\n          e.clientX - rect.left <= x + w &&\r\n          y <= e.clientY - rect.top &&\r\n          e.clientY - rect.top <= y + h\r\n        ) {\r\n          console.log(\"It works!\");\r\n          parent.removeAlert(bbox);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  removeAlert(bbox: BoundingBox) {\r\n    const result = parent.confirm(\"Soll diese Box (Label: \" + bbox.label + \") wirklich gelöscht werden?\");\r\n    if (result) {\r\n      const idx = this.coordinates[this.currentMode].indexOf(bbox);\r\n      this.coordinates[this.currentMode].splice(idx, 1);\r\n      this.drawBoxes();\r\n      this.enableDelete = false;\r\n    }\r\n  }\r\n\r\n  drawRect(context: CanvasRenderingContext2D, bbox: BoundingBox, color: string) {\r\n    this.setCanvasProperties(context, BOX_LINE_WIDTH, \"square\", color);\r\n    context.beginPath();\r\n    context.rect(\r\n      bbox.left * this.currentScaleFactor,\r\n      bbox.top * this.currentScaleFactor,\r\n      bbox.width * this.currentScaleFactor,\r\n      bbox.height * this.currentScaleFactor);\r\n    context.stroke();\r\n  }\r\n\r\n  addLabel(bbox: BoundingBox) {\r\n    this.labelContext.font = \"bold 18pt Arial\";\r\n    this.labelContext.fillStyle = TEXT_COLOR;\r\n    this.labelContext.strokeStyle = \"black\";\r\n    this.labelContext.lineWidth = 1;\r\n    this.labelContext.fillText(\r\n      bbox.label,\r\n      this.currentScaleFactor * bbox.left,\r\n      this.currentScaleFactor * bbox.top + this.currentScaleFactor * bbox.height\r\n      + BOX_LINE_WIDTH + 20);\r\n    this.labelContext.strokeText(\r\n      bbox.label,\r\n      this.currentScaleFactor * bbox.left,\r\n      this.currentScaleFactor * bbox.top + this.currentScaleFactor * bbox.height\r\n      + BOX_LINE_WIDTH + 20);\r\n  }\r\n\r\n  rectangleDrawing() {\r\n    let rect = this.editLayerElement.getBoundingClientRect();\r\n    fromEvent(this.editLayerElement, \"mousedown\")\r\n      .pipe(\r\n        switchMap((e: MouseEvent) => {\r\n          rect = this.editLayerElement.getBoundingClientRect();\r\n          this.startX = e.clientX - rect.left;\r\n          this.startY = e.clientY - rect.top;\r\n          return fromEvent(this.editLayerElement, \"mousemove\").pipe(\r\n            takeUntil(fromEvent(this.editLayerElement, \"mouseup\")),\r\n            takeUntil(fromEvent(this.editLayerElement, \"mouseleave\"))\r\n          );\r\n        })\r\n      ).subscribe((event: MouseEvent) => {\r\n      const x = event.clientX - rect.left;\r\n      const y = event.clientY - rect.top;\r\n      this.width = x - this.startX;\r\n      this.height = y - this.startY;\r\n\r\n      this.setCanvasProperties(this.editContext, BOX_LINE_WIDTH, \"square\", EDIT_BOX_COLOR);\r\n      this.editContext.beginPath();\r\n      this.editContext.clearRect(0, 0, this.editLayerElement.width, this.editLayerElement.height);\r\n      this.editContext.rect(this.startX, this.startY, this.width, this.height);\r\n      this.editContext.stroke();\r\n    });\r\n  }\r\n\r\n  saveNewBox() {\r\n    if (!(this.width === 0 || this.height === 0)) {\r\n      const dialogConfig = this.dialogService.defaultConfig(\"470px\");\r\n      this.dialogRef = this.dialog.open(this.labelDialog, dialogConfig);\r\n      this.dialogRef.afterClosed().subscribe((val: boolean) => {\r\n        if (val && this.newLabel.length > 0) {\r\n          this.fixNegativeCoordinates();\r\n          this.coordinates[this.currentMode].push({\r\n            left: this.startX / this.currentScaleFactor,\r\n            top: this.startY / this.currentScaleFactor,\r\n            height: this.height / this.currentScaleFactor,\r\n            width: this.width / this.currentScaleFactor,\r\n            label: this.newLabel,\r\n          });\r\n          this.editContext.clearRect(0, 0, this.editLayerElement.width, this.editLayerElement.height);\r\n          this.newLabel = \"\";\r\n          this.width = 0;\r\n          this.height = 0;\r\n          if (this.displayBoxes) {\r\n            this.drawBoxes();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  close() {\r\n    this.newLabel = \"\";\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n  save() {\r\n    this.dialogRef.close(true);\r\n  }\r\n\r\n  private imageZoom() {\r\n    const img = this.sourceImage.nativeElement as HTMLImageElement;\r\n    const result = this.zoomDiv.nativeElement as HTMLDivElement;\r\n    // calculate ratio between result div and lens\r\n    const cx = result.offsetWidth / this.lensElement.offsetWidth;\r\n    const cy = result.offsetHeight / this.lensElement.offsetHeight;\r\n    // Set background properties for the result div\r\n    result.style.backgroundImage = \"url('\" + img.src + \"')\";\r\n    result.style.backgroundSize = (img.width * cx) + \"px \" + (img.height * cy) + \"px\";\r\n    // Execute a function when someone moves the cursor over the image or the lens\r\n    this.lensElement.addEventListener(\"mousemove\", moveLens);\r\n    this.zoomLayerElement.addEventListener(\"mousemove\", moveLens);\r\n\r\n    const parent = this;\r\n    // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\r\n    function moveLens(e) {\r\n      let x;\r\n      let y;\r\n      // Prevent any other actions that may occur when moving over the image\r\n      e.preventDefault();\r\n      // Get the cursor's x and y positions:\r\n      const pos = getCursorPos(e);\r\n      // Calculate the position of the lens:\r\n      x = pos.x - (parent.lensElement.offsetWidth / 2);\r\n      y = pos.y - (parent.lensElement.offsetHeight / 2);\r\n      // Prevent the lens from being positioned outside the image:\r\n      if (x > img.width - parent.lensElement.offsetWidth) {\r\n        x = img.width - parent.lensElement.offsetWidth;\r\n      }\r\n      if (x < 0) {\r\n        x = 0;\r\n      }\r\n      if (y > img.height - parent.lensElement.offsetHeight) {\r\n        y = img.height - parent.lensElement.offsetHeight;\r\n      }\r\n      if (y < 0) {\r\n        y = 0;\r\n      }\r\n      // Set the position of the lens:\r\n      parent.lensElement.style.left = x + \"px\";\r\n      parent.lensElement.style.top = y + \"px\";\r\n      // Display what the lens \"sees\":\r\n      result.style.backgroundPosition = \"-\" + (x * cx) + \"px -\" + (y * cy) + \"px\";\r\n    }\r\n    // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\r\n    function getCursorPos(e) {\r\n      let x = 0;\r\n      let y = 0;\r\n      // Get the x and y positions of the image\r\n      const a = img.getBoundingClientRect();\r\n      // Calculate the cursor's x and y coordinates, relative to the image:\r\n      x = e.pageX - a.left;\r\n      y = e.pageY - a.top;\r\n      // Consider any page scrolling\r\n      x = x - window.pageXOffset;\r\n      y = y - window.pageYOffset;\r\n      return {x, y};\r\n    }\r\n  }\r\n\r\n  private fixNegativeCoordinates() {\r\n    // in case the box is drawn from bottom right to top left: adjust negative width and height\r\n    if (this.width < 0) {\r\n      this.width = - this.width;\r\n      this.startX = this.startX - this.width;\r\n    }\r\n    if (this.height < 0) {\r\n      this.height = - this.height;\r\n      this.startY = this.startY - this.height;\r\n    }\r\n  }\r\n}\r\n","<div style=\"background: hsl(202, 73%, 96%); margin: 5px; border-radius: 5px; border: 1px solid hsl(200, 70%, 80%);\r\n            grid-column-gap: 5px; grid-template-columns: 220px 1000px 600px;\r\n            display: grid; align-content: center\">\r\n  <div style=\"display: block; margin: 20px;\">\r\n    <button class=\"btn\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"{'btn-warning': (this.displayBoxes && this.coordinates.main.length > 0\r\n            && this.currentMode !== 'main'),\r\n            'btn-primary': this.currentMode === 'main',\r\n            'btn-outline-primary': this.currentMode !== 'main'}\"\r\n            (click)=\"this.changeMode('main')\">Hauptaufnahme</button>\r\n    <button class=\"btn\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"{'btn-warning': (this.displayBoxes && this.coordinates.lateral.length > 0\r\n            && this.currentMode !== 'lateral'),\r\n            'btn-primary': this.currentMode === 'lateral',\r\n            'btn-outline-primary': this.currentMode !== 'lateral'}\"\r\n            (click)=\"this.changeMode('lateral')\"\r\n            [disabled]=\"this.scans.lateralScan === undefined\">Lateralaufnahme</button>\r\n    <button class=\"btn btn-outline-primary\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"{'btn-warning': (this.displayBoxes && this.coordinates.pre.length > 0\r\n            && this.currentMode !== 'pre'),\r\n            'btn-primary': this.currentMode === 'pre',\r\n            'btn-outline-primary': this.currentMode !== 'pre'}\"\r\n            (click)=\"this.changeMode('pre')\"\r\n            [disabled]=\"this.scans.preScan === undefined\">Voraufnahme</button>\r\n    <button class=\"btn\"\r\n            [ngClass]=\"this.displayBoxes? 'btn-success': 'btn-outline-success'\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"toggleBoxes()\">Boxen anzeigen</button>\r\n    <button class=\"btn\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            [ngClass]=\"this.enableZoom? 'btn-success': 'btn-outline-success'\"\r\n            (click)=\"toggleZoom()\">Toggle Zoom</button>\r\n    <button *ngIf=\"isAllowed\" class=\"btn\"\r\n            [ngClass]=\"this.enableDelete? 'btn-success': 'btn-outline-success'\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"toggleDelete()\">Löschen aktivieren</button>\r\n    <button *ngIf=\"isAllowed\" class=\"btn\"\r\n            [ngClass]=\"this.enableEdit? 'btn-success': 'btn-outline-success'\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"toggleEditor()\">Editor aktivieren</button>\r\n    <button *ngIf=\"isAllowed && this.enableEdit\" class=\"btn btn-outline-success\"\r\n            style=\"width: 180px; margin: 2px; padding: 10px;\"\r\n            (click)=\"saveNewBox()\">Box Speichern</button>\r\n  </div>\r\n\r\n  <div style=\"position: relative; margin: 5px;\" [ngStyle]=\"{'width.px': currentWidth, 'height.px': currentHeight}\">\r\n    <img #sourceImage\r\n      style=\"position: absolute; left: 0; top: 0; z-index: 0\"\r\n         height=\"{{currentHeight}}\" width=\"{{currentWidth}}\"\r\n         src=\"{{currentScanUrl}}\"\r\n         id=\"sourceImage\" class=\"image\" alt=\"Fehler beim Laden der Aufnahme\"/>\r\n    <canvas #drawLayer style=\"position: absolute; left: 0; top: 0; z-index: 1\" id=\"drawCanvas\"\r\n            width=\"{{currentWidth+50}}\" height=\"{{currentHeight+50}}\"></canvas>\r\n    <canvas #labelLayer style=\"position: absolute; left: 0; top: 0; z-index: 1\" id=\"labelCanvas\"\r\n            width=\"{{currentWidth+50}}\" height=\"{{currentHeight+50}}\"></canvas>\r\n    <div #lensContainer *ngIf=\"enableZoom\">\r\n      <div style=\"position: absolute; border: 1px solid #d4d4d4; width: 300px; height: 300px;\" id=\"lens\" ></div>\r\n      <div style=\"position: absolute; left: 0; top: 0; z-index: 2\" id=\"zoomCanvas\"\r\n           [ngStyle]=\"{'width.px': currentWidth, 'height.px': currentHeight}\"></div>\r\n    </div>\r\n    <canvas *ngIf=\"enableDelete\" #deleteLayer style=\"position: absolute; left: 0; top: 0; z-index: 3\" id=\"deleteCanvas\"\r\n            width=\"{{currentWidth}}\" height=\"{{currentHeight}}\"></canvas>\r\n    <canvas *ngIf=\"enableEdit\" #editLayer style=\"position: absolute; left: 0; top: 0; z-index: 3\" id=\"editCanvas\"\r\n            width=\"{{currentWidth}}\" height=\"{{currentHeight}}\"></canvas>\r\n  </div>\r\n\r\n  <div #zoomDiv style=\"margin: 20px; width: 600px; height: 600px; border: 1px solid #d4d4d4;\"\r\n    id=\"zoom\"></div>\r\n\r\n</div>\r\n\r\n<ng-template #labelDialog>\r\n  <h4 style=\"margin-bottom: 5px\" matDialogTitle>Label-Dialog</h4>\r\n  <mat-divider></mat-divider>\r\n  <mat-dialog-content style=\"margin: 10px 0\">\r\n    <div style=\"margin: 0\">Neues Label eingeben:</div>\r\n    <input style=\"margin: 0\" matInput type=\"text\" id=\"labelInput\" [(ngModel)]=\"newLabel\">\r\n  </mat-dialog-content>\r\n  <mat-divider></mat-divider>\r\n  <mat-dialog-actions style=\"float: right\">\r\n    <button class=\"btn btn-primary\" (click)=\"save()\">Speichern</button>\r\n    <button style=\"margin-left:3px\" class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n  </mat-dialog-actions>\r\n</ng-template>\r\n","export * from \"./confirm-dialog/confirm-dialog.component\";\r\nexport * from \"./image-display/image-display.component\";\r\nexport * from \"./inputModal/inputModal.component\";\r\nexport * from \"./options/options.component\";\r\nexport * from \"./report/report.component\";\r\nexport * from \"./upload/upload.component\";\r\nexport * from \"./upload-material/upload-material.component\";\r\nexport * from \"./variables/variables.component\";\r\n","import { Component, OnInit, Inject } from \"@angular/core\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\n\r\nimport {displayableQuotient} from \"@app/helpers\";\r\n\r\n@Component({\r\n  selector: \"app-modal\",\r\n  templateUrl: \"./inputModal.component.html\",\r\n  styleUrls: [\"./inputModal.component.scss\"]\r\n})\r\nexport class InputModalComponent implements OnInit {\r\n\r\n  form: FormGroup;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<InputModalComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.fb.group({\r\n      text: \"\",\r\n      number: null,\r\n      date: null,\r\n      numerator: null,\r\n      denominator: null\r\n    });\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n  checkForm(): boolean {\r\n    const value = this.form.value;\r\n    return !!(value.text || value.number || value.date || (value.numerator && value.denominator));\r\n  }\r\n\r\n  save() {\r\n    if(this.checkForm()) {\r\n      this.dialogRef.close(this.form.value);\r\n    } else {\r\n      this.dialogRef.close(false);\r\n    }\r\n  }\r\n\r\n  displayQuotient(numerator, denominator) {\r\n    return displayableQuotient(numerator as number,\r\n      denominator as number, this.data[\"fractionDigits\"]);\r\n  }\r\n\r\n}\r\n","<div mat-dialog-title>\r\n<h5>{{data['parentText']}}</h5>\r\n</div>\r\n<mat-divider></mat-divider>\r\n<mat-dialog-content [formGroup]=\"form\">\r\n  {{data['textBefore']}}\r\n    <mat-form-field *ngIf=\"data.kind === 'text'\">\r\n      <input matInput type=\"text\" formControlName=\"text\" placeholder=\"{{data['value']}}\">\r\n    </mat-form-field>\r\n    <mat-form-field *ngIf=\"data.kind === 'number'\">\r\n      <input matInput type=\"number\" formControlName=\"number\" placeholder=\"{{data['value']}}\">\r\n    </mat-form-field>\r\n    <mat-form-field *ngIf=\"data.kind === 'date'\">\r\n      <input matInput type=\"text\" ngbDatepicker #d=\"ngbDatepicker\" container=\"body\"\r\n             (click)=\"d.toggle()\" formControlName=\"date\" placeholder=\"{{data['value']}}\" readonly/>\r\n    </mat-form-field>\r\n    <ng-container *ngIf=\"data.kind === 'ratio'\">\r\n      <mat-form-field>\r\n        <input #numerator matInput type=\"number\" formControlName=\"numerator\"/>\r\n      </mat-form-field> /\r\n      <mat-form-field>\r\n        <input #denominator matInput type=\"number\" formControlName=\"denominator\"/>\r\n      </mat-form-field>\r\n      = {{displayQuotient(numerator.value, denominator.value)}}\r\n    </ng-container>\r\n  {{data['textAfter']}}\r\n\r\n</mat-dialog-content>\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-actions class=\"buttons\">\r\n  <button class=\"btn btn-primary\" (click)=\"save()\">Speichern</button>\r\n  <button class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n</mat-dialog-actions>\r\n","import {Component, Input, OnInit, Output, EventEmitter} from \"@angular/core\";\r\n\r\nimport {DataParserService} from \"@app/core\";\r\n\r\nimport * as M from \"@app/models/templateModel\";\r\n\r\n@Component({\r\n  selector: \"app-options\",\r\n  templateUrl: \"./options.component.html\",\r\n  styleUrls: [\"./options.component.scss\"]\r\n})\r\nexport class OptionsComponent implements OnInit {\r\n\r\n  @Input() categories: M.Category[];\r\n\r\n  // TODO Make these configurable\r\n\r\n  minRowLength = 1;\r\n  maxRowLength: number;\r\n  width: number;\r\n  rows: M.Category[];\r\n\r\n  @Output() clickEvent = new EventEmitter<any>();\r\n\r\n  constructor(private dataParser: DataParserService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.setMinRowLength(this.categories);\r\n    this.maxRowLength = 6;\r\n    this.determineWidth();\r\n    this.initRows();\r\n  }\r\n\r\n  initRows() {\r\n    if (this.minRowLength > this.maxRowLength) {\r\n      window.alert(\"Die gewählte Reihenlänge von \" + this.maxRowLength +\r\n        \" ist kleiner als die kleinstmögliche Länge von \" + this.minRowLength +\r\n        \". Die Reihenlänge wird auf \" + this.minRowLength + \" gesetzt.\");\r\n      this.maxRowLength = this.minRowLength;\r\n    }\r\n    this.rows = this.dataParser.extractRows(this.categories, this.maxRowLength);\r\n  }\r\n\r\n  setMinRowLength(cats: M.Category[]) {\r\n    let minRowLength = 1;\r\n    for (const cat of cats) {\r\n      for (const sel of cat.selectables) {\r\n        if (sel.kind === \"group\") {\r\n          if (sel.options.length > minRowLength) {\r\n            minRowLength = sel.options.length;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.minRowLength = minRowLength;\r\n  }\r\n\r\n  update(sel: M.Selectable, option?: string) {\r\n    if (sel.kind === \"group\") {\r\n      if (sel.value === option) {\r\n        sel.value = null;\r\n      }\r\n    }\r\n    this.clickEvent.emit();\r\n  }\r\n\r\n  updateFromVariable(parent: M.Clickable, group?: M.Group) {\r\n    if (parent.kind === \"box\") {\r\n      parent.value = true;\r\n    } else {\r\n      if (group === undefined) {\r\n        Error(\"Something went wrong here\");\r\n      } else {\r\n        group.value = parent.name;\r\n      }\r\n    }\r\n    this.clickEvent.emit();\r\n  }\r\n\r\n  private determineWidth() {\r\n    this.width = 88 / this.maxRowLength;\r\n  }\r\n}\r\n","<table>\r\n  <tbody>\r\n    <tr *ngFor=\"let row of rows\">\r\n      <td class=\"category\"\r\n          [style.width.%]=\"10\"\r\n          [ngStyle]=\"{'color': row.optional ? 'grey' : 'black'}\">{{row.name}}</td>\r\n      <ng-container *ngFor=\"let sel of row.selectables\" class=\"col-3\">\r\n        <ng-container *ngIf=\"sel.kind === 'box'\">\r\n          <td class=\"box\">\r\n            <input type=\"checkbox\" [(ngModel)]=\"sel.value\"\r\n                   (click)=\"update(sel)\" id=\"{{row.name}} {{sel.name}} box\"/>\r\n          </td>\r\n          <td class=\"title\" [style.width.%]=\"width\">\r\n            <label [ngClass]=\"{'selected': sel.value}\"\r\n                   for=\"{{row.name}} {{sel.name}} box\">\r\n              {{sel.name}}\r\n            </label>\r\n          </td>\r\n          <app-variables *ngIf=\"sel.variables.length > 0\"\r\n                         (clickEvent)=\"updateFromVariable(sel)\"\r\n                         [variables]=\"sel.variables\"\r\n                         [parentText]=\"sel.name\"\r\n                         [parentActive]=\"sel.value\"></app-variables>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"sel.kind === 'group'\">\r\n          <ng-container *ngFor=\"let option of sel.options\">\r\n            <td class=\"radio box\">\r\n              <input type=\"radio\"\r\n                     id=\"{{row.name}} {{sel.name + option.name}} box\"\r\n                     (click)=\"update(sel, option.name)\"\r\n                     [name]=\"sel.name\"\r\n                     [value]=\"option.name\"\r\n                     [(ngModel)]=\"sel.value\"/>\r\n            </td>\r\n            <td class=\"title\" [style.width.%]=\"width\">\r\n              <label for=\"{{row.name}} {{sel.name + option.name}} box\"\r\n                     [ngClass]=\"{'selected': (option.name === sel.value)}\">\r\n                {{option.name}}\r\n              </label>\r\n            </td>\r\n            <app-variables *ngIf=\"option.variables.length > 0\"\r\n                           (clickEvent)=\"updateFromVariable(option, sel)\"\r\n                           [variables]=\"option.variables\"\r\n                           [parentText]=\"option.name\"\r\n                           [parentActive]=\"option.name === sel.value\"></app-variables>\r\n          </ng-container>\r\n        </ng-container>\r\n      </ng-container>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n","import {Component, OnInit, Input} from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-report\",\r\n  templateUrl: \"./report.component.html\",\r\n  styleUrls: [\"./report.component.scss\"]\r\n})\r\nexport class ReportComponent implements OnInit {\r\n\r\n  @Input() report: string;\r\n  @Input() judgement: string;\r\n\r\n  disclaimer: string;\r\n\r\n  constructor() { }\r\n\r\n  // TODO: make download button\r\n  // TODO: Send change event to layout so changes in report are reflected in data structure\r\n\r\n  ngOnInit() {\r\n    this.disclaimer = \"Dieser Bericht wurde mit Hilfe eines sprachgesteuerten Browsertools aus Textbausteinen erstellt.\";\r\n  }\r\n\r\n  copyText(inputElement: HTMLTextAreaElement) {\r\n    inputElement.select();\r\n    document.execCommand(\"copy\");\r\n    inputElement.setSelectionRange(0, 0);\r\n  }\r\n\r\n  copyAll() {\r\n    let fullText: string;\r\n    fullText = this.report + \"\\n\\n\" + this.disclaimer + \"\\n\\n\\n\" + this.judgement + \"\\n\\n\" + this.disclaimer;\r\n    const selBox = document.createElement(\"textarea\");\r\n    selBox.value = fullText;\r\n    document.body.append(selBox);\r\n    selBox.focus();\r\n    selBox.select();\r\n    document.execCommand(\"copy\");\r\n    document.body.removeChild(selBox);\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"button\">\r\n  <button id=\"copy-button\" (click)=\"copyAll()\" class=\"btn btn-outline-secondary\">Kopieren</button>\r\n</div>\r\n\r\n<div class=\"report-text\">\r\n  <label for=\"report\"></label>\r\n  <textarea placeholder=\"Wenn Sie hier etwas eingeben, wird es bei der Berichtserstellung überschrieben\"\r\n            id=\"report\" class=\"w-100\" [(ngModel)]=\"report\" #textContent ></textarea>\r\n</div>\r\n\r\n<div class=\"judgement-text\">\r\n    <label for=\"judgement\"></label>\r\n\t\t<textarea placeholder=\"Wenn Sie hier etwas eingeben, wird es bei der Beurteilungsgenerierung überschrieben\"\r\n              id=\"judgement\" class=\"w-100\" [(ngModel)]=\"judgement\"></textarea>\r\n</div>\r\n\r\n\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { MatDialogModule } from \"@angular/material/dialog\";\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { MatDividerModule } from \"@angular/material/divider\";\r\nimport { MatInputModule } from \"@angular/material/input\";\r\nimport { MatRadioModule } from \"@angular/material/radio\";\r\nimport { MatTooltipModule } from \"@angular/material/tooltip\";\r\nimport { MatProgressBarModule } from \"@angular/material/progress-bar\";\r\nimport { NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\n\r\nimport { ConfirmDialogComponent } from \"@app/shared/confirm-dialog/confirm-dialog.component\";\r\nimport { InputModalComponent } from \"@app/shared/inputModal/inputModal.component\";\r\nimport { OptionsComponent } from \"@app/shared/options/options.component\";\r\nimport { ReportComponent } from \"@app/shared/report/report.component\";\r\nimport { UploadComponent } from \"@app/shared/upload/upload.component\";\r\nimport { UploadMaterialComponent } from \"@app/shared/upload-material/upload-material.component\";\r\nimport { VariablesComponent } from \"@app/shared/variables/variables.component\";\r\nimport { ImageDisplayComponent } from \"@app/shared/image-display/image-display.component\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ConfirmDialogComponent,\r\n    InputModalComponent,\r\n    OptionsComponent,\r\n    ReportComponent,\r\n    UploadComponent,\r\n    UploadMaterialComponent,\r\n    VariablesComponent,\r\n    ImageDisplayComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatDialogModule,\r\n    MatDividerModule,\r\n    MatInputModule,\r\n    MatTooltipModule,\r\n    MatRadioModule,\r\n    MatProgressBarModule,\r\n    NgbModule\r\n  ],\r\n  exports: [\r\n    ConfirmDialogComponent,\r\n    InputModalComponent,\r\n    OptionsComponent,\r\n    ReportComponent,\r\n    UploadComponent,\r\n    UploadMaterialComponent,\r\n    VariablesComponent,\r\n    ImageDisplayComponent\r\n  ],\r\n})\r\nexport class SharedModule { }\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport {FormControl, FormGroup, Validators} from \"@angular/forms\";\r\nimport {nanoid} from \"nanoid\";\r\nimport {MatDialogRef} from \"@angular/material/dialog\";\r\n\r\nimport * as M from \"@app/models/templateModel\";\r\nimport {BackendCallerService, FilesSortingService} from \"@app/core\";\r\n\r\n@Component({\r\n  selector: \"app-upload-material\",\r\n  templateUrl: \"./upload-material.component.html\",\r\n  styleUrls: [\"./upload-material.component.scss\"]\r\n})\r\nexport class UploadMaterialComponent implements OnInit {\r\n\r\n  uploadForm: FormGroup;\r\n  templates: M.Template[];\r\n\r\n  mainFlags: boolean[] = [];\r\n  lateralRedFlags: boolean[] = [];\r\n  lateralYellowFlags: boolean[] = [];\r\n  preRedFlags: boolean[] = [];\r\n  preYellowFlags: boolean[] = [];\r\n\r\n  supportedFileTypes = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\r\n  progress = 0;\r\n  uploading = false;\r\n  messages: string[] = [];\r\n\r\n  constructor(private backendCaller: BackendCallerService,\r\n              private dialogRef: MatDialogRef<UploadMaterialComponent>,\r\n              private filesSorter: FilesSortingService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initForm();\r\n    this.updateTemplateList();\r\n  }\r\n\r\n  initForm() {\r\n    this.uploadForm = new FormGroup({\r\n      mainScans: new FormControl([], {validators: [Validators.required]}),\r\n      lateralScans: new FormControl([]),\r\n      preScans: new FormControl([]),\r\n      template: new FormControl(null, {validators: [Validators.required]})\r\n    });\r\n  }\r\n\r\n  updateTemplateList(): void {\r\n    this.backendCaller.getTemplateList().subscribe((templates) => {\r\n      this.templates = templates;\r\n    });\r\n  }\r\n\r\n  stringify(dict) {\r\n    return JSON.stringify(dict);\r\n  }\r\n\r\n  updateIdentifier(id: string) {\r\n    this.filesSorter.setIdentifier(id);\r\n    this.flagFiles();\r\n  }\r\n\r\n  onFileSelect(event, scanType: string) {\r\n    if (event.target.files.length > 0) {\r\n      const files = event.target.files;\r\n      if (this.fileFilter(files)) {\r\n        this.uploadForm.get(scanType).setValue(Array.from(files));\r\n        this.flagFiles();\r\n      }\r\n    }\r\n  }\r\n\r\n  fileFilter(files: File[]): boolean {\r\n    for (const file of files) {\r\n      if (!(this.supportedFileTypes.includes(file.type))) {\r\n        window.alert(\"Die Datei \" + file.name + \" besitzt ein nicht unterstütztes Dateiformat. Bitte nur PNG oder JPEG hochladen.\");\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  flagFiles(): void {\r\n    const mainFiles: File[] = this.uploadForm.get(\"mainScans\").value;\r\n    const lateralFiles: File[] = this.uploadForm.get(\"lateralScans\").value;\r\n    const preFiles: File[] = this.uploadForm.get(\"preScans\").value;\r\n\r\n    this.mainFlags = this.filesSorter.identifierSearch(mainFiles);\r\n    this.lateralRedFlags = this.filesSorter.identifierSearch(lateralFiles);\r\n    this.preRedFlags = this.filesSorter.identifierSearch(preFiles);\r\n\r\n    this.lateralYellowFlags = this.filesSorter.fileMatchSearch(mainFiles, lateralFiles);\r\n    this.preYellowFlags = this.filesSorter.fileMatchSearch(mainFiles, preFiles);\r\n  }\r\n\r\n  submit(): void {\r\n    this.uploading = true;\r\n    let choice = true;\r\n    if (this.mainFlags.includes(false) || this.lateralYellowFlags.includes(false) || this.lateralRedFlags.includes(false)\r\n    || this.preYellowFlags.includes(false) || this.preRedFlags.includes(false)) {\r\n      choice = window.confirm(\"Eine oder mehre Dateien konnten nicht korrekt zugeordnet werden. \" +\r\n        \"Diese werden beim Upload ignoriert. Sind Sie sicher, dass Sie fortfahren möchten?\");\r\n    }\r\n\r\n    if (choice) {\r\n      const mainScans = this.uploadForm.get(\"mainScans\").value;\r\n      const lateralScans = this.uploadForm.get(\"lateralScans\").value;\r\n      const preScans = this.uploadForm.get(\"preScans\").value;\r\n\r\n      const fileTuples: [File, File, File][] = this.filesSorter.getFileTuples(mainScans, lateralScans, preScans);\r\n\r\n      for (const fileTuple of fileTuples) {\r\n        const formData = new FormData();\r\n        formData.append(\"template\", this.uploadForm.get(\"template\").value);\r\n        // TODO: Add choice for this later\r\n        formData.append(\"modality\", \"xray\");\r\n        formData.append(\"id\", nanoid());\r\n        formData.append(\"mainScan\", fileTuple[0]);\r\n        formData.append(\"lateralScan\", fileTuple[1]);\r\n        formData.append(\"preScan\", fileTuple[2]);\r\n\r\n        this.backendCaller.addMaterial(formData).subscribe( result => {\r\n          this.progress += 100/(fileTuples.length);\r\n          if (result.success === false) {\r\n            this.messages.push(fileTuple[0].name + \": \" + result.message);\r\n          }\r\n        });\r\n      }\r\n      setTimeout(() => this.close(), 2000);\r\n    } else {\r\n      this.uploading = false;\r\n    }\r\n\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","<div mat-dialog-title class=\"header\">\r\n  <h4>Aufnahmen hochladen</h4>\r\n</div>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-content class=\"uploadForm\" [formGroup]=\"uploadForm\" (ngSubmit)=\"submit()\">\r\n    <table class=\"files\">\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"identifier\">Identifier: </label></td>\r\n        <td class=\"button\"><input #identifierInput (change)=\"updateIdentifier(identifierInput.value)\" matTooltip=\"String-Pattern für Bildzuordnung eingeben.\r\n        Variable Ziffern mit * kennzeichnen.\"\r\n          type=\"text\" id=\"identifier\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"mainScans\">Frontalaufnahme(n): </label></td>\r\n        <td class=\"button\">\r\n          <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"fileInput1.click()\">Datei(en) auswählen</button>\r\n          <input hidden class=\"mr-3\" type=\"file\" multiple=\"multiple\" id=\"mainScans\" #fileInput1\r\n                 (change)=\"onFileSelect($event, 'mainScans')\"/></td>\r\n        <td class=\"button\">\r\n          <select class=\"dropdown\" id=\"mainImageFiles\" name=\"mainImageFiles\"\r\n                  [ngStyle]=\"{'background-color': (mainFlags.includes(false)) ? 'red' : 'white'}\"\r\n                  [disabled]=\"this.uploadForm.get('mainScans').value.length === 0\">\r\n            <option>Dateien</option>\r\n            <ng-container *ngFor=\"let file of this.uploadForm.get('mainScans').value; index as i\">\r\n              <option disabled [ngStyle]=\"{'background-color': (mainFlags[i] ? 'white' : 'red')}\">{{file.name}}</option>\r\n            </ng-container>\r\n          </select>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"lateralScans\">Lateralaufnahme(n): </label></td>\r\n        <td class=\"button\">\r\n          <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"fileInput2.click()\">Datei(en) auswählen</button>\r\n          <input hidden type=\"file\" multiple=\"multiple\" id=\"lateralScans\" #fileInput2\r\n                 (change)=\"onFileSelect($event,'lateralScans')\"/></td>\r\n        <td class=\"button\">\r\n          <select class=\"dropdown\" id=\"lateralImageFiles\" name=\"lateralImageFiles\"\r\n                  [ngStyle]=\"{'background-color': (lateralRedFlags.includes(false)) ? 'red' :\r\n                            (lateralYellowFlags.includes(false)) ? 'yellow' : 'white'}\"\r\n                  [disabled]=\"this.uploadForm.get('lateralScans').value.length === 0\">\r\n            <option>Dateien</option>\r\n            <ng-container *ngFor=\"let file of this.uploadForm.get('lateralScans').value; index as i\">\r\n              <option disabled [ngStyle]=\"{'background-color': !lateralRedFlags[i] ? 'red':\r\n                                              !lateralYellowFlags[i] ? 'yellow' : 'white'}\">\r\n                {{file.name}}</option>\r\n            </ng-container>\r\n          </select>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"label\"><label class=\"mr-3\" for=\"preImageFile\">Voraufnahme(n): </label></td>\r\n        <td class=\"button\">\r\n          <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"fileInput3.click()\">Datei(en) auswählen</button>\r\n          <input hidden type=\"file\" multiple=\"multiple\" id=\"preImageFile\" #fileInput3\r\n                 (change)=\"onFileSelect($event,'preScans')\"/>\r\n        </td>\r\n        <td class=\"button\">\r\n          <select class=\"dropdown\" id=\"preImageFiles\" name=\"preImageFiles\"\r\n                  [ngStyle]=\"{'background-color': (preRedFlags.includes(false)) ? 'red' :\r\n                            (preYellowFlags.includes(false)) ? 'yellow' : 'white'}\"\r\n                  [disabled]=\"this.uploadForm.get('preScans').value.length === 0\">\r\n            <option>Dateien</option>\r\n            <ng-container *ngFor=\"let file of this.uploadForm.get('preScans').value; index as i\">\r\n              <option disabled [ngStyle]=\"{'background-color': !preRedFlags[i] ? 'red':\r\n                                              !preYellowFlags[i] ? 'yellow' : 'white'}\">\r\n                {{file.name}}</option>\r\n            </ng-container>\r\n          </select>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n\r\n    <mat-divider></mat-divider>\r\n\r\n  <div class=\"templateSelect\">\r\n    <h5>Schablone auswählen:</h5>\r\n    <mat-radio-group class=\"verticalRadioGroup\" formControlName=\"template\">\r\n      <ng-container *ngFor=\"let template of templates\">\r\n        <mat-radio-button style=\"font-size: 120%\" value=\"{{stringify(template)}}\">\r\n          {{template.name}}\r\n        </mat-radio-button>\r\n      </ng-container>\r\n    </mat-radio-group>\r\n  </div>\r\n\r\n  <ng-container *ngIf=\"uploading\">\r\n    <mat-progress-bar mode=\"determinate\" value=\"{{progress}}\"></mat-progress-bar>\r\n    <div class=\"alert\" *ngFor=\"let message of messages\">{{message}}</div>\r\n  </ng-container>\r\n\r\n</mat-dialog-content>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-actions class=\"buttons\">\r\n  <button type=\"submit\" id=\"submitButton\" class=\"btn btn-primary\"\r\n          [disabled]=\"uploadForm.invalid\"\r\n          (click)=\"submit()\">Hochladen</button>\r\n  <button id=\"cancelButton\" class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n</mat-dialog-actions>\r\n\r\n\r\n","import {Component, OnInit} from \"@angular/core\";\r\nimport {MatDialogRef} from \"@angular/material/dialog\";\r\nimport {FormControl, FormGroup, Validators} from \"@angular/forms\";\r\n\r\nimport {BackendCallerService} from \"@app/core\";\r\nimport {getFileExtension} from \"@app/helpers\";\r\n\r\n@Component({\r\n  selector: \"app-upload\",\r\n  templateUrl: \"./upload.component.html\",\r\n  styleUrls: [\"./upload.component.scss\"]\r\n})\r\nexport class UploadComponent implements OnInit {\r\n  currentFile: File;\r\n  showWarning = false;\r\n  uploadForm: FormGroup;\r\n\r\n  constructor(private dialogRef: MatDialogRef<UploadComponent>,\r\n              private backendCaller: BackendCallerService) { }\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n  }\r\n\r\n  initForm() {\r\n    this.uploadForm = new FormGroup({\r\n      name: new FormControl(null, {\r\n        validators: [Validators.required, Validators.minLength(3)]\r\n      }),\r\n      file: new FormControl(null, {validators: [Validators.required]}),\r\n      filename: new FormControl(null, {validators: [Validators.required]})\r\n    });\r\n  }\r\n\r\n  onFileSelect(event) {\r\n    if (event.target.files.length > 0) {\r\n      this.currentFile = event.target.files[0];\r\n      this.checkFileExtension(this.currentFile);\r\n      this.uploadForm.get(\"file\").setValue(this.currentFile);\r\n    }\r\n  }\r\n\r\n  checkFileExtension(file: File) {\r\n    this.showWarning = false;\r\n    const extension = getFileExtension(file.name);\r\n    if (!(extension === \"xlsx\" || extension === \"json\")) {\r\n      this.showWarning = true;\r\n    }\r\n  }\r\n\r\n  upload() {\r\n    const extension = getFileExtension(this.uploadForm.value.file.name);\r\n    const postData = new FormData();\r\n    postData.append(\"name\", this.uploadForm.value.name);\r\n    postData.append(\"file\", this.uploadForm.value.file);\r\n    if (extension === \"xlsx\") {\r\n      // this.templateManager.addExcel(postData);\r\n    } else if (extension === \"json\") {\r\n      this.backendCaller.addTemplateFromJSON(postData).subscribe((res) => {\r\n        window.alert(res.message);\r\n        this.uploadForm.reset();\r\n        this.currentFile = null;\r\n        this.close();\r\n      });\r\n    } else {\r\n      window.alert(\"Nicht unterstützter Dateityp! Datei muss .xlsx oder .json sein.\");\r\n      this.uploadForm.reset();\r\n      this.currentFile = null;\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  /*\r\n  upload(): void {\r\n    this.timesService.addTimeStamp(new Date());\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL((document.getElementById(\"uploadFile\") as HTMLInputElement).files[0]);\r\n    reader.onload = () => {\r\n      const dat = new Date();\r\n      const base64 = (reader.result as string).replace(/^.*?base64,/, \"\");\r\n      const data = { name: this.name + \" \" + dat.getDate() + \" \" + this.months[dat.getMonth()] + \" \" + dat.getFullYear() , data: base64 };\r\n      this.http.post(environment.urlRootScala + \"upload\", data, { \"observe\": \"response\" } ).subscribe((result) => {\r\n        window.alert(\"Upload Erfolgreich\");\r\n        this.router.navigate([\"list\"]);\r\n\r\n      }, (error) => {\r\n        if (error instanceof ErrorEvent) {\r\n          window.alert(\"an unknown error has occurred\");\r\n        } else {\r\n          window.alert(\"parsing failure: \" + (error as any).error);\r\n        }\r\n      });\r\n    };\r\n    reader.onerror = (error) => {\r\n      window.alert(\"The following error occurred:\\n\" + error);\r\n    };\r\n  }\r\n*/\r\n}\r\n","<div mat-dialog-title class=\"header\">\r\n    <h5>Schablone hochladen</h5>\r\n</div>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-content [formGroup]=\"uploadForm\">\r\n  <div>\r\n    <table class=\"files\">\r\n      <tr>\r\n        <td><label class=\"mr-3\" for=\"NameOfFile\">Name: </label></td>\r\n        <td><input class=\"mr-3 inputField\" type=\"text\" name=\"name\" id=\"NameOfFile\" formControlName=\"name\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td><label class=\"mr-3\" for=\"filename\">Datei: </label></td>\r\n        <td><input readonly\r\n                   [value]=\"(currentFile === null || currentFile === undefined) ? null : currentFile.name\"\r\n                   class=\"mr-3 inputField\" type=\"text\" id=\"filename\"></td>\r\n        <td>\r\n          <button class=\"btn btn-outline-primary\" (click)=\"inputField.click()\" id=\"UploadButton\">Durchsuchen...</button>\r\n          <input hidden #inputField class=\"mr-3\"\r\n                 type=\"file\" id=\"uploadFile\" formControlName=\"filename\"\r\n                 (change)=\"onFileSelect($event)\">\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td></td>\r\n        <td><span *ngIf=\"this.showWarning\" class=\"alert-warning\">Dateityp nicht unterstützt.</span></td>\r\n      </tr>\r\n    </table>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<mat-dialog-actions class=\"buttons\">\r\n  <button id=\"submitButton\" class=\"btn btn-primary\" (click)=\"upload()\">Hochladen</button>\r\n  <button id=\"cancelButton\" class=\"btn btn-outline-secondary\" (click)=\"close()\">Abbrechen</button>\r\n</mat-dialog-actions>\r\n","import {Component, Input, OnInit, Output, EventEmitter} from \"@angular/core\";\r\nimport {Variable} from \"@app/models\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {NgbDateStruct} from \"@ng-bootstrap/ng-bootstrap\";\r\nimport {displayableQuotient} from \"@app/helpers\";\r\nimport {MatDialogService} from \"@app/core\";\r\n\r\nimport {InputModalComponent} from \"../inputModal/inputModal.component\";\r\n\r\n@Component({\r\n  selector: \"app-variables\",\r\n  templateUrl: \"./variables.component.html\",\r\n  styleUrls: [\"./variables.component.scss\"]\r\n})\r\nexport class VariablesComponent implements OnInit {\r\n\r\n  @Input() variables: Variable[];\r\n  @Input() parentText: string;\r\n  @Input() parentActive: boolean;\r\n\r\n  @Output() clickEvent = new EventEmitter<any>();\r\n\r\n  hasButtonBeenClickedOnce: Map<string, boolean> = new Map();\r\n\r\n  constructor(private dialog: MatDialog,\r\n              private dialogService: MatDialogService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initButtonClickedMap();\r\n  }\r\n\r\n  initButtonClickedMap() {\r\n    for (const variable of this.variables) {\r\n      if (variable.kind === \"text\" || variable.kind === \"number\" ||\r\n        variable.kind === \"date\" || variable.kind === \"ratio\") {\r\n        this.hasButtonBeenClickedOnce[variable.id] = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  parseButtonText(variable: Variable) {\r\n    if (!this.hasButtonBeenClickedOnce[variable.id] || !this.parentActive) {\r\n      return \".....\";\r\n    } else if (variable.kind === \"text\" || variable.kind === \"number\") {\r\n      return variable.value;\r\n    } else if (variable.kind === \"date\") {\r\n      return variable.value.day + \".\" + variable.value.month + \".\" + variable.value.year;\r\n    } else if (variable.kind === \"ratio\") {\r\n      return displayableQuotient(variable.numerator,\r\n        variable.denominator, variable.fractionDigits);\r\n    }\r\n  }\r\n\r\n  clicked(variable: Variable, value?: string) {\r\n    if (variable.kind === \"oc\") {\r\n      if (variable.value === value) {\r\n        variable.value = null;\r\n      }\r\n    }\r\n    this.clickEvent.emit();\r\n  }\r\n\r\n  async submit(variable: Variable) {\r\n    const response = await this.modalInput(variable);\r\n    if (response) {\r\n      this.hasButtonBeenClickedOnce[variable.id] = true;\r\n      this.clickEvent.emit();\r\n    }\r\n  }\r\n\r\n  modalInput(variable: Variable) {\r\n    const dialogConfig = this.dialogService.defaultConfig();\r\n\r\n    dialogConfig.data = {\r\n      kind: variable.kind,\r\n      textBefore: variable.textBefore,\r\n      textAfter: variable.textAfter,\r\n      parentText: this.parentText,\r\n    };\r\n    if (variable.kind === \"ratio\") {\r\n      dialogConfig.data[\"denominator\"] = variable.denominator;\r\n      dialogConfig.data[\"numerator\"] = variable.numerator;\r\n      dialogConfig.data[\"fractionDigits\"] = variable.fractionDigits;\r\n    } else if (variable.kind === \"text\" || variable.kind === \"number\") {\r\n      dialogConfig.data[\"value\"] = variable.value;\r\n    } else if (variable.kind === \"date\") {\r\n      dialogConfig.data[\"value\"] = variable.value.year.toString() + \"-\" +\r\n        variable.value.month.toString() + \"-\" + variable.value.day.toString();\r\n    }\r\n\r\n    const dialogRef = this.dialog.open(InputModalComponent, dialogConfig);\r\n\r\n    return dialogRef.afterClosed()\r\n      .toPromise()\r\n      .then(response => {\r\n        if (!response) {\r\n          return Promise.resolve(false);\r\n        } else {\r\n          this.assignValues(variable, response);\r\n          return Promise.resolve(true);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  assignValues(variable: Variable, input): void {\r\n    // TODO: check if response is valid\r\n    if (variable.kind === \"text\") {\r\n        variable.value = input.text;\r\n    } else if (variable.kind === \"date\") {\r\n      variable.value = (input.date as NgbDateStruct);\r\n    } else if (variable.kind === \"number\") {\r\n      variable.value = input.number as number;\r\n    } else if (variable.kind === \"ratio\") {\r\n      variable.numerator = input.numerator as number;\r\n      variable.denominator = input.denominator as number;\r\n    }\r\n  }\r\n\r\n\r\n\r\n}\r\n","<table class=\"variables\">\r\n  <ng-container *ngFor=\"let variable of this.variables\">\r\n    <tr>\r\n      <td *ngIf=\"variable.kind === 'oc'\">\r\n          {{variable.textBefore}}\r\n\t        (<ng-container *ngFor=\"let val of variable.values; let last=last\">\r\n\t\t        <input type=\"radio\" id=\"{{variable.id}}+{{val}}\"  name=\"{{variable.id}}\"\r\n                   [value]=\"val\" [(ngModel)]=\"variable.value\"\r\n                   (click)=\"clicked(variable, val)\"/>\r\n            <label for=\"{{variable.id}}+{{val}}\"\r\n                   [ngClass]=\"{'selected': (val === variable.value && parentActive)}\">{{val}}</label>\r\n            <ng-container *ngIf=\"!last\">/</ng-container>\r\n\t        </ng-container>) {{variable.textAfter}}\r\n      </td>\r\n\r\n      <td *ngIf=\"variable.kind === 'mc'\">\r\n        {{variable.textBefore}}\r\n\t        [<ng-container *ngFor=\"let val of variable.values; let last=last\">\r\n\t\t        <input type=\"checkbox\" id=\"{{variable.id}}+{{val[0]}}\" name=\"{{variable.id}}\"\r\n                   [value]=\"val[0]\" [(ngModel)]=\"val[1]\" (click)=\"clicked(variable)\"/>\r\n            <label for=\"{{variable.id}}+{{val[0]}}\"\r\n                   [ngClass]=\"{'selected': (val[1] && parentActive)}\">{{val[0]}}</label>\r\n            <ng-container *ngIf=\"!last\">/</ng-container>\r\n\t        </ng-container>] {{variable.textAfter}}\r\n      </td>\r\n\r\n      <td *ngIf=\"variable.kind === 'text' || variable.kind === 'number'\r\n      || variable.kind === 'date' || variable.kind === 'ratio'\">\r\n        {{variable.textBefore}}\r\n        <button class=\"modal-button\"\r\n                [ngClass]=\"{'selected': (hasButtonBeenClickedOnce[variable.id] && parentActive)}\"\r\n                id=\"{{variable.id}} btn\" (click)=\"submit(variable)\">{{parseButtonText(variable)}}</button>\r\n        {{variable.textAfter}}\r\n      </td>\r\n    </tr>\r\n  </ng-container>\r\n</table>\r\n","import { Component, OnInit } from \"@angular/core\";\r\n\r\n@Component({\r\n  selector: \"app-admin\",\r\n  templateUrl: \"./admin.component.html\",\r\n  styleUrls: [\"./admin.component.css\"]\r\n})\r\nexport class AdminComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>admin works!</p>\r\n","import {Component, DoCheck, OnInit} from \"@angular/core\";\r\nimport { faLaptopMedical } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport { DisplayService, AuthenticationService } from \"@app/core\";\r\nimport {Role, User} from \"@app/models\";\r\n\r\n@Component({\r\n  selector: \"app-header\",\r\n  templateUrl: \"./header.component.html\",\r\n  styleUrls: [\"./header.component.scss\"]\r\n})\r\nexport class HeaderComponent implements OnInit, DoCheck {\r\n\r\n\r\n  displayNavbar: boolean;\r\n  title = \"RadioSpeech\";\r\n  faUser: any;\r\n\r\n  private user: User;\r\n\r\n  constructor(private displayService: DisplayService,\r\n              private authenticationService: AuthenticationService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.authenticationService.user.subscribe(x => this.user = x);\r\n    this.displayNavbar = true;\r\n    this.faUser = faLaptopMedical;\r\n  }\r\n\r\n  ngDoCheck(): void {\r\n    this.displayService.updateDisplay();\r\n    this.displayNavbar = this.displayService.displayHeader;\r\n  }\r\n\r\n  get isMod() {\r\n    return this.user && (this.user.role === Role.Admin || this.user.role === Role.Moderator);\r\n  }\r\n\r\n  get isAdmin() {\r\n    return this.user && this.user.role === Role.Admin;\r\n  }\r\n\r\n  logout() {\r\n    this.authenticationService.logout();\r\n  }\r\n\r\n}\r\n","<nav class=\"navbar navbar-expand-lg navbar-light bg-light\"  *ngIf=\"displayNavbar\">\r\n  <a class=\"navbar-brand\" href=\"#\">{{title}}  <fa-icon class=\"ml-1\" [icon]=\"faUser\"></fa-icon></a>\r\n  <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\"\r\n          aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n    <span class=\"navbar-toggler-icon\"></span>\r\n  </button>\r\n\r\n  <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n    <ul class=\"navbar-nav mr-auto\">\r\n      <li class=\"nav-item\" routerLinkActive='active'>\r\n        <a class=\"nav-link\" routerLink='/list'>Schablonen</a>\r\n      </li>\r\n      <li class=\"nav-item\" routerLinkActive='active'>\r\n        <a class=\"nav-link\" routerLink='/listMat' *ngIf=\"(isMod)\">Aufnahmen befunden</a>\r\n      </li>\r\n      <li class=\"nav-item\" routerLinkActive='active'>\r\n        <a class=\"nav-link\" routerLink='/'>Radiolearn</a>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"navbar-nav ms-auto\">\r\n      <li class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/admin\" *ngIf=\"(isAdmin)\">Admin</a>\r\n      </li>\r\n      <li class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/manageAccount\">Account Management</a>\r\n      </li>\r\n      <li class=\"nav-item\">\r\n        <a class=\"nav-link\" style=\"cursor: pointer;\" (click)=\"logout()\">Logout</a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n\r\n</nav>\r\n","export * from \"./admin/admin.component\";\r\nexport * from \"./header/header.component\";\r\nexport * from \"./login/login.component\";\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { Router, ActivatedRoute } from \"@angular/router\";\r\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\nimport { first } from \"rxjs/operators\";\r\n\r\nimport {AuthenticationService} from \"@app/core/services/authentication.service\";\r\n\r\n@Component({\r\n  selector: \"app-login\",\r\n  templateUrl: \"./login.component.html\",\r\n  styleUrls: [\"./login.component.scss\"]\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  loginForm: FormGroup;\r\n  loading = false;\r\n  submitted = false;\r\n  error = \"\";\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              private route: ActivatedRoute,\r\n              private router: Router,\r\n              private authenticationService: AuthenticationService\r\n  ) {\r\n    if (this.authenticationService.userValue) {\r\n      this.router.navigate([\"/\"]);\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loginForm = this.formBuilder.group({\r\n      username: [\"\", Validators.required],\r\n      password: [\"\", Validators.required]\r\n    });\r\n  }\r\n\r\n  // convenience getter for easy access to form fields\r\n  get f() {\r\n    return this.loginForm.controls;\r\n  }\r\n\r\n  onSubmit() {\r\n    this.submitted = true;\r\n\r\n    // stop here if form is invalid\r\n    if (this.loginForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    this.authenticationService.login(this.f.username.value, this.f.password.value)\r\n      .pipe(first())\r\n      .subscribe({\r\n        next: () => {\r\n          // get return url from query parameters or default to home page\r\n          const returnUrl = this.route.snapshot.queryParams[\"returnUrl\"] || \"/\";\r\n          this.router.navigateByUrl(returnUrl);\r\n        },\r\n        error: error => {\r\n          this.error = error;\r\n          this.loading = false;\r\n        }\r\n      });\r\n  }\r\n\r\n}\r\n","<div class=\"col-md-6 offset-md-3 mt-5\">\r\n  <div class=\"card\">\r\n    <h4 class=\"card-header\">RadioSpeech - Login</h4>\r\n    <div class=\"card-body\">\r\n      <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">Nutzername</label>\r\n          <input id=\"username\" type=\"text\" formControlName=\"username\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && f.username.errors }\" />\r\n          <div *ngIf=\"submitted && f.username.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"f.username.errors.required\">Nutzername ist erforderlich</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Passwort</label>\r\n          <input id=\"password\" type=\"password\" formControlName=\"password\" class=\"form-control\"\r\n                 [ngClass]=\"{ 'is-invalid': submitted && f.password.errors }\" />\r\n          <div *ngIf=\"submitted && f.password.errors\" class=\"invalid-feedback\">\r\n            <div *ngIf=\"f.password.errors.required\">Passwort ist erforderlich</div>\r\n          </div>\r\n        </div>\r\n        <button [disabled]=\"loading\" class=\"btn btn-primary\">\r\n          <span *ngIf=\"loading\" class=\"spinner-border spinner-border-sm mr-1\"></span>\r\n          Login\r\n        </button>\r\n        <div *ngIf=\"error\" class=\"alert alert-danger mt-3 mb-0\">{{error}}</div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { ReactiveFormsModule } from \"@angular/forms\";\r\nimport { FontAwesomeModule } from \"@fortawesome/angular-fontawesome\";\r\nimport { RouterModule } from \"@angular/router\";\r\n\r\nimport { AdminComponent } from \"@app/view/admin/admin.component\";\r\nimport { HeaderComponent } from \"@app/view/header/header.component\";\r\nimport { LoginComponent } from \"@app/view/login/login.component\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HeaderComponent,\r\n    AdminComponent,\r\n    LoginComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    FontAwesomeModule,\r\n    RouterModule\r\n  ],\r\n  exports: [\r\n    HeaderComponent,\r\n    AdminComponent,\r\n    LoginComponent\r\n  ]\r\n})\r\nexport class ViewModule { }\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  backend: \"http://localhost:8000/\",\r\n  authentication: \"radio/authentication/this/is/very/safe/133742069/\",\r\n  database: \"radio/database/\",\r\n  template: \"template/\",\r\n  material: \"material/\"\r\n};\r\n\r\n/*\r\n * In development mode, for easier debugging, you can ignore zone related error\r\n * stack frames such as `zone.run`/`zoneDelegate.invokeTask` by importing the\r\n * below file. Don't forget to comment it out in production mode\r\n * because it will have a performance impact when errors are thrown\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n"],"names":[],"sourceRoot":"webpack:///"}