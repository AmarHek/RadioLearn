<table>
  <tbody>
    <tr *ngFor="let row of rows">
      <td class="category"
          [style.width.%]="10"
          [ngStyle]="{'color': row.optional ? 'grey' : 'black'}">{{row.name}}</td>
      <ng-container *ngFor="let sel of row.selectables" class="col-3">
        <ng-container *ngIf="sel.kind === 'box'">
          <td class="box">
            <input type="checkbox" [(ngModel)]="sel.value"
                   (click)="update(sel)" id="{{sel.name}}box"/>
          </td>
          <td class="title" [style.width.%]="width">
            <label [ngClass]="{'selected': sel.value}"
                   for="{{sel.name}}box">
              {{sel.name}}
            </label>
          </td>
          <app-variables *ngIf="sel.variables.length > 0"
                         (clickEvent)="updateFromVariable(sel)"

                         [variables]="sel.variables"
                         [parentText]="sel.name"
                         [parentActive]="sel.value"></app-variables>
        </ng-container>

        <ng-container *ngIf="sel.kind === 'group'">
          <ng-container *ngFor="let option of sel.options">
            <td class="radio box">
              <input type="radio"
                     id="{{sel.name + option.name}}box"
                     (click)="update(sel, option.name)"
                     [name]="sel.name"
                     [value]="option.name"
                     [(ngModel)]="sel.value"/>
            </td>
            <td class="title" [style.width.%]="width">
              <label for="{{sel.name + option.name}}box"
                     [ngClass]="{'selected': (option.name === sel.value)}">
                {{option.name}}
              </label>
            </td>
            <app-variables *ngIf="option.variables.length > 0"
                           (clickEvent)="updateFromVariable(option, sel)"

                           [variables]="option.variables"
                           [parentText]="option.name"
                           [parentActive]="option.name === sel.value"></app-variables>
          </ng-container>
        </ng-container>
      </ng-container>
    </tr>
  </tbody>
</table>
